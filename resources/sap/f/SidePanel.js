/*!
 * OpenUI5
 * (c) Copyright 2009-2024 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.define(["sap/ui/Device","sap/ui/core/Control","sap/ui/core/Core","sap/ui/core/Element","sap/ui/core/Icon","sap/ui/core/Lib","sap/ui/core/Popup","sap/ui/core/ResizeHandler","sap/ui/core/delegate/ScrollEnablement","sap/ui/core/delegate/ItemNavigation","sap/ui/dom/containsOrEquals","sap/m/Title","sap/m/Button","sap/m/Menu","sap/m/MenuItem","sap/ui/core/InvisibleMessage","./SidePanelItem","./SidePanelRenderer","./library","sap/ui/core/library","sap/ui/events/F6Navigation","sap/ui/thirdparty/jquery","sap/ui/events/KeyCodes"],function(e,t,i,n,s,o,a,r,l,h,d,p,u,c,f,g,_,S,m,y,v,jQuery,I){"use strict";var P=o.getResourceBundleFor("sap.f"),E=y.InvisibleMessageMode,b=m.SidePanelPosition;var A=0,w=1,R=2;var x=560;var T=t.extend("sap.f.SidePanel",{metadata:{library:"sap.f",properties:{actionBarExpanded:{type:"boolean",group:"Appearance",defaultValue:false},ariaLabel:{type:"string",group:"Accessibility",defaultValue:"Side Panel"},sidePanelResizable:{type:"boolean",group:"Appearance",defaultValue:false},sidePanelWidth:{type:"sap.ui.core.CSSSize",group:"Appearance",defaultValue:"20rem"},sidePanelMinWidth:{type:"sap.ui.core.CSSSize",group:"Appearance",defaultValue:"15rem"},sidePanelMaxWidth:{type:"sap.ui.core.CSSSize",group:"Appearance",defaultValue:"90%"},sidePanelResizeStep:{type:"int",group:"Appearance",defaultValue:10},sidePanelResizeLargerStep:{type:"int",group:"Appearance",defaultValue:100},sideContentExpanded:{type:"boolean",group:"Appearance",defaultValue:false,visibility:"hidden"},sidePanelPosition:{type:"sap.f.SidePanelPosition",group:"Appearance",defaultValue:b.Right}},aggregations:{mainContent:{type:"sap.ui.core.Control",multiple:true},items:{type:"sap.f.SidePanelItem",multiple:true,singularName:"item"},_arrowButton:{type:"sap.m.Button",multiple:false,visibility:"hidden"},_closeButton:{type:"sap.m.Button",multiple:false,visibility:"hidden"},_overflowItem:{type:"sap.f.SidePanelItem",multiple:false,visibility:"hidden"},_overflowMenu:{type:"sap.m.Menu",multiple:false,visibility:"hidden"},_contextMenu:{type:"sap.m.Menu",multiple:false,visibility:"hidden"}},associations:{selectedItem:{type:"sap.f.SidePanelItem",multiple:false}},events:{toggle:{allowPreventDefault:true,parameters:{item:{type:"sap.f.SidePanelItem"},expanded:{type:"boolean"}}}}},renderer:S});T.prototype.init=function(){this.setAggregation("_arrowButton",new u(this.getId()+"-expandCollapseButton",{type:"Transparent",press:this._toggleActionBarExpanded.bind(this)}).addStyleClass("sapFSPExpandCollapse"));this.setAggregation("_overflowItem",new _({icon:"sap-icon://overflow",text:P.getText("SIDEPANEL_MORE_ACTIONS_TEXT")}));if(!e.system.phone){var t=new c({itemSelected:function(e){var t=e.getParameter("item");if(this._mOverflowItemsMap[t.getId()]){this._toggleItemSelection(this._mOverflowItemsMap[t.getId()])}}.bind(this),closed:function(){setTimeout(function(){this._setOverflowItemSelection(false)}.bind(this),100)}.bind(this)}).addStyleClass("sapFSPOverflowMenu");this.setAggregation("_overflowMenu",t)}this._fnOnResizeRef=this._onResize.bind(this);this._fnOnMainScroll=this._handleScroll.bind(this);this._fnOnMainFocusOut=this._onMainFocusOut.bind(this);this._fnOnTouchStart=this._onTouchStart.bind(this);this._fnOnTouchEnd=this._onTouchEnd.bind(this);this._fnOnTouchMove=this._onTouchMove.bind(this);this._fnOnDblClick=this._onDblClick.bind(this);this._iLastScrollPosition=0;this._iSidePanelPosition=w;this._bShouldAttachGlobalHandlers=true;this._iVisibleItems=0;this._bOverflowMenuOpened=false;this._mOverflowItemsMap={};this._oItemNavigation=null};T.prototype.exit=function(){this._detachResizeHandlers();this._detachScrollHandler();this._detachMainFocusOutHandler();this._detachResizableHandlers()};T.prototype.setSidePanelWidth=function(e){this.setProperty("sidePanelWidth",e);if(this.getDomRef()){this._sSidePanelWidth=this._getSidePanelWidth()}return this};T.prototype.setSelectedItem=function(e){var t=this.getSelectedItem(),i,s;if(typeof e==="string"){i=e;s=n.getElementById(e)}else if(e&&e.isA("sap.f.SidePanelItem")){i=e.getId();s=e}if(!i){t&&this._toggleItemSelection(n.getElementById(t))}else if(s&&s.getEnabled()&&i!==t&&i!==this.getAggregation("_overflowItem").getId()){this._toggleItemSelection(s);this.setAssociation("selectedItem",s,true)}return this};T.prototype.onBeforeRendering=function(){var e=this.getAggregation("_arrowButton"),t=this.getActionBarExpanded(),i=P.getText("SIDEPANEL_EXPAND_BUTTON_TEXT")+"/"+P.getText("SIDEPANEL_COLLAPSE_BUTTON_TEXT"),n;if(b.Right===this.getSidePanelPosition()){n=t?"right":"left"}else{n=t?"left":"right"}e.setIcon("sap-icon://navigation-"+n+"-arrow");e.setTooltip(i);this._detachResizeHandlers();this._attachResizeHandlers();this._detachScrollHandler();this._detachMainFocusOutHandler();this._detachResizableHandlers();this._oInvisibleMessage=g.getInstance();if(this._isSingleItem()){var s=t?this.getItems()[0]:null;this.setProperty("sideContentExpanded",t);this.setAssociation("selectedItem",s,true)}};T.prototype.onAfterRendering=function(){var t=this._isSingleItem()&&this.getActionBarExpanded()?this.getAggregation("_closeButton"):this.getAggregation("_arrowButton"),i;if(!e.system.phone){i=t.getDomRef();i&&i.setAttribute("aria-expanded",this.getActionBarExpanded()?"true":"false")}!this._getSideContentExpanded()&&this._attachScrollHandler();this._attachMainFocusOutHandler();this._attachResizableHandlers();if(!e.system.phone){this._determineVisibleItems();if(!this._isSingleItem()&&this._iVisibleItems>0){this._initItemNavigation()}if(this._getSideContentExpanded()){this.getItems().length&&this._fixSidePanelWidth()}}else{if(this.getDomRef().querySelector(".sapFSPMain").scrollTop===0){this.setActionBarExpanded(true)}}if(!this._sSidePanelWidth){this._sSidePanelWidth=this._getSidePanelWidth()}};T.prototype.oncontextmenu=function(e){var t=document.activeElement===this.getDomRef().querySelector(".sapFSPSplitterBar");if(t||e.target.closest(".sapFSPSide.sapFSPResizable")){e.preventDefault();if(t){this._bContextMenuFromSplitter=true}this._showResizeContextMenu(e)}};T.prototype.onkeydown=function(e){var t=e.target,i=this.getDomRef().querySelector(".sapFSPActionBarList"),s=this._getSideContentExpanded(),o=this.getActionBarExpanded()||s,a=e.ctrlKey||e.metaKey,r=document.activeElement===this.getDomRef().querySelector(".sapFSPSplitterBar");if(a&&e.which===I.ARROW_LEFT){e.preventDefault();if(s){this._focusSideContent()}}else if(a&&e.which===I.ARROW_RIGHT&&s){if(s){this._contentControlToFocus=n.getActiveElement()}this._oItemNavigation.getFocusedDomRef().focus()}else if(a&&e.shiftKey&&e.which===I.P){e.preventDefault();this._toggleActionBarExpanded();if(!o){this._oItemNavigation.getFocusedDomRef().focus()}else{s&&this.setActionBarExpanded(false);this._closeSideContent();this._focusMain()}}else if(e.which===I.ESCAPE){e.preventDefault();this.setActionBarExpanded(false);this._closeSideContent();this._focusMain()}else if(r){switch(e.which){case I.ENTER:this._setSidePanelResizePosition(w);break;case I.END:this._setSidePanelResizePosition(R);break;case I.HOME:this._setSidePanelResizePosition(A);break;case I.ARROW_LEFT:case I.ARROW_UP:this._moveSidePanelResizePositionWith(e.shiftKey?this.getSidePanelResizeLargerStep():this.getSidePanelResizeStep());break;case I.ARROW_RIGHT:case I.ARROW_DOWN:this._moveSidePanelResizePositionWith(e.shiftKey?-this.getSidePanelResizeLargerStep():-this.getSidePanelResizeStep());break;case I.F10:if(e.shiftKey){e.preventDefault();this._bContextMenuFromSplitter=true;this._showResizeContextMenu(e)}break}}if(!d(i,t)||t===i){return}switch(e.which){case I.ENTER:e.preventDefault();this._toggleItemSelection(e.srcControl);break;case I.SPACE:e.preventDefault();break}};T.prototype.onkeyup=function(e){var t=e.target,i=this.getDomRef().querySelector(".sapFSPActionBarList");if(!d(i,t)||t===i){return}if(e.which===I.SPACE){this._toggleItemSelection(e.srcControl)}};T.prototype.ontap=function(e){var t,i=e.target,s=this.getDomRef().querySelector(".sapFSPActionBarList");if(!d(s,i)||i===s){return}t=i;while(t.tagName!=="LI"){t=t.parentElement}if(!t){return}this._toggleItemSelection(n.getElementById(t.id))};T.prototype.onsapskipforward=function(e){e.preventDefault();this._handleGroupNavigation(e,false)};T.prototype.onsapskipback=function(e){this._handleGroupNavigation(e,true)};T.prototype._getContextMenu=function(){var e=this.getAggregation("_contextMenu");if(!e){e=new c({items:[new f({text:P.getText("SIDEPANEL_CONTEXTMENU_MAXIMUM_WIDTH"),press:function(){this._setSidePanelResizePosition(R)}.bind(this)}),new f({text:P.getText("SIDEPANEL_CONTEXTMENU_MINIMUM_WIDTH"),press:function(){this._setSidePanelResizePosition(A)}.bind(this)}),new f({text:P.getText("SIDEPANEL_CONTEXTMENU_DEFAULT_WIDTH"),press:function(){this._setSidePanelResizePosition(w)}.bind(this)})],closed:function(e){if(this._bContextMenuFromSplitter){this._bContextMenuFromSplitter=false;this.getDomRef().querySelector(".sapFSPSplitterBar").focus()}}.bind(this)});this.setAggregation("_contextMenu",e)}return e};T.prototype._getSideContentExpanded=function(){return this.getProperty("sideContentExpanded")};T.prototype._setSideContentExpanded=function(e){this._isSingleItem()&&this.setActionBarExpanded(e);return this.setProperty("sideContentExpanded",e)};T.prototype._getFocusDomRef=function(e){return e.getDomRef()};T.prototype._focusMain=function(){if(this._oPreviousFocusedMainElement){this._oPreviousFocusedMainElement.focus()}else{var e=this.getMainContent();for(let t=0;t<e.length;++t){if(e[t].isFocusable()){e[t].focus();break}}}};T.prototype._focusSideContent=function(){var e=this._contentControlToFocus||this.getAggregation("_closeButton");e&&e.focus()};T.prototype._closeSideContent=function(){var e=n.getElementById(this.getSelectedItem()),t=true;if(e){t=this._fireToggle({item:e,expanded:false})}if(t){this._setSideContentExpanded(false);this.setAssociation("selectedItem",null);if(this._isSingleItem()){setTimeout(function(){var e=this.getAggregation("_arrowButton");e&&e.focus()}.bind(this),0)}}};T.prototype._toggleActionBarExpanded=function(){var e;if(this._isSingleItem()){e=!this.getActionBarExpanded()?this.getItems()[0]:null;if(e){var t=this._fireToggle({item:e,expanded:!!e});if(!t){return}}this.setAssociation("selectedItem",e);this._setSideContentExpanded(!!e);setTimeout(function(){var e=this.getAggregation("_closeButton");e&&e.focus()}.bind(this),0)}else{this.setActionBarExpanded(!this.getActionBarExpanded())}};T.prototype._fireToggle=function(e){this._contentControlToFocus=undefined;return this.fireToggle(e)};T.prototype._initItemNavigation=function(){var e=this.getItems(),t=[],i=e.length>this._iVisibleItems,n=i?this._iVisibleItems-1:e.length,s=this.getAggregation("_overflowItem"),o=this.getAggregation("_overflowMenu"),a,r,l;if(!e.length||!this._iVisibleItems){return}else{r=e[0].getDomRef().parentElement;o.destroyItems();this._mOverflowItemsMap={}}e.forEach(function(e,i){if(i<n){if(e.getEnabled()){a=this._getFocusDomRef(e);a.setAttribute("tabindex","-1");t.push(a)}e.$().css("display","flex")}else{e.$().css("display","none");l=new f({text:e.getText(),icon:e.getIcon(),enabled:e.getEnabled()});o.addItem(l);this._mOverflowItemsMap[l.getId()]=e}}.bind(this));if(i){s.$().css("visibility","visible");a=this._getFocusDomRef(s);a.setAttribute("tabindex","-1");t.push(a)}else{s.$().css("visibility","hidden")}if(!this._oItemNavigation){this._oItemNavigation=(new h).setCycling(false).attachEvent(h.Events.AfterFocus,this._onItemNavigationAfterFocus,this).setDisabledModifiers({sapnext:["alt","meta","ctrl"],sapprevious:["alt","meta","ctrl"]});this.addDelegate(this._oItemNavigation);this._bAnnounceSelected=true}this._oItemNavigation.setRootDomRef(r).setItemDomRefs(t).setPageSize(n);if(this._oItemNavigation.getFocusedIndex()===-1){this._oItemNavigation.setFocusedIndex(0)}};T.prototype._onItemNavigationAfterFocus=function(e){var t=this.getSelectedItem();if(t===this._oItemNavigation.getFocusedDomRef().id&&this._bAnnounceSelected){this._oInvisibleMessage.announce(P.getText("SIDEPANEL_NAV_ITEM_SELECTED"),E.Polite)}this._bAnnounceSelected=true};T.prototype._attachResizeHandlers=function(){this._iResizeHandlerId=r.register(this,this._fnOnResizeRef)};T.prototype._detachResizeHandlers=function(){if(this._iResizeHandlerId){r.deregister(this._iResizeHandlerId);this._iResizeHandlerId=null}};T.prototype._determineVisibleItems=function(){var e=this.getDomRef(),t=e&&e.querySelector(".sapFSPActionBarList");if(!t){return}var i=window.getComputedStyle(t),n=parseInt(i.gap),s=parseInt(i.marginBottom),o=parseInt(i.marginTop),a=e.querySelector(".sapFSPOverflowItem"),r=a&&a.clientHeight,l;if(!this._isSingleItem()){l=e.querySelector(".sapFSPSideInner").clientHeight-s-o;this._iVisibleItems=parseInt((l+n)/(r+n))}};T.prototype._onResize=function(t){if(!this.getItems().length||e.system.phone){return}this._determineVisibleItems();if(!this._isSingleItem()&&this._iVisibleItems>0){this._initItemNavigation()}if(this._getSideContentExpanded()){this._fixSidePanelWidth()}};T.prototype._fixSidePanelWidth=function(){var e=this.getDomRef(),t=e.querySelector(".sapFSPSide"),i=this._getControlWidth(),n=parseInt(window.getComputedStyle(t).width),s=i<n;t.style.width=s?i+"px":this._getSidePanelWidth();t.style.minWidth=s?i+"px":this._getSidePanelMinWidth();t.style.maxWidth=this._getSidePanelMaxWidth();this._updateSplitViewClass(t);this.getSidePanelResizable()&&this._updateAriaValues()};T.prototype._updateSplitViewClass=function(e){var t=parseInt(window.getComputedStyle(e).width);if(t>x){e.classList.add("sapFSPSplitView")}else{e.classList.remove("sapFSPSplitView")}};T.prototype._updateAriaValues=function(){var e=this.getDomRef(),t=e.querySelector(".sapFSPSplitterBar"),i=this._getControlWidth(),n=parseInt(window.getComputedStyle(e.querySelector(".sapFSPSide")).width);t.setAttribute("aria-valuenow",Math.round(n/i*100));t.setAttribute("aria-valuemin",Math.round(parseInt(window.getComputedStyle(e.querySelector(".sapFSPMinWidth")).width)/i*100));t.setAttribute("aria-valuemax",Math.round(parseInt(window.getComputedStyle(e.querySelector(".sapFSPMaxWidth")).width)/i*100))};T.prototype._setOverflowItemSelection=function(e){var t=this.getAggregation("_overflowItem"),i;if(!t||!t.getDomRef()){return}this._bOverflowMenuOpened=e;i=this._getOverflowItemText();t.setText(i,false);t.$().find(".sapFSPItemText").text(i)};T.prototype._getAriaLabelText=function(){var e=this.getAriaLabel();return e?e:P.getText("SIDEPANEL_DEFAULT_ARIA_LABEL")};T.prototype._getOverflowItemText=function(){return this._bOverflowMenuOpened?P.getText("SIDEPANEL_SHOW_LESS_TEXT"):P.getText("SIDEPANEL_MORE_ACTIONS_TEXT")};T.prototype._getSideContentAriaLabel=function(){return P.getText("SIDEPANEL_CONTENT_ARIA_LABEL")};T.prototype._getSplitterTitle=function(){return P.getText("SIDEPANEL_RESIZE_SPLITTER_TITLE")};T.prototype._toggleItemSelection=function(t){var i,s=this.getSelectedItem(),o=t.getDomRef(),a=t.getId()!==s,r,l=true;if(o&&o.classList.contains("sapFSPOverflowItem")){this._toggleOverflowMenu(o);return}if(!t.getEnabled()){return}if(s&&(!r||a)){l=this._fireToggle({item:a?n.getElementById(s):t,expanded:false})}if(!l){return}i=a?t:null;r=!!i;this.setAssociation("selectedItem",i);if(i){this._bAnnounceSelected=false;l=this._fireToggle({item:i,expanded:true});if(!l){this._setSideContentExpanded(false);return}}!e.system.phone&&this.getActionBarExpanded()&&this.setActionBarExpanded(false);this._setSideContentExpanded(r)};T.prototype._toggleOverflowMenu=function(e){var t=this.getAggregation("_overflowMenu"),i={onkeydown:this._overflowMenuOnkeydown.bind(this)};if(!e){if(this._bOverflowMenuOpened){this._bOverflowMenuOpened=false}return}if(this._bOverflowMenuOpened){this._setOverflowItemSelection(false);t.close()}else{this._setOverflowItemSelection(true);setTimeout(function(){var n=!t.getAggregation("_menu");t.openBy(e,false,a.Dock.BeginBottom,a.Dock.EndBottom,"3 0");t._getMenu().getPopup().setExtraContent([this.getAggregation("_overflowItem")]);n&&t.getAggregation("_menu").addEventDelegate(i)}.bind(this),0)}};T.prototype._overflowMenuOnkeydown=function(e){var t=this.getAggregation("_overflowItem");e.preventDefault();if(e.which===I.ARROW_RIGHT){this._closeOverflowMenu();t&&t.focus()}else if(e.which===I.ARROW_LEFT&&!(e.ctrlKey||e.metaKey)){this._closeOverflowMenu();this.setActionBarExpanded(false);this._focusMain()}};T.prototype._getSelectedItem=function(){return n.getElementById(this.getSelectedItem())};T.prototype._getSideContentHeaderTitle=function(){var e=this._getSelectedItem();if(!this._contentHeaderTitle){this._contentHeaderTitle=new p}e&&this._contentHeaderTitle.setText(e.getText())&&this._contentHeaderTitle.setTooltip(e.getText());return this._contentHeaderTitle};T.prototype._getSideContentHeaderIcon=function(){var e=this._getSelectedItem();if(!this._contentHeaderIcon){this._contentHeaderIcon=new s}e&&this._contentHeaderIcon.setSrc(e.getIcon());return this._contentHeaderIcon};T.prototype._getSideContentHeaderCloseBtn=function(){var t,i=this.getAggregation("_closeButton");if(this._isSingleItem()){t=e.system.phone?"sap-icon://navigation-down-arrow":"sap-icon://navigation-"+this.getSidePanelPosition().toLowerCase()+"-arrow"}else{t="sap-icon://decline"}if(!i){i=new u(this.getId()+"-closeButton",{type:"Transparent",tooltip:P.getText("SIDEPANEL_CLOSE_BUTTON_TEXT"),icon:t,press:function(){var e=this._getSelectedItem(),t=this.getAggregation("_overflowItem");this._bAnnounceSelected=false;if(!this._isSingleItem()){if(this.getDomRef().querySelector("#"+e.getId()).style.display==="none"){t&&t.focus()}else{e&&e.focus()}}this._closeSideContent()}.bind(this)});this.setAggregation("_closeButton",i)}else{i.setIcon(t)}return i};T.prototype._attachScrollHandler=function(){if(!e.system.phone||!this.getDomRef()){return}this.getDomRef().querySelector(".sapFSPMain").addEventListener("scroll",this._fnOnMainScroll)};T.prototype._detachScrollHandler=function(){if(!e.system.phone||!this.getDomRef()){return}this.getDomRef().querySelector(".sapFSPMain").removeEventListener("scroll",this._fnOnMainScroll)};T.prototype._closeOverflowMenu=function(){if(this._bOverflowMenuOpened){this._setOverflowItemSelection(false);this.getAggregation("_overflowMenu").close()}};T.prototype._attachMainFocusOutHandler=function(){if(!e.system.phone){var t=this.getDomRef();t&&t.querySelector(".sapFSPMain").addEventListener("focusout",this._fnOnMainFocusOut,false)}};T.prototype._detachMainFocusOutHandler=function(){if(!e.system.phone){var t=this.getDomRef();t&&t.querySelector(".sapFSPMain").removeEventListener("focusout",this._fnOnMainFocusOut,false)}};T.prototype._onMainFocusOut=function(e){this._oPreviousFocusedMainElement=e.target};T.prototype._handleScroll=function(e){var t,i,n;if(!this.bScrolling){this.bScrolling=true;t=parseInt(e.target.scrollTop);setTimeout(function(){i=t>this._iLastScrollPosition;n=t<this._iLastScrollPosition;this.setActionBarExpanded(!i||n);this._iLastScrollPosition=t;this.bScrolling=false}.bind(this),100)}};T.prototype._handleGroupNavigation=function(e,t){var i=new jQuery.Event("keydown");this.$().trigger("focus");i.target=e.target;i.key="F6";i.shiftKey=t;v.handleF6GroupNavigation(i)};T.prototype._isSingleItem=function(){return this.getItems().length===1};T.prototype._calculatePixelWidth=function(e){if(typeof e==="string"){e=e.replace(/\s/g,"");if(e.slice(-1)==="%"){e=parseInt(this._getControlWidth()*parseFloat(e)/100)+"px"}}else{e=e.toString()+"px"}return e};T.prototype._getControlWidth=function(){return parseInt(window.getComputedStyle(this.getDomRef()).width)};T.prototype._getSidePanelWidth=function(){return this._calculatePixelWidth(this.getSidePanelWidth())};T.prototype._getSidePanelMinWidth=function(){return this._calculatePixelWidth(this.getSidePanelMinWidth())};T.prototype._getSidePanelMaxWidth=function(){return this._calculatePixelWidth(this.getSidePanelMaxWidth())};T.prototype._isResizable=function(){return this.getSidePanelResizable()&&!e.system.phone&&(this.getActionBarExpanded()||this._getSideContentExpanded())};T.prototype._attachResizableHandlers=function(){var t=this.getDomRef(),i=t&&t.querySelector(".sapFSPSplitterBar");if(!i){return}if(e.system.combi||e.system.phone||e.system.tablet){i.addEventListener("touchstart",this._fnOnTouchStart);i.addEventListener("touchend",this._fnOnTouchEnd);i.addEventListener("touchmove",this._fnOnTouchMove)}if(e.system.desktop||e.system.combi){i.addEventListener("dblclick",this._fnOnDblClick);i.addEventListener("mousedown",this._fnOnTouchStart);t.addEventListener("mouseup",this._fnOnTouchEnd);t.addEventListener("mousemove",this._fnOnTouchMove)}};T.prototype._detachResizableHandlers=function(){var t=this.getDomRef(),i=t&&t.querySelector(".sapFSPSplitterBar");if(!i){return}if(e.system.combi||e.system.phone||e.system.tablet){i.removeEventListener("touchstart",this._fnOnTouchStart);i.removeEventListener("touchend",this._fnOnTouchEnd);i.removeEventListener("touchmove",this._fnOnTouchMove)}if(e.system.desktop||e.system.combi){i.removeEventListener("dblclick",this._fnOnDblClick);i.removeEventListener("mousedown",this._fnOnTouchStart);t.removeEventListener("mouseup",this._fnOnTouchEnd);t.removeEventListener("mousemove",this._fnOnTouchMove)}};T.prototype._onTouchStart=function(t){t.preventDefault();if(t.button===0||t.type==="touchstart"){if((e.system.desktop||e.system.combi)&&!(e.system.tablet||e.system.phone)){this.getDomRef().querySelector(".sapFSPSplitterBar").focus()}this._bResizeStarted=true;this._iStartPositionX=t.touches?t.touches[0].pageX:t.pageX}};T.prototype._onTouchEnd=function(e){this._bResizeStarted&&e.preventDefault();this._bResizeStarted=false};T.prototype._onTouchMove=function(e){if(!this._bResizeStarted){return}var t=e.touches?e.touches[0].pageX:e.pageX,i=this._iStartPositionX-t,n=this.getDomRef().querySelector(".sapFSPSide"),s=parseInt(window.getComputedStyle(n)["width"]);e.preventDefault();if(s){s+=i;this.setProperty("sidePanelWidth",s+"px",true);n.style.width=s+"px";this._iStartPositionX=t;this._updateSplitViewClass(n);this._updateAriaValues()}};T.prototype._onDblClick=function(e){e.preventDefault();this._iSidePanelPosition++;if(this._iSidePanelPosition>R){this._iSidePanelPosition=A}this._setSidePanelResizePosition(this._iSidePanelPosition)};T.prototype._setSidePanelResizePosition=function(e){var t=[this._getSidePanelMinWidth(),this._sSidePanelWidth,this._getSidePanelMaxWidth()];this.setProperty("sidePanelWidth",t[e],true);this._fixSidePanelWidth()};T.prototype._moveSidePanelResizePositionWith=function(e){var t=this.getDomRef().querySelector(".sapFSPSide"),i=parseInt(window.getComputedStyle(t)["width"]);if(e&&i){i+=e;this.setProperty("sidePanelWidth",i+"px",true);t.style.width=i+"px";this._updateAriaValues()}};T.prototype._showResizeContextMenu=function(e){var t=this._getContextMenu();this._bResizeStarted=false;this._bContextMenuFromSplitter&&t.openBy(this.getDomRef().querySelector(".sapFSPSplitterBarGrip"))||t.openAsContextMenu(e,this)};return T});
//# sourceMappingURL=SidePanel.js.map