/*!
 * OpenUI5
 * (c) Copyright 2009-2024 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.define(["sap/base/Log","sap/ui/core/Element","sap/ui/core/InvisibleRenderer"],function(e,t,i){"use strict";return{findDropTargetsAbove:function(e,t){return this._findDropTargets(e,t,this._isAbove)},findDropTargetsBelow:function(e,t){return this._findDropTargets(e,t,this._isBelow)},getItemWrapper:function(e){var t=e.getDomRef(),n;if(t){return t.parentElement}n=document.getElementById(i.createInvisiblePlaceholderId(e));if(n){return n.parentElement}return null},createConfig:function(e,t){return{grid:e,item:t}},_findDropTargets:function(e,i,n){var r=[],o=this.getItemWrapper(i),s=e.getItems().filter(function(e){return n(o,this.getItemWrapper(e))}.bind(this)),u=this.createConfig(e,this._findClosest(i,s),i,n);if(u.item){r.push(u)}else{r=Array.from(document.querySelectorAll(".sapFGridContainer")).filter(function(e){return n(o,e)}).map(function(e){var r=t.closestTo(e);var o=this.createConfig(r,this._findClosest(i,r.getItems()),i,n);o.distFromItemToGrid=this._getDistance(i,r,n);return o}.bind(this)).sort(function(e,t){return e.distFromItemToGrid-t.distFromItemToGrid})}return r},_findClosest:function(e,t,i){var n=null,r=Number.POSITIVE_INFINITY;t.forEach(function(t){var o=this._getDistance(e,t,i);if(o<r){n=t;r=o}}.bind(this));return n},_getDistance:function(t,i,n){var r=t.getDomRef().getBoundingClientRect(),o=i.getDomRef().getBoundingClientRect();var s={x:o.left};if(n===this._isAbove){s.y=o.top+o.height}else{s.y=o.top}var u={x:s.x+o.width,y:s.y};var a={x:r.left+r.width/2,y:r.top+r.height/2};var f=(u.x-s.x)*(u.x-s.x)+(u.y-s.y)*(u.y-s.y);var c=((a.x-s.x)*(u.x-s.x)+(a.y-s.y)*(u.y-s.y))/f;var g={};if(c<0){g.x=s.x;g.y=s.y}else if(c>1){g.x=u.x;g.y=u.y}else{g.x=s.x+c*(u.x-s.x);g.y=s.y+c*(u.y-s.y)}var l=g.x-a.x,d=g.y-a.y,m=l*l+d*d;if(m>Number.MAX_SAFE_INTEGER){e.warning("Maximum safe integer value exceeded.",m,"GridContainerUtils")}return m},_isAbove:function(e,t){var i=e.getBoundingClientRect().top,n=t.getBoundingClientRect().top;return n-i<0},_isBelow:function(e,t){var i=e.getBoundingClientRect().top,n=t.getBoundingClientRect().top;return n-i>0}}});
//# sourceMappingURL=GridContainerUtils.js.map