/*!
 * OpenUI5
 * (c) Copyright 2009-2024 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.define(["sap/f/cards/CardBadgeCustomData","sap/m/BadgeCustomData","sap/m/ObjectStatus","sap/ui/core/InvisibleText","sap/ui/core/Lib","sap/ui/core/library","sap/f/library","sap/ui/base/ManagedObjectObserver","sap/base/Log"],function(t,e,a,i,s,n,r,d,g){"use strict";const o=r.CardBadgeVisibilityMode,u=n.IndicationColor;var c=function(){this.initCardBadgeEnablement=function(){this._customDataObserver=new d(this._onCustomDataChange.bind(this));this._customDataObserver.observe(this,{aggregations:["customData"]});this._aCardBadges=["temporary"]};this.destroyCardBadgeEnablement=function(){if(this._customDataObserver){this._customDataObserver.disconnect();this._customDataObserver=null}};this._createBadge=function(e){const i=e instanceof t?e.getIcon():"";const s=new a({text:e.getValue(),icon:i,inverted:true,visible:e.getVisible(),state:e instanceof t?e.getState():u.Indication05,stateAnnouncementText:e instanceof t?e.getAnnouncementText():"",id:"badge"+e.getId()});if(i.length>0&&e.getValue()?.length>0){s.addStyleClass("sapFCardBadgeTextIcon")}const n=this._getCardBadgeCustomData()?.indexOf(e);this.insertAggregation("_cardBadges",s,n)};this._onCustomDataChange=function(t){const e=t.mutation,a=t.child;if(!this._isBadgeCustomData(a)){return}switch(e){case"insert":this._createBadge(a);break;case"remove":{const t=this._getCardBadgeElement(a.getId());if(t){this.removeAggregation("_cardBadges",t);t.destroy()}break}default:g.error(`Mutation ${e} is unexpected for card badge custom data.`,this);break}this._updateInvisibleCardBadgeText()};this._getCardBadgeCustomData=function(){const t=this.getCustomData().filter(function(t){return this._isBadgeCustomData(t)}.bind(this));return t};this._getCardBadges=function(){return this.getAggregation("_cardBadges")};this._getCardBadgeElement=function(t){const e=this._getCardBadges()?.find(e=>e.getId().endsWith("badge"+t));return e};this._getInvisibleCardBadgeText=function(){let t=this.getAggregation("_oInvisibleCardBadgeText");if(t){return t}t=new i({id:this.getId()+"-ariaBadgeText",text:this._getCardBadgeAccessibilityText()});this.setAggregation("_oInvisibleCardBadgeText",t);return t};this._updateInvisibleCardBadgeText=function(){this._getInvisibleCardBadgeText()?.setText(this._getCardBadgeAccessibilityText())};this._getCardBadgeAccessibilityText=function(){const t=s.getResourceBundleFor("sap.f");let e="";this._getCardBadges()?.forEach(a=>{if(a.getVisible()&&a.getStateAnnouncementText()){e+=" "+a.getStateAnnouncementText()}else if(a.getVisible()){e+=" "+t.getText("CARD_BADGE",[a.getAccessibilityInfo().description])}});return e};this._hideBadges=function(){this._getCardBadgeCustomData().forEach(a=>{if(a instanceof e){a.setVisible(false)}else if(a instanceof t&&a.getVisibilityMode()===o.Disappear){a.setVisible(false)}})};this._updateBadgeProperty=function(t,e,a){const i=this._getCardBadgeElement(t);i?.setProperty(e,a);this._updateInvisibleCardBadgeText();return this};this._isBadgeCustomData=function(a){return a instanceof t||a instanceof e};this.updateBadgeVisibility=function(t){this._updateBadgeProperty(this.getBadgeCustomData().getId(),"visible",t)};this.updateBadgeValue=function(t){this._updateBadgeProperty(this.getBadgeCustomData().getId(),"text",t)};this.updateBadgeAnimation=function(){};this.getBadgeCustomData=function(){var t=this.getCustomData().filter(function(t){return t instanceof e});return t.length?t[0]:undefined}};return c});
//# sourceMappingURL=CardBadgeEnabler.js.map