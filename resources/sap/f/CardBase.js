/*!
 * OpenUI5
 * (c) Copyright 2009-2025 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.define(["sap/ui/core/Control","sap/ui/core/InvisibleText","sap/f/CardRenderer","sap/ui/core/Lib","sap/f/cards/util/CardBadgeEnabler","sap/f/library","sap/base/Log"],function(t,e,i,r,n,a,s){"use strict";var o=3e3,d=a.cards.SemanticRole;var g=t.extend("sap.f.CardBase",{metadata:{library:"sap.f",interfaces:["sap.f.ICard","sap.m.IBadge","sap.f.IGridContainerItem"],properties:{width:{type:"sap.ui.core.CSSSize",group:"Appearance",defaultValue:"100%"},height:{type:"sap.ui.core.CSSSize",group:"Appearance",defaultValue:"auto"},semanticRole:{type:"sap.f.cards.SemanticRole",defaultValue:d.Region}},aggregations:{_cardBadges:{type:"sap.m.ObjectStatus",multiple:true,visibility:"hidden"},_oInvisibleCardBadgeText:{type:"sap.ui.core.InvisibleText",multiple:false,visibility:"hidden"}},events:{press:{}}},renderer:i});n.call(g.prototype);g.prototype.init=function(){this._oRb=r.getResourceBundleFor("sap.f");this._ariaContentText=new e({id:this.getId()+"-ariaContentText"});this._ariaContentText.setText(this._oRb.getText("ARIA_LABEL_CARD_CONTENT"));this._ariaText=new e({id:this.getId()+"-ariaText"});this._ariaText.setText(this._oRb.getText("ARIA_ROLEDESCRIPTION_CARD"));this._sGridItemRole=null;this.initCardBadgeEnablement()};g.prototype.exit=function(){this._oRb=null;if(this._ariaContentText){this._ariaContentText.destroy();this._ariaContentText=null}if(this._ariaText){this._ariaText.destroy();this._ariaText=null}this.destroyCardBadgeEnablement()};g.prototype.setAggregation=function(e,i){var r;if(e==="header"||e==="_header"){r=this.getAggregation(e);if(r){r.detachEvent("_change",this._onHeaderVisibilityChange,this)}if(i){i.attachEvent("_change",this._onHeaderVisibilityChange,this)}}return t.prototype.setAggregation.apply(this,arguments)};g.prototype._onHeaderVisibilityChange=function(t){if(t.getParameters().name==="visible"){setTimeout(function(){this.invalidate()}.bind(this),0)}};g.prototype.getCardHeader=function(){return null};g.prototype.getCardHeaderPosition=function(){return null};g.prototype.getCardContent=function(){return null};g.prototype.getFocusDomRef=function(){if(this.isRoleListItem()){return this.getDomRef()}return this.getCardHeader()?this.getCardHeader().getFocusDomRef():this.getDomRef()};g.prototype._getHeaderAggregation=function(){return this.getCardHeader()};g.prototype.onmousedown=function(){this._hideBadge()};g.prototype.onsapenter=function(){this._hideBadge()};g.prototype.onfocusin=function(){this._startBadgeHiding()};g.prototype._startBadgeHiding=function(){if(this._iHideBadgeTimeout){return}this._iHideBadgeTimeout=setTimeout(this._hideBadge.bind(this),o)};g.prototype._hideBadge=function(){const t=this._getCardBadgeCustomData();if(t?.length>0){this._hideBadges()}this._iHideBadgeTimeout=null};g.prototype._getAriaLabelledIds=function(){var t=this.getCardHeader();const e=this._getBlockingMessageAriaLabelledByIds();if(t){if(t._getTitle&&t._getTitle()){if(e){return t._getTitle().getId()+" "+e}return t._getTitle().getId()}}return this._ariaText.getId()};g.prototype._getBlockingMessageAriaLabelledByIds=function(){if(!this.getCardContent()?.getAggregation("_blockingMessage")){return""}const t=this.getCardContent().getAggregation("_blockingMessage")._getIllustratedMessage();const e=t._getTitle().sId;const i=t._getDescription()?.sId;if(t._getDescription().getText()){return e+" "+i}return e};g.prototype.ontap=function(t){if(this.isMouseInteractionDisabled()){return}this._handleTapOrSelect(t)};g.prototype.onsapselect=function(t){this._handleTapOrSelect(t)};g.prototype._handleTapOrSelect=function(t){if(!this.isInteractive()||t.isMarked()||!this.isRoleListItem()){return}if(this.getFocusDomRef()?.matches(":has(:focus-within)")){return}this.firePress({originalEvent:t});t.preventDefault()};g.prototype.getAriaRoleDescription=function(){var t=this.getCardHeader();if(t){return t.getAriaRoleDescription()}return null};g.prototype.isInteractive=function(){const t=this.hasListeners("press");if(t&&!this.isRoleListItem()){s.error("The full card cannot be interactive if the 'semanticRole' is not 'ListItem' or the control is not placed inside a sap.f.GridContainer",this)}return t};g.prototype.isMouseInteractionDisabled=function(){return false};g.prototype.setGridItemRole=function(t){this._sGridItemRole=t};g.prototype.getGridItemRole=function(){return this._sGridItemRole};g.prototype.isRoleListItem=function(){return this.getSemanticRole()===d.ListItem||this.getGridItemRole()};return g});
//# sourceMappingURL=CardBase.js.map