/*!
 * OpenUI5
 * (c) Copyright 2009-2024 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.define(["sap/ui/core/Control","sap/ui/core/InvisibleText","sap/f/CardRenderer","sap/ui/core/Lib","sap/f/cards/util/CardBadgeEnabler"],function(t,e,i,r,a){"use strict";var n=3e3;var o=t.extend("sap.f.CardBase",{metadata:{library:"sap.f",interfaces:["sap.f.ICard","sap.m.IBadge"],properties:{width:{type:"sap.ui.core.CSSSize",group:"Appearance",defaultValue:"100%"},height:{type:"sap.ui.core.CSSSize",group:"Appearance",defaultValue:"auto"}},aggregations:{_cardBadges:{type:"sap.m.ObjectStatus",multiple:true,visibility:"hidden"}}},renderer:i});a.call(o.prototype);o.prototype.init=function(){this._oRb=r.getResourceBundleFor("sap.f");this._ariaContentText=new e({id:this.getId()+"-ariaContentText"});this._ariaContentText.setText(this._oRb.getText("ARIA_LABEL_CARD_CONTENT"));this._ariaText=new e({id:this.getId()+"-ariaText"});this._ariaText.setText(this._oRb.getText("ARIA_ROLEDESCRIPTION_CARD"));this.initCardBadgeEnablement()};o.prototype.exit=function(){this._oRb=null;if(this._ariaContentText){this._ariaContentText.destroy();this._ariaContentText=null}if(this._ariaText){this._ariaText.destroy();this._ariaText=null}};o.prototype.setAggregation=function(e,i){var r;if(e==="header"||e==="_header"){r=this.getAggregation(e);if(r){r.detachEvent("_change",this._onHeaderVisibilityChange,this)}if(i){i.attachEvent("_change",this._onHeaderVisibilityChange,this)}}return t.prototype.setAggregation.apply(this,arguments)};o.prototype._onHeaderVisibilityChange=function(t){if(t.getParameters().name==="visible"){setTimeout(function(){this.invalidate()}.bind(this),0)}};o.prototype.getCardHeader=function(){return null};o.prototype.getCardHeaderPosition=function(){return null};o.prototype.getCardContent=function(){return null};o.prototype.getFocusDomRef=function(){return this.getCardHeader()?this.getCardHeader().getFocusDomRef():this.getDomRef()};o.prototype.onmousedown=function(){this._hideBadge()};o.prototype.onsapenter=function(){this._hideBadge()};o.prototype.onfocusin=function(){this._startBadgeHiding()};o.prototype._startBadgeHiding=function(){if(this._iHideBadgeTimeout){return}this._iHideBadgeTimeout=setTimeout(this._hideBadge.bind(this),n)};o.prototype._hideBadge=function(){const t=this._getCardBadgeCustomData();if(t?.length>0){this._hideBadges()}this._iHideBadgeTimeout=null};o.prototype._getAriaLabelledIds=function(){var t=this.getCardHeader();const e=this._getBlockingMessageAriaLabelledByIds();if(t){if(this._isInsideGridContainer()){if(e){return t._getAriaLabelledBy()+" "+e}return t._getAriaLabelledBy()}if(t._getTitle&&t._getTitle()){if(e){return t._getTitle().getId()+" "+e}return t._getTitle().getId()}}return this._ariaText.getId()};o.prototype._getBlockingMessageAriaLabelledByIds=function(){if(!this.getCardContent()?.getAggregation("_blockingMessage")){return""}const t=this.getCardContent().getAggregation("_blockingMessage")._getIllustratedMessage();const e=t._getTitle().sId;const i=t._getDescription()?.sId;if(t._getDescription().getText()){return e+" "+i}return e};o.prototype._isInsideGridContainer=function(){var t=this.getParent();return t&&t.isA("sap.f.GridContainer")};o.prototype.getAriaRoleDescription=function(){var t=this.getCardHeader();if(t){return t.getAriaRoleDescription()}return null};return o});
//# sourceMappingURL=CardBase.js.map