/*!
 * OpenUI5
 * (c) Copyright 2009-2024 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.define(["sap/ui/core/Control","sap/ui/core/InvisibleText","sap/f/CardRenderer","sap/ui/core/Lib","sap/f/cards/util/CardBadgeEnabler"],function(e,t,i,a,r){"use strict";var n=3e3;var o=e.extend("sap.f.CardBase",{metadata:{library:"sap.f",interfaces:["sap.f.ICard","sap.m.IBadge"],properties:{width:{type:"sap.ui.core.CSSSize",group:"Appearance",defaultValue:"100%"},height:{type:"sap.ui.core.CSSSize",group:"Appearance",defaultValue:"auto"}},aggregations:{_cardBadges:{type:"sap.m.ObjectStatus",multiple:true,visibility:"hidden"},_oInvisibleCardBadgeText:{type:"sap.ui.core.InvisibleText",multiple:false,visibility:"hidden"}}},renderer:i});r.call(o.prototype);o.prototype.init=function(){this._oRb=a.getResourceBundleFor("sap.f");this._ariaContentText=new t({id:this.getId()+"-ariaContentText"});this._ariaContentText.setText(this._oRb.getText("ARIA_LABEL_CARD_CONTENT"));this._ariaText=new t({id:this.getId()+"-ariaText"});this._ariaText.setText(this._oRb.getText("ARIA_ROLEDESCRIPTION_CARD"));this.initCardBadgeEnablement()};o.prototype.exit=function(){this._oRb=null;if(this._ariaContentText){this._ariaContentText.destroy();this._ariaContentText=null}if(this._ariaText){this._ariaText.destroy();this._ariaText=null}this.destroyCardBadgeEnablement()};o.prototype.setAggregation=function(t,i){var a;if(t==="header"||t==="_header"){a=this.getAggregation(t);if(a){a.detachEvent("_change",this._onHeaderVisibilityChange,this)}if(i){i.attachEvent("_change",this._onHeaderVisibilityChange,this)}}return e.prototype.setAggregation.apply(this,arguments)};o.prototype._onHeaderVisibilityChange=function(e){if(e.getParameters().name==="visible"){setTimeout(function(){this.invalidate()}.bind(this),0)}};o.prototype.getCardHeader=function(){return null};o.prototype.getCardHeaderPosition=function(){return null};o.prototype.getCardContent=function(){return null};o.prototype.getFocusDomRef=function(){return this.getCardHeader()?this.getCardHeader().getFocusDomRef():this.getDomRef()};o.prototype.onmousedown=function(){this._hideBadge()};o.prototype.onsapenter=function(){this._hideBadge()};o.prototype.onfocusin=function(){this._startBadgeHiding()};o.prototype._startBadgeHiding=function(){if(this._iHideBadgeTimeout){return}this._iHideBadgeTimeout=setTimeout(this._hideBadge.bind(this),n)};o.prototype._hideBadge=function(){const e=this._getCardBadgeCustomData();if(e?.length>0){this._hideBadges()}this._iHideBadgeTimeout=null};o.prototype._getAriaLabelledIds=function(){var e=this.getCardHeader();const t=this._getBlockingMessageAriaLabelledByIds();if(e){if(this._isInsideGridContainer()){if(t){return e._getAriaLabelledBy()+" "+t}return e._getAriaLabelledBy()}if(e._getTitle&&e._getTitle()){if(t){return e._getTitle().getId()+" "+t}return e._getTitle().getId()}}return this._ariaText.getId()};o.prototype._getBlockingMessageAriaLabelledByIds=function(){if(!this.getCardContent()?.getAggregation("_blockingMessage")){return""}const e=this.getCardContent().getAggregation("_blockingMessage")._getIllustratedMessage();const t=e._getTitle().sId;const i=e._getDescription()?.sId;if(e._getDescription().getText()){return t+" "+i}return t};o.prototype._isInsideGridContainer=function(){var e=this.getParent();return e&&e.isA("sap.f.GridContainer")};o.prototype.getAriaRoleDescription=function(){var e=this.getCardHeader();if(e){return e.getAriaRoleDescription()}return null};return o});
//# sourceMappingURL=CardBase.js.map