/*!
 * OpenUI5
 * (c) Copyright 2009-2024 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.define(["sap/ui/core/Element","sap/ui/core/util/reflection/JsControlTreeModifier","sap/base/Log"],function(e,t,r){"use strict";var n={};n.applyChange=function(e,t,r){var n=r.modifier;var o=r.view;var a=r.appComponent;var i=e.getTexts();var l=e.getContent();var d=l.elementSelector||l.sRenameId;var v=n.bySelector(d,a,o);if(i&&i.formText&&this._isProvided(i.formText.value)){if(!t){return Promise.reject(new Error("no Control provided for renaming"))}return n.getPropertyBindingOrProperty(v,"text").then(function(t){e.setRevertData(t);var r=i.formText.value;n.setPropertyBindingOrProperty(v,"text",r)})}else{return Promise.resolve()}};n.revertChange=function(e,t,n){var o=e.getRevertData();var a=n.appComponent;var i=e.getContent();var l=n.view;var d=n.modifier;var v=i.elementSelector||i.sRenameId;var f=d.bySelector(v,a,l);if(o||o===""){d.setPropertyBindingOrProperty(f,"text",o);f.getParent().invalidate();e.resetRevertData()}else{r.error("Change doesn't contain sufficient information to be reverted. Most Likely the Change didn't go through applyChange.")}};n.completeChangeContent=function(r,n,o){var a={};if(!n.changeType){throw new Error("oSpecificChangeInfo.changeType attribute required")}if(n.renamedElement&&n.renamedElement.id){var i=e.getElementById(n.renamedElement.id);var l;if(n.changeType==="renameLabel"){l=i.getLabel()}else if(n.changeType==="renameTitle"){l=i.getTitle()}a.elementSelector=t.getSelector(l,o.appComponent);r.addDependentControl(l,"elementSelector",o)}else{throw new Error("oSpecificChangeInfo.renamedElement attribute required")}if(this._isProvided(n.value)){r.setText("formText",n.value,"XFLD")}else{throw new Error("oSpecificChangeInfo.value attribute required")}r.setContent(a)};n._isProvided=function(e){return typeof e==="string"};n.getChangeVisualizationInfo=function(e,r){var n=e.getContent().elementSelector;var o=t.bySelector(n,r).getParent().getId();return{affectedControls:[o],updateRequired:true,descriptionPayload:{originalLabel:e.getRevertData(),newLabel:e.getTexts().formText.value}}};return n},true);
//# sourceMappingURL=RenameSimpleForm.js.map