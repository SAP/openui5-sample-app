/*!
 * OpenUI5
 * (c) Copyright 2025 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.define(["sap/ui/fl/changeHandler/BaseAddViaDelegate","sap/ui/core/util/reflection/JsControlTreeModifier"],function(e,t){"use strict";var r="sap.ui.core.Title";var n="sap.m.Toolbar";var a="sap.m.Label";var o="sap.ui.comp.smartfield.SmartLabel";function i(e,t){var i=t.change;var l=t.modifier;var g=i.getContent();var c=g.newFieldIndex;var d=i.getDependentControl("targetContainerHeader",t);var v=e.indexOf(d);var s=0;var f=0;if(e.length===1||e.length===v+1){s=e.length}else{var u=0;for(u=v+1;u<e.length;u++){var p=l.getControlType(e[u]);if(p===a||p===o){if(f===c){s=u;break}f++}if(p===r||p===n){s=u;break}if(u===e.length-1){s=e.length}}}return s}function l(e,t,r){var n=e.slice();n.splice(t,0,r.label,r.control);return n}var g=e.createAddViaDelegateChangeHandler({addProperty:function(e){var t=e.control;var r=e.innerControls;var n=e.modifier;var a=e.appComponent;var o;var g;var c;var d=e.change;var v=d.getRevertData();v.labelSelector=n.getSelector(r.label,a);d.setRevertData(v);return Promise.resolve().then(n.getAggregation.bind(n,t,"content")).then(function(a){o=a;g=i(o,e);c=l(o,g,r);return n.replaceAllAggregation(t,"content",c)}).then(function(){if(r.valueHelp){return n.insertAggregation(t,"dependents",r.valueHelp,0,e.view)}return undefined})},revertAdditionalControls:function(e){var t=e.control;var r=e.change;var n=e.modifier;var a=e.appComponent;var o=r.getRevertData().labelSelector;if(o){var i=n.bySelector(o,a);return Promise.resolve().then(n.removeAggregation.bind(n,t,"content",i)).then(n.destroy.bind(n,i))}return Promise.resolve()},aggregationName:"content",mapParentIdIntoChange:function(e,t,r){var n=r.appComponent;var a=r.view;var o=r.modifier.bySelector(t.parentId,n,a);var i=o.getTitle()||o.getToolbar();if(i){e.addDependentControl(i.getId(),"targetContainerHeader",r)}},parentAlias:"_",fieldSuffix:"",skipCreateLayout:true});g.getChangeVisualizationInfo=function(e,r){const n=e.getSelector();const a=t.bySelector(n,r);const o=e.getRevertData();const i={updateRequired:true};if(o&&o.labelSelector){const e=t.bySelector(o.labelSelector,r);i.affectedControls=[e.getParent().getId()];if(!e.getVisible()){i.displayControls=[a]}}else{const n=t.bySelector(e.getContent().elementSelector,r);i.affectedControls=[e.getContent().newFieldSelector];if(!n.getVisible()){i.displayControls=[a]}}return i};g.getCondenserInfo=function(){return undefined};return g},true);
//# sourceMappingURL=AddSimpleFormField.js.map