/*!
 * OpenUI5
 * (c) Copyright 2009-2024 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.define(["sap/ui/fl/changeHandler/BaseAddViaDelegate","sap/ui/core/util/reflection/JsControlTreeModifier"],function(e,r){"use strict";var t="sap.ui.core.Title";var n="sap.m.Toolbar";var a="sap.m.Label";var o="sap.ui.comp.smartfield.SmartLabel";function i(e,r){var i=r.change;var l=r.modifier;var v=i.getContent();var g=v.newFieldIndex;var d=i.getDependentControl("targetContainerHeader",r);var c=e.indexOf(d);var f=0;var u=0;if(e.length===1||e.length===c+1){f=e.length}else{var s=0;for(s=c+1;s<e.length;s++){var p=l.getControlType(e[s]);if(p===a||p===o){if(u===g){f=s;break}u++}if(p===t||p===n){f=s;break}if(s===e.length-1){f=e.length}}}return f}function l(e,r,t){var n=e.slice();n.splice(r,0,t.label,t.control);return n}var v=e.createAddViaDelegateChangeHandler({addProperty:function(e){var r=e.control;var t=e.innerControls;var n=e.modifier;var a=e.appComponent;var o;var v;var g;var d=e.change;var c=d.getRevertData();c.labelSelector=n.getSelector(t.label,a);d.setRevertData(c);return Promise.resolve().then(n.getAggregation.bind(n,r,"content")).then(function(a){o=a;v=i(o,e);g=l(o,v,t);return n.replaceAllAggregation(r,"content",g)}).then(function(){if(t.valueHelp){return n.insertAggregation(r,"dependents",t.valueHelp,0,e.view)}return undefined})},revertAdditionalControls:function(e){var r=e.control;var t=e.change;var n=e.modifier;var a=e.appComponent;var o=t.getRevertData().labelSelector;if(o){var i=n.bySelector(o,a);return Promise.resolve().then(n.removeAggregation.bind(n,r,"content",i)).then(n.destroy.bind(n,i))}return Promise.resolve()},aggregationName:"content",mapParentIdIntoChange:function(e,r,t){var n=t.appComponent;var a=t.view;var o=t.modifier.bySelector(r.parentId,n,a);var i=o.getTitle()||o.getToolbar();if(i){e.addDependentControl(i.getId(),"targetContainerHeader",t)}},parentAlias:"_",fieldSuffix:"",skipCreateLayout:true});v.getChangeVisualizationInfo=function(e,t){var n=e.getRevertData();if(n&&n.labelSelector){return{affectedControls:[r.bySelector(n.labelSelector,t).getParent().getId()],updateRequired:true}}return{affectedControls:[e.getContent().newFieldSelector]}};v.getCondenserInfo=function(){return undefined};return v},true);
//# sourceMappingURL=AddSimpleFormField.js.map