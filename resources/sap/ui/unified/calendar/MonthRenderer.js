/*!
 * OpenUI5
 * (c) Copyright 2009-2024 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.define(["sap/ui/core/Element","sap/ui/core/Lib","sap/ui/unified/calendar/CalendarUtils","sap/ui/unified/calendar/CalendarDate","sap/ui/unified/CalendarLegend","sap/ui/unified/CalendarLegendRenderer","sap/ui/core/library","sap/ui/unified/library","sap/base/Log","sap/ui/core/InvisibleText","sap/ui/core/date/UI5Date","sap/ui/core/Configuration","sap/ui/core/date/CalendarUtils","sap/ui/core/Locale"],function(e,a,t,i,r,n,s,l,d,o,c,p,g,y){"use strict";var f=l.CalendarDayType;var u=s.CalendarType;var D={apiVersion:2};D.render=function(e,t){var i=this.getStartDate(t),r=t.getTooltip_AsString(),n=a.getResourceBundleFor("sap.ui.unified"),s=t.getId(),l={value:"",append:!t._bCalendar},d="",c=t.getWidth();e.openStart("div",t);this.getClass(e,t).forEach(function(a){e.class(a)});if(t._getSecondaryCalendarType()){e.class("sapUiCalMonthSecType")}this.addWrapperAdditionalStyles(e,t);if(r){e.attr("title",r)}if(t._getShowHeader()){l.value=s+"-Head"}if(t._bCalendar){d=o.getStaticId("sap.ui.unified","CALENDAR_MONTH_PICKER_OPEN_HINT")+" "+o.getStaticId("sap.ui.unified","CALENDAR_YEAR_PICKER_OPEN_HINT")}if(c){e.style("width",c)}e.accessibilityState(t,{role:"grid",roledescription:t._bCalendar?"":n.getText("CALENDAR_DIALOG"),multiselectable:!t.getSingleSelection()||t.getIntervalSelection(),labelledby:l,describedby:d});e.openEnd();if(t.getIntervalSelection()){e.openStart("span",s+"-Start");e.style("display","none");e.openEnd();e.text(n.getText("CALENDAR_START_DATE"));e.close("span");e.openStart("span",s+"-End");e.style("display","none");e.openEnd();e.text(n.getText("CALENDAR_END_DATE"));e.close("span")}this.renderMonth(e,t,i);e.close("div")};D.addWrapperAdditionalStyles=function(){};D.getStartDate=function(e){return e._getDate()};D.getClass=function(e,a){var t=["sapUiCalMonthView"],i=a.getPrimaryCalendarType(),r=a.getShowWeekNumbers();if(i===u.Islamic||!r){t.push("sapUiCalNoWeekNum")}return t};D.renderMonth=function(e,a,t){this.renderHeader(e,a,t);this.renderDays(e,a,t)};D.renderHeader=function(e,a,t){var i=a._getLocaleData();var r=a._getFirstDayOfWeek();this.renderHeaderLine(e,a,i,t);e.openStart("div");e.accessibilityState(null,{role:"row"});e.style("overflow","hidden");e.openEnd();this.renderDayNames(e,a,i,r,7,true,undefined);e.close("div")};D.renderHeaderLine=function(e,a,i,r){t._checkCalendarDate(r);if(a._getShowHeader()){var n=a.getId();var s=a.getPrimaryCalendarType();var l=i.getMonthsStandAlone("wide",s);e.openStart("div",n+"-Head");e.class("sapUiCalHeadText");e.openEnd();e.text(l[r.getMonth()]);e.close("div")}};D.renderDayNames=function(e,a,t,i,r,n,s){var l=a._getFirstDayOfWeek();var d=a.getId();var o="";var c=a.getPrimaryCalendarType();var p=[];if(a._bLongWeekDays||!a._bNamesLengthChecked){p=t.getDaysStandAlone("abbreviated",c)}else{p=t.getDaysStandAlone("narrow",c)}var g=t.getDaysStandAlone("wide",c);if(a.getShowWeekNumbers()&&c!==u.Islamic){this.renderDummyCell(e,"sapUiCalWH",true,"columnheader")}for(var y=0;y<r;y++){if(n){o=d+"-WH"+(y+l)%7}else{o=d+"-WH"+y}e.openStart("div",o);e.class("sapUiCalWH");if(y===0){e.class("sapUiCalFirstWDay")}if(s){e.style("width",s)}e.accessibilityState(null,{role:"columnheader",label:g[(y+i)%7]});e.openEnd();e.text(p[(y+i)%7]);e.close("div")}};D.renderDays=function(e,a,i){var r,n,s,l,d,o,c;t._checkCalendarDate(i);if(!i){i=a._getFocusedDate()}o=i.toUTCJSDate().getTime();if(!o&&o!==0){throw new Error("Date is invalid "+a)}l=this.getDayHelper(a,i);n=a._getVisibleDays(i,true);c=a.getShowWeekNumbers();r=a.getPrimaryCalendarType()!==u.Islamic&&c;s=n.length;for(d=0;d<s;d++){if(d%7===0){e.openStart("div");e.attr("role","row");e.openEnd();if(r){this._renderWeekNumber(e,n[d],l,a)}}this.renderDay(e,a,n[d],l,true,r,-1);if(d%7===6||d===s-1){e.close("div")}}if(s===28){this.renderDummyCell(e,"sapUiCalItem",false,"")}};D.renderDummyCell=function(e,t,i,r){e.openStart("div");e.class(t);e.class("sapUiCalDummy");e.style("visibility",i?"visible":"hidden");e.attr("role",r);e.attr("aria-label",a.getResourceBundleFor("sap.ui.unified").getText("CALENDAR_WEEK"));e.openEnd();e.close("div")};D.getDayHelper=function(a,t){var n,s,l=a._getLocaleData(),o={sLocale:a._getLocale(),oLocaleData:l,iMonth:t.getMonth(),iYear:t.getYear(),iFirstDayOfWeek:a._getFirstDayOfWeek(),iWeekendStart:l.getWeekendStart(),iWeekendEnd:l.getWeekendEnd(),aNonWorkingDays:a._getNonWorkingDays()||[],sToday:l.getRelativeDay(0),oToday:i.fromLocalJSDate(c.getInstance(),a.getPrimaryCalendarType()),sId:a.getId(),oFormatLong:a._getFormatLong(),sPrimaryCalendarType:a.getPrimaryCalendarType(),sSecondaryCalendarType:a._getSecondaryCalendarType(),oLegend:undefined};s=a.getLegend();if(s&&typeof s==="string"){n=e.getElementById(s);if(n){if(!(n instanceof r)){throw new Error(n+" is not an sap.ui.unified.CalendarLegend. "+a)}o.oLegend=n}else{d.warning("CalendarLegend "+s+" does not exist!",a)}}return o};D.renderDay=function(e,r,s,l,d,o,c,p,u){t._checkCalendarDate(s);var D=new i(s,l.sSecondaryCalendarType),C={role:r._getAriaRole(),selected:false,label:"",describedby:r._getDayDescription()},b=s._bBeforeFirstYear,m="",S=l.oLegend;var h=r._oFormatYyyymmdd.format(s.toUTCJSDate(),true);var _=s.getDay();var v=r._checkDateSelected(s);var W=r._getDateTypes(s);var E=l&&l.oLegend?l.oLegend._getSpecialDateTypeFilter():"";var I=r._checkDateEnabled(s);var T=r._isSpecialDateMarkerEnabled(s);const k=W.length>0&&W[0].type;const N=W.length>0&&W[0].secondaryType;const L=l.aNonWorkingDays.length?l.aNonWorkingDays.some(e=>s.getDay()===e):t._isWeekend(s,r._getLocaleData());const U=k!==f.Working&&N!==f.Working&&L;const A=k===f.NonWorking||N===f.NonWorking||U;if(b){I=false}e.openStart("div",l.sId+"-"+h);e.class("sapUiCalItem");e.class("sapUiCalWDay"+_);if(p){e.style("width",p)}if(_===l.iFirstDayOfWeek){e.class("sapUiCalFirstWDay")}if(d&&l.iMonth!==s.getMonth()){e.class("sapUiCalItemOtherMonth");C["disabled"]=true}if(s.isSame(l.oToday)){e.class("sapUiCalItemNow");C["label"]=l.sToday+" "}if(v>0){e.class("sapUiCalItemSel");C["selected"]=true}else{C["selected"]=false}if(v===2){e.class("sapUiCalItemSelStart");C["describedby"]=C["describedby"]+" "+l.sId+"-Start"}else if(v===3){e.class("sapUiCalItemSelEnd");C["describedby"]=C["describedby"]+" "+l.sId+"-End"}else if(v===4){e.class("sapUiCalItemSelBetween")}else if(v===5){e.class("sapUiCalItemSelStart");e.class("sapUiCalItemSelEnd");C["describedby"]=C["describedby"]+" "+l.sId+"-Start";C["describedby"]=C["describedby"]+" "+l.sId+"-End"}if(this.renderWeekNumbers&&r._oDate){const e=g.getWeekConfigurationValues(r.getCalendarWeekNumbering(),new y(r._getLocale()));e.firstDayOfWeek=r._getFirstDayOfWeek();const a=i.fromUTCDate(t.getFirstDateOfWeek(s.toLocalJSDate(),e),r.getPrimaryCalendarType());C["describedby"]=C["describedby"]+" "+r.getId()+"-week-"+r._calculateWeekNumber(a)+"-text"}if(A){e.class("sapUiCalItemWeekEnd");C["label"]+=a.getResourceBundleFor("sap.ui.unified").getText("LEGEND_NON_WORKING_DAY")+" "}if(T){W.forEach(function(a,t){if(a.type!==f.None){if(E===""||E===f.None||E===a.type){if(t===0){e.class("sapUiCalItem"+a.type)}m=a.type;if(a.tooltip){e.attr("title",a.tooltip)}}}})}if((r.getParent()&&r.getParent().getMetadata().getName()==="sap.ui.unified.CalendarOneMonthInterval"||r.getMetadata().getName()==="sap.ui.unified.calendar.OneMonthDatesRow")&&r.getStartDate()&&l.iMonth!==s.getMonth()){e.class("sapUiCalItemOtherMonth")}if(!I){e.class("sapUiCalItemDsbl");C["disabled"]=true}e.attr("tabindex","-1");e.attr("data-sap-day",h);if(u){C["label"]=C["label"]+l.aWeekDaysWide[_]+" "}C["label"]=C["label"]+l.oFormatLong.format(s.toUTCJSDate(),true);if(m!==""){n.addCalendarTypeAccInfo(C,m,S)}if(l.sSecondaryCalendarType){C["label"]=C["label"]+" "+r._oFormatSecondaryLong.format(D.toUTCJSDate(),true)}e.accessibilityState(null,C);e.openEnd();if(W[0]&&T){e.openStart("div");e.class("sapUiCalSpecialDate");if(W[0].color&&(E===""||E===f.None)){e.style("background-color",W[0].color)}e.openEnd();e.close("div")}e.openStart("span");e.class("sapUiCalItemText");if(W[0]&&W[0].color){e.class("sapUiCalItemTextCustomColor")}e.openEnd();if(!b){e.text(s.getDate())}e.close("span");if(u){e.openStart("span");e.class("sapUiCalDayName");e.openEnd();e.text(l.aWeekDays[_]);e.close("span")}if(l.sSecondaryCalendarType){e.openStart("span");e.class("sapUiCalItemSecText");e.openEnd();e.text(D.getDate());e.close("span")}e.close("div")};D._renderWeekNumber=function(e,a,t,i){var r=i._calculateWeekNumber(a);var n=t.sId+"-WNum-"+r;e.openStart("div",n);e.class("sapUiCalWeekNum");e.accessibilityState(null,{role:"rowheader",labelledby:o.getStaticId("sap.ui.unified","CALENDAR_WEEK")+" "+n});e.openEnd();e.text(r);e.close("div")};return D},true);
//# sourceMappingURL=MonthRenderer.js.map