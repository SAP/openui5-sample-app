/*!
 * OpenUI5
 * (c) Copyright 2009-2024 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.define(["sap/ui/core/Element","sap/ui/core/Lib","sap/ui/unified/calendar/CalendarUtils","sap/ui/unified/calendar/CalendarDate","sap/ui/unified/CalendarLegend","sap/ui/unified/CalendarLegendRenderer","sap/ui/core/library","sap/ui/unified/library","sap/base/Log","sap/ui/core/InvisibleText","sap/ui/core/date/UI5Date","sap/ui/core/date/CalendarUtils","sap/ui/core/Locale"],function(e,a,t,i,r,n,s,l,o,d,c,p,g){"use strict";var y=l.CalendarDayType;var u=s.CalendarType;var f={apiVersion:2};f.render=function(e,t){var i=this.getStartDate(t),r=t.getTooltip_AsString(),n=a.getResourceBundleFor("sap.ui.unified"),s=t.getId(),l={value:"",append:!t._bCalendar},o="",c=t.getWidth();e.openStart("div",t);this.getClass(e,t).forEach(function(a){e.class(a)});if(t._getSecondaryCalendarType()){e.class("sapUiCalMonthSecType")}this.addWrapperAdditionalStyles(e,t);if(r){e.attr("title",r)}if(t._getShowHeader()){l.value=s+"-Head"}if(t._bCalendar){o=d.getStaticId("sap.ui.unified","CALENDAR_MONTH_PICKER_OPEN_HINT")+" "+d.getStaticId("sap.ui.unified","CALENDAR_YEAR_PICKER_OPEN_HINT")}if(c){e.style("width",c)}e.accessibilityState(t,{role:"grid",roledescription:t._bCalendar?"":n.getText("CALENDAR_DIALOG"),multiselectable:!t.getSingleSelection()||t.getIntervalSelection(),labelledby:l,describedby:o});e.openEnd();if(t.getIntervalSelection()){e.openStart("span",s+"-Start");e.style("display","none");e.openEnd();e.text(n.getText("CALENDAR_START_DATE"));e.close("span");e.openStart("span",s+"-End");e.style("display","none");e.openEnd();e.text(n.getText("CALENDAR_END_DATE"));e.close("span")}this.renderMonth(e,t,i);e.close("div")};f.addWrapperAdditionalStyles=function(){};f.getStartDate=function(e){return e._getDate()};f.getClass=function(e,a){var t=["sapUiCalMonthView"],i=a.getPrimaryCalendarType(),r=a.getShowWeekNumbers();if(i===u.Islamic||!r){t.push("sapUiCalNoWeekNum")}return t};f.renderMonth=function(e,a,t){this.renderHeader(e,a,t);this.renderDays(e,a,t)};f.renderHeader=function(e,a,t){var i=a._getLocaleData();var r=a._getFirstDayOfWeek();this.renderHeaderLine(e,a,i,t);e.openStart("div");e.accessibilityState(null,{role:"row"});e.style("overflow","hidden");e.openEnd();this.renderDayNames(e,a,i,r,7,true,undefined);e.close("div")};f.renderHeaderLine=function(e,a,i,r){t._checkCalendarDate(r);if(a._getShowHeader()){var n=a.getId();var s=a.getPrimaryCalendarType();var l=i.getMonthsStandAlone("wide",s);e.openStart("div",n+"-Head");e.class("sapUiCalHeadText");e.openEnd();e.text(l[r.getMonth()]);e.close("div")}};f.renderDayNames=function(e,a,t,i,r,n,s){var l=a._getFirstDayOfWeek();var o=a.getId();var d="";var c=a.getPrimaryCalendarType();var p=[];if(a._bLongWeekDays||!a._bNamesLengthChecked){p=t.getDaysStandAlone("abbreviated",c)}else{p=t.getDaysStandAlone("narrow",c)}var g=t.getDaysStandAlone("wide",c);if(a.getShowWeekNumbers()&&c!==u.Islamic){this.renderDummyCell(e,"sapUiCalWH",true,"columnheader")}for(var y=0;y<r;y++){if(n){d=o+"-WH"+(y+l)%7}else{d=o+"-WH"+y}e.openStart("div",d);e.class("sapUiCalWH");if(y===0){e.class("sapUiCalFirstWDay")}if(s){e.style("width",s)}e.accessibilityState(null,{role:"columnheader",label:g[(y+i)%7]});e.openEnd();e.text(p[(y+i)%7]);e.close("div")}};f.renderDays=function(e,a,i){var r,n,s,l,o,d,c;t._checkCalendarDate(i);if(!i){i=a._getFocusedDate()}d=i.toUTCJSDate().getTime();if(!d&&d!==0){throw new Error("Date is invalid "+a)}l=this.getDayHelper(a,i);n=a._getVisibleDays(i,true);c=a.getShowWeekNumbers();r=a.getPrimaryCalendarType()!==u.Islamic&&c;s=n.length;for(o=0;o<s;o++){if(o%7===0){e.openStart("div");e.attr("role","row");e.openEnd();if(r){this._renderWeekNumber(e,n[o],l,a)}}this.renderDay(e,a,n[o],l,true,r,-1);if(o%7===6||o===s-1){e.close("div")}}if(s===28){this.renderDummyCell(e,"sapUiCalItem",false,"")}};f.renderDummyCell=function(e,t,i,r){e.openStart("div");e.class(t);e.class("sapUiCalDummy");e.style("visibility",i?"visible":"hidden");e.attr("role",r);e.attr("aria-label",a.getResourceBundleFor("sap.ui.unified").getText("CALENDAR_WEEK"));e.openEnd();e.close("div")};f.isTypeAttributeRequired=function(e,a,t,i){const r=i.color?.toLowerCase();if(e){return t===r&&a===i.type}return a===""||a===y.None||a===i.type};f.isColorAttributeRequired=function(e,a,t,i,r){const n=e&&!a;const s=e===t&&i===r[0].type;const l=e===t&&(!i||i===y.None);if(n){return true}return s||l};f.getDayHelper=function(a,t){var n,s,l=a._getLocaleData(),d={sLocale:a._getLocale(),oLocaleData:l,iMonth:t.getMonth(),iYear:t.getYear(),iFirstDayOfWeek:a._getFirstDayOfWeek(),iWeekendStart:l.getWeekendStart(),iWeekendEnd:l.getWeekendEnd(),aNonWorkingDays:a._getNonWorkingDays()||[],sToday:l.getRelativeDay(0),oToday:i.fromLocalJSDate(c.getInstance(),a.getPrimaryCalendarType()),sId:a.getId(),oFormatLong:a._getFormatLong(),sPrimaryCalendarType:a.getPrimaryCalendarType(),sSecondaryCalendarType:a._getSecondaryCalendarType(),oLegend:undefined};s=a.getLegend();if(s&&typeof s==="string"){n=e.getElementById(s);if(n){if(!(n instanceof r)){throw new Error(n+" is not an sap.ui.unified.CalendarLegend. "+a)}d.oLegend=n}else{o.warning("CalendarLegend "+s+" does not exist!",a)}}return d};f.renderDay=function(e,a,r,s,l,o,d,c,u){t._checkCalendarDate(r);var f=new i(r,s.sSecondaryCalendarType),C={role:a._getAriaRole(),selected:false,label:"",describedby:a._getDayDescription()},D=r._bBeforeFirstYear,b="",S=s.oLegend;var m=a._oFormatYyyymmdd.format(r.toUTCJSDate(),true);var h=r.getDay();var _=a._checkDateSelected(r);var v=a._getDateTypes(r);var E=s&&s.oLegend?s.oLegend._getSpecialDateTypeFilter():"";var T=s?.oLegend?s.oLegend._getSpecialDateColorFilter().toLowerCase():"";var W=a._checkDateEnabled(r);var I=a._isSpecialDateMarkerEnabled(r);const N=v.length>0&&v[0].type;const k=v.length>0&&v[0].secondaryType;const L=s.aNonWorkingDays.length?s.aNonWorkingDays.some(e=>r.getDay()===e):t._isWeekend(r,a._getLocaleData());const U=N!==y.Working&&k!==y.Working&&L;const A=N===y.NonWorking||k===y.NonWorking||U;const w=!!(E||T)&&(E!==y.None||T);const R=a._oUnifiedRB.getText("LEGEND_NON_WORKING_DAY");const x=[];if(D){W=false}e.openStart("div",s.sId+"-"+m);e.class("sapUiCalItem");e.class("sapUiCalWDay"+h);if(c){e.style("width",c)}if(h===s.iFirstDayOfWeek){e.class("sapUiCalFirstWDay")}if(l&&s.iMonth!==r.getMonth()){e.class("sapUiCalItemOtherMonth");C["disabled"]=true}if(r.isSame(s.oToday)){e.class("sapUiCalItemNow");x.push(a._oUnifiedRB.getText("LEGEND_TODAY"))}if(_>0){e.class("sapUiCalItemSel");C["selected"]=true}else{C["selected"]=false}if(_===2){e.class("sapUiCalItemSelStart");C["describedby"]=C["describedby"]+" "+s.sId+"-Start"}else if(_===3){e.class("sapUiCalItemSelEnd");C["describedby"]=C["describedby"]+" "+s.sId+"-End"}else if(_===4){e.class("sapUiCalItemSelBetween")}else if(_===5){e.class("sapUiCalItemSelStart");e.class("sapUiCalItemSelEnd");C["describedby"]=C["describedby"]+" "+s.sId+"-Start";C["describedby"]=C["describedby"]+" "+s.sId+"-End"}if(this.renderWeekNumbers&&a._oDate){const e=p.getWeekConfigurationValues(a.getCalendarWeekNumbering(),new g(a._getLocale()));e.firstDayOfWeek=a._getFirstDayOfWeek();const n=i.fromUTCDate(t.getFirstDateOfWeek(r.toLocalJSDate(),e),a.getPrimaryCalendarType());C["describedby"]=C["describedby"]+" "+a.getId()+"-week-"+a._calculateWeekNumber(n)+"-text"}if(A){e.class("sapUiCalItemWeekEnd");x.push(R)}if(I){const a=this;v.forEach(function(t,i){if(t.type!==y.None){if(a.isTypeAttributeRequired(w,E,T,t)){if(i===0){e.class("sapUiCalItem"+t.type)}b=t.type;if(t.tooltip){x.push(t.tooltip)}}}})}if(x.length){const a=x.filter((e,a)=>x.indexOf(e)===a);e.attr("title",a.join(" "))}if((a.getParent()&&a.getParent().getMetadata().getName()==="sap.ui.unified.CalendarOneMonthInterval"||a.getMetadata().getName()==="sap.ui.unified.calendar.OneMonthDatesRow")&&a.getStartDate()&&s.iMonth!==r.getMonth()){e.class("sapUiCalItemOtherMonth")}if(!W){e.class("sapUiCalItemDsbl");C["disabled"]=true}e.attr("tabindex","-1");e.attr("data-sap-day",m);if(u){C["label"]=C["label"]+s.aWeekDaysWide[h]+" "}C["label"]=C["label"]+s.oFormatLong.format(r.toUTCJSDate(),true);if(b!==""){n.addCalendarTypeAccInfo(C,b,S)}if(s.sSecondaryCalendarType){C["label"]=C["label"]+" "+a._oFormatSecondaryLong.format(f.toUTCJSDate(),true)}e.accessibilityState(null,C);e.openEnd();if(v[0]&&I){e.openStart("div");e.class("sapUiCalSpecialDate");const a=v[0].color?.toLowerCase();if(this.isColorAttributeRequired(a,w,T,E,v)){e.style("background-color",a)}e.openEnd();e.close("div")}e.openStart("span");e.class("sapUiCalItemText");if(v[0]&&v[0].color){e.class("sapUiCalItemTextCustomColor")}e.openEnd();if(!D){e.text(r.getDate())}e.close("span");if(u){e.openStart("span");e.class("sapUiCalDayName");e.openEnd();e.text(s.aWeekDays[h]);e.close("span")}if(s.sSecondaryCalendarType){e.openStart("span");e.class("sapUiCalItemSecText");e.openEnd();e.text(f.getDate());e.close("span")}e.close("div")};f._renderWeekNumber=function(e,a,t,i){var r=i._calculateWeekNumber(a);var n=t.sId+"-WNum-"+r;e.openStart("div",n);e.class("sapUiCalWeekNum");e.accessibilityState(null,{role:"rowheader",labelledby:d.getStaticId("sap.ui.unified","CALENDAR_WEEK")+" "+n});e.openEnd();e.text(r);e.close("div")};return f},true);
//# sourceMappingURL=MonthRenderer.js.map