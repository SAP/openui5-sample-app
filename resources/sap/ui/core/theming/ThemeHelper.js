/*!
 * OpenUI5
 * (c) Copyright 2009-2025 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.define(["sap/base/future","sap/base/Log"],function(e,r){"use strict";var t={};const a="sap_horizon";const n=window.matchMedia("(prefers-color-scheme: dark)").matches;const s=/^([a-zA-Z0-9_]*)(_(hcb|hcw|dark))$/g;const i=["sap_horizon","sap_horizon_dark","sap_horizon_hcb","sap_horizon_hcw","sap_fiori_3","sap_fiori_3_dark","sap_fiori_3_hcb","sap_fiori_3_hcw",...["sap_belize","sap_belize_plus","sap_belize_hcb","sap_belize_hcw","sap_bluecrystal","sap_hcb"]];const c={};var l={};l.reset=function(){t={}};l.getMetadata=function(r){if(!r){return null}var a=r.replace("sap-ui-theme-","").replace(/\./g,"-");if(t[a]){return t[a]}var n=document.createElement("span");n.classList.add("sapThemeMetaData-UI5-"+a);document.documentElement.appendChild(n);var s=window.getComputedStyle(n).getPropertyValue("background-image");document.documentElement.removeChild(n);var i=/\(["']?data:text\/plain;utf-8,(.*?)['"]?\)/i.exec(s);if(!i||i.length<2){return null}var c=i[1];if(c.charAt(0)!=="{"&&c.charAt(c.length-1)!=="}"){try{c=decodeURI(c)}catch(e){}}c=c.replace(/\\"/g,'"');var l=c.replace(/%20/g," ");var o;try{o=JSON.parse(l);t[a]=o}catch(r){e.errorThrows("Could not parse theme metadata for library "+a+".")}return o};l.checkAndRemoveStyle=function(t){var a=t.prefix||"",n=t.id;var s=function(t,a){var n=document.getElementById(t);try{var s=false,i=false,c=false,o=false;s=!n;i=!!(n&&(n.getAttribute("data-sap-ui-ready")==="true"||n.getAttribute("data-sap-ui-ready")==="false"));c=!!(n&&n.sheet&&n.sheet.href===n.href&&l.hasSheetCssRules(n.sheet));o=!!(n&&n.innerHTML&&n.innerHTML.length>0);var u=s||c||o||i;if(a){r.debug("sap.ui.core.theming.ThemeHelper: "+t+": "+u+" (noLinkElement: "+s+", sheet: "+c+", innerHtml: "+o+", linkElementFinishedLoading: "+i+")")}return u}catch(r){if(a){e.errorThrows(`sap.ui.core.theming.ThemeHelper: Error during check styles for Id: "${t}"`,{cause:r})}}return false};var i=s(a+n,true);if(i){var c=document.querySelectorAll("link[data-sap-ui-foucmarker='"+a+n+"']");if(c.length>0){for(var o=0,u=c.length;o<u;o++){c[o].remove()}r.debug("ThemeManager: Old stylesheets removed for library: "+n)}}return i};l.safeAccessSheetCssRules=function(e){try{return e.cssRules}catch(e){return null}};l.hasSheetCssRules=function(e){var r=l.safeAccessSheetCssRules(e);return!!r&&r.length>0};l.validateAndFallbackTheme=function(e,t){if(t==null&&c[e]){return c[e]}let n=e;if(t==null&&e.startsWith("sap_")&&i.indexOf(e)==-1){const t=s.exec(e)||[];const i=t[2];if(i){n=`${a}${i}`}else{n=a}c[e]=n;r.warning(`The configured theme '${e}' is not yet or no longer supported in this version. The valid fallback theme is '${n}'.`,"Theming")}return n};l.getDefaultThemeInfo=function(){return{DEFAULT_THEME:a,DARK_MODE:n}};l.isStandardTheme=function(e){return e.startsWith("sap_")||e==="base"};return l});
//# sourceMappingURL=ThemeHelper.js.map