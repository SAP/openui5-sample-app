/*!
 * OpenUI5
 * (c) Copyright 2025 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.define(["sap/base/config","sap/base/future","sap/base/Log"],function(e,t,r){"use strict";var a={};const n=e.get({name:"sapUiXxDeactivateThemeFallback",type:"boolean",value:false,external:false});const s="sap_horizon";const i=window.matchMedia("(prefers-color-scheme: dark)").matches;const o=/(_hcb|_hcw|_dark)$/g;const c=["sap_horizon","sap_horizon_dark","sap_horizon_hcb","sap_horizon_hcw","sap_fiori_3","sap_fiori_3_dark","sap_fiori_3_hcb","sap_fiori_3_hcw"];const l={};var u={};u.reset=function(){a={}};u.getMetadata=function(e){if(!e){return null}var r=e.replace("sap-ui-theme-","").replace(/\./g,"-");if(a[r]){return a[r]}var n=document.createElement("span");n.classList.add("sapThemeMetaData-UI5-"+r);document.documentElement.appendChild(n);var s=window.getComputedStyle(n).getPropertyValue("background-image");document.documentElement.removeChild(n);var i=/\(["']?data:text\/plain;utf-8,(.*?)['"]?\)/i.exec(s);if(!i||i.length<2){return null}var o=i[1];if(o.charAt(0)!=="{"&&o.charAt(o.length-1)!=="}"){try{o=decodeURI(o)}catch(e){}}o=o.replace(/\\"/g,'"');var c=o.replace(/%20/g," ");var l;try{l=JSON.parse(c);a[r]=l}catch(e){t.errorThrows("Could not parse theme metadata for library "+r+".")}return l};u.checkAndRemoveStyle=function(e){var a=e.prefix||"",n=e.id;var s=function(e,a){var n=document.getElementById(e);try{var s=false,i=false,o=false,c=false;s=!n;i=!!(n&&(n.getAttribute("data-sap-ui-ready")==="true"||n.getAttribute("data-sap-ui-ready")==="false"));o=!!(n&&n.sheet&&n.sheet.href===n.href&&u.hasSheetCssRules(n.sheet));c=!!(n&&n.innerHTML&&n.innerHTML.length>0);var l=s||o||c||i;if(a){r.debug("sap.ui.core.theming.ThemeHelper: "+e+": "+l+" (noLinkElement: "+s+", sheet: "+o+", innerHtml: "+c+", linkElementFinishedLoading: "+i+")")}return l}catch(r){if(a){t.errorThrows(`sap.ui.core.theming.ThemeHelper: Error during check styles for Id: "${e}"`,{cause:r})}}return false};var i=s(a+n,true);if(i){var o=document.querySelectorAll("link[data-sap-ui-foucmarker='"+a+n+"']");if(o.length>0){for(var c=0,l=o.length;c<l;c++){o[c].remove()}r.debug("ThemeManager: Old stylesheets removed for library: "+n)}}return i};u.safeAccessSheetCssRules=function(e){try{return e.cssRules}catch(e){return null}};u.hasSheetCssRules=function(e){var t=u.safeAccessSheetCssRules(e);return!!t&&t.length>0};u.validateAndFallbackTheme=function(e,t){if(n){return e}if(t==null&&l[e]){return l[e]}let a=e;if(t==null&&e.startsWith("sap_")&&c.indexOf(e)==-1){const t=e.match(o)?.[0]||"";a=`${s}${t}`;l[e]=a;r.warning(`The configured theme '${e}' is not yet or no longer supported in this version. The valid fallback theme is '${a}'.`,"Theming")}return a};u.getDefaultThemeInfo=function(){return{DEFAULT_THEME:s,DARK_MODE:i}};u.isStandardTheme=function(e){return e.startsWith("sap_")||e==="base"};return u});
//# sourceMappingURL=ThemeHelper.js.map