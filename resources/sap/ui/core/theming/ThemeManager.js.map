{"version":3,"file":"ThemeManager.js","names":["sap","ui","define","assert","Log","each","LoaderExtensions","Device","Global","EventProvider","Configuration","Element","includeStylesheet","ActivityDetection","jQuery","ThemeHelper","oThemeManager","maxThemeCheckCycles","mAllLoadedLibraries","CUSTOMCSSCHECK","ThemeManager","extend","constructor","apply","this","arguments","_iCount","_CUSTOMID","_customCSSAdded","_themeCheckedForCustom","_sFallbackTheme","_mThemeFallback","setupThemes","themeLoaded","metadata","events","ThemeChanged","checkThemeChanged","reset","delayedCheckTheme","_sThemeCheckId","fireThemeChanged","prototype","clearTimeout","checkTheme","sThemeName","getTheme","sPath","_getThemePath","bIsStandardTheme","indexOf","res","aFailedLibs","checkLib","lib","sStyleId","currentRes","checkAndRemoveStyle","prefix","id","document","getElementById","checkCustom","sCustomCssPath","sLibCssQueryParams","getLibraryCssQueryParams","debug","oCustomCssLink","querySelector","remove","oStyle","getAttribute","sheet","hasSheetCssRules","push","length","sLib","oThemeMetaData","getMetadata","Extends","forEach","warning","updateThemeUrl","cssFile","window","style","getComputedStyle","content","getPropertyValue","browser","safari","html","documentElement","classList","add","substring","e","error","aRules","safeAccessSheetCssRules","i","test","selectorText","bFirst","bEmergencyExit","iDelay","setTimeout","fnAddFoucmarker","sLinkId","oLink","dataset","sapUiFoucmarker","_includeLibraryThemeAndEnsureThemeRoot","oLibThemingInfo","sLibName","name","_ensureThemeRoot","getValue","includeLibraryTheme","variant","sVariant","vQueryOrLibInfo","undefined","sQuery","sCssVars","sRtl","getRTL","sLibFileName","sLibId","sOldCssUri","href","sCssBasePath","URL","sTheme","baseURI","toString","oTmpLink","createElement","sCssPathAndName","sCssVariablesPathAndName","info","Parameters","require","_addLibraryTheme","toUrl","replace","_mThemeRoots","path","registerResourcePath","setThemeRoot","aLibraryNames","sThemeBaseUrl","bForceUpdate","Array","isArray","slice","_updateThemeUrls","bSuppressFOUC","oQueryResult","querySelectorAll","call","oHTMLElement","iQueryIndex","search","sStandardLibFilePrefix","sRTL","sHref","pos","mLinkId","exec","lastIndexOf","applyTheme","bForce","normalizeTheme","sCurrentTheme","setTheme","oLibInfo","version","versioninfo","mThemeRoots","themeName","themeRoot","notifyContentDensityChanged","oParameters","ThemeParameters","_reset","theme","sEventId","oEvent","Event","registry","oElement","_handleEvent","refresh","fireEvent"],"sources":["ThemeManager-dbg.js"],"mappings":"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"}