/*!
 * OpenUI5
 * (c) Copyright 2009-2025 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.define(["sap/base/i18n/Formatting","sap/base/i18n/Localization","sap/ui/base/Object","sap/ui/core/Locale","sap/ui/core/LocaleData","sap/ui/core/Supportability","sap/ui/core/format/FormatUtils","sap/base/Log","sap/base/assert","sap/base/util/extend"],function(e,t,r,i,n,a,o,s,u,l){"use strict";var c=r.extend("sap.ui.core.format.NumberFormat",{constructor:function(e){throw new Error}});const f=/\s/g;const g=/\d/;const m=/^(-?)0+(\d)/;const d=/[^\$\xA2-\xA5\u058F\u060B\u09F2\u09F3\u09FB\u0AF1\u0BF9\u0E3F\u17DB\u20A0-\u20BD\uA838\uFDFC\uFE69\uFF04\uFFE0\uFFE1\uFFE5\uFFE6\u0020\xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000]/;const p=/0+(\.0+)?/;const h=/^0+$/;const C=/^-(0(?:.0+)?)$/;const y=/0+$/;const S=/[\u061c\u200e\u200f\u202a\u202b\u202c]/g;const b=/\u200e/;var F=function(e,t,r){var i=k(e);return new RegExp("^\\d+"+"(?:"+i+"?"+"\\d{"+t+"}"+")*"+""+i+"?"+"\\d{"+r+"}"+"$")};var D={INTEGER:"integer",FLOAT:"float",CURRENCY:"currency",UNIT:"unit",PERCENT:"percent"};var O={FLOOR:"FLOOR",CEILING:"CEILING",TOWARDS_ZERO:"TOWARDS_ZERO",AWAY_FROM_ZERO:"AWAY_FROM_ZERO",HALF_FLOOR:"HALF_FLOOR",HALF_CEILING:"HALF_CEILING",HALF_TOWARDS_ZERO:"HALF_TOWARDS_ZERO",HALF_AWAY_FROM_ZERO:"HALF_AWAY_FROM_ZERO"};c.add=function(e,t){const r=e.split(".");let i=r[0];const n=r[1];const a=i[0]==="-";if(a){i=i.slice(1);t=-t}const o=i.split("").map(Number);const s=o.length-1;o[s]+=t;for(let e=s;e>=0;e-=1){if(o[e]>=10){o[e]=o[e]%10;if(e===0){o.unshift(1);break}o[e-1]+=1}else if(o[e]<0&&e>0){o[e]=10+o[e];o[e-1]-=1;if(e===1&&o[0]===0){o.shift();break}}else{break}}if(a){o[0]=-o[0]}let u=o.join("");if(!n){return u}u=u==="0"&&a?"-0":u;const l=u[0]==="-"?"-":"";if(a===!!l){return u+"."+n}const c=n.split("").map(Number);for(let e=c.length-1;e>=0;e-=1){c[e]=10-c[e];if(e>0){c[e-1]+=1}}return l+(Math.abs(o[0])-1)+"."+c.join("")};c.getMaximumDecimals=function({decimals:e,maxFractionDigits:t}){if(t>=0&&e>0&&t<e){return t}return e};function L(e){if(typeof e==="number"){return Math.ceil(e)}const[t,r="0"]=e.split(".");return h.test(r)||t[0]==="-"?t:c.add(t,1)}function v(e){if(typeof e==="number"){return Math.floor(e)}const[t,r="0"]=e.split(".");return h.test(r)||t[0]!=="-"?t:c.add(t,-1)}function N(e,t){if(typeof e==="number"){return t?e+.5:e-.5}e=c._shiftDecimalPoint(e,1);e=c.add(e,t?5:-5);return c._shiftDecimalPoint(e,-1)}const R={[O.FLOOR]:v,[O.CEILING]:L,[O.TOWARDS_ZERO]:e=>e>0?v(e):L(e),[O.AWAY_FROM_ZERO]:e=>e>0?L(e):v(e),[O.HALF_TOWARDS_ZERO]:e=>{const t=e>0;e=N(e,!t);return t?L(e):v(e)},[O.HALF_AWAY_FROM_ZERO]:e=>{const t=e>0;e=N(e,t);return t?v(e):L(e)},[O.HALF_FLOOR]:e=>L(N(e,false)),[O.HALF_CEILING]:e=>v(N(e,true))};c.RoundingMode=O;c.oDefaultIntegerFormat={minIntegerDigits:1,maxIntegerDigits:99,minFractionDigits:0,maxFractionDigits:0,strictGroupingValidation:false,groupingEnabled:false,groupingSize:3,groupingSeparator:",",decimalSeparator:".",plusSign:"+",minusSign:"-",isInteger:true,type:D.INTEGER,showMeasure:false,style:"standard",showNumber:true,parseAsString:false,preserveDecimals:false,roundingMode:c.RoundingMode.TOWARDS_ZERO,emptyString:NaN,showScale:true};c.oDefaultFloatFormat={minIntegerDigits:1,maxIntegerDigits:99,minFractionDigits:0,maxFractionDigits:99,strictGroupingValidation:false,groupingEnabled:true,groupingSize:3,groupingSeparator:",",decimalSeparator:".",plusSign:"+",minusSign:"-",isInteger:false,type:D.FLOAT,showMeasure:false,style:"standard",showNumber:true,parseAsString:false,preserveDecimals:false,roundingMode:c.RoundingMode.HALF_AWAY_FROM_ZERO,emptyString:NaN,showScale:true};c.oDefaultPercentFormat={minIntegerDigits:1,maxIntegerDigits:99,minFractionDigits:0,maxFractionDigits:99,strictGroupingValidation:false,groupingEnabled:true,groupingSize:3,groupingSeparator:",",decimalSeparator:".",plusSign:"+",minusSign:"-",percentSign:"%",isInteger:false,type:D.PERCENT,showMeasure:false,style:"standard",showNumber:true,parseAsString:false,preserveDecimals:false,roundingMode:c.RoundingMode.HALF_AWAY_FROM_ZERO,emptyString:NaN,showScale:true};c.oDefaultCurrencyFormat={minIntegerDigits:1,maxIntegerDigits:99,strictGroupingValidation:false,groupingEnabled:true,groupingSize:3,groupingSeparator:",",decimalSeparator:".",plusSign:"+",minusSign:"-",isInteger:false,type:D.CURRENCY,showMeasure:true,currencyCode:true,currencyContext:"standard",style:"standard",showNumber:true,customCurrencies:undefined,parseAsString:false,preserveDecimals:false,roundingMode:c.RoundingMode.HALF_AWAY_FROM_ZERO,emptyString:NaN,showScale:true,ignorePrecision:true};c.oDefaultUnitFormat={minIntegerDigits:1,maxIntegerDigits:99,strictGroupingValidation:false,groupingEnabled:true,groupingSize:3,groupingSeparator:",",decimalSeparator:".",plusSign:"+",minusSign:"-",isInteger:false,type:D.UNIT,showMeasure:true,style:"standard",showNumber:true,customUnits:undefined,allowedUnits:undefined,parseAsString:false,preserveDecimals:false,roundingMode:c.RoundingMode.HALF_AWAY_FROM_ZERO,emptyString:NaN,showScale:true};c.checkDecimalPadding=function(e,t=true,r=false){const i=e?.decimalPadding;if(!t&&i!==undefined){throw new Error("Unsupported format option: 'decimalPadding' cannot be used with an integer or percent"+" instance of sap.ui.core.format.NumberFormat")}if(r&&i&&e?.showMeasure!==false){throw new Error("The format option 'decimalPadding' can only be used if the format option"+" 'showMeasure' is set to false")}if(i<1){throw new Error("The format option 'decimalPadding' must have a value greater than 0")}if(i>0&&(e?.style==="short"||e?.style==="long")){throw new Error("The format option 'decimalPadding' can only be used if the format option"+" 'style' is not set to 'short' or 'long'")}};c.getInstance=function(e,t){return this.getFloatInstance(e,t)};c.getFloatInstance=function(e,t){this.checkDecimalPadding(e);var r=this.createInstance(e,t),i=this.getLocaleFormatOptions(r.oLocaleData,D.FLOAT);r.oFormatOptions=l({},this.oDefaultFloatFormat,i,r.oOriginalFormatOptions);return r};c.getIntegerInstance=function(e,t){this.checkDecimalPadding(e,false);var r=this.createInstance(e,t),i=this.getLocaleFormatOptions(r.oLocaleData,D.INTEGER);r.oFormatOptions=l({},this.oDefaultIntegerFormat,i,r.oOriginalFormatOptions);return r};c.getCurrencyInstance=function(e,t){this.checkDecimalPadding(e,true,true);var r=this.createInstance(e,t);var i=r.oOriginalFormatOptions&&r.oOriginalFormatOptions.currencyContext;var n=_(r.oOriginalFormatOptions);if(n){i=i||this.oDefaultCurrencyFormat.style;i="sap-"+i}var a=this.getLocaleFormatOptions(r.oLocaleData,D.CURRENCY,i);r.oFormatOptions=l({},this.oDefaultCurrencyFormat,a,r.oOriginalFormatOptions);r.oFormatOptions.trailingCurrencyCode=n;r._defineCustomCurrencySymbols();return r};c.getUnitInstance=function(e,t){this.checkDecimalPadding(e,true,true);var r=this.createInstance(e,t),i=this.getLocaleFormatOptions(r.oLocaleData,D.UNIT);r.oFormatOptions=l({},this.oDefaultUnitFormat,i,r.oOriginalFormatOptions);return r};c.getPercentInstance=function(e,t){this.checkDecimalPadding(e,false);var r=this.createInstance(e,t),i=this.getLocaleFormatOptions(r.oLocaleData,D.PERCENT);r.oFormatOptions=l({},this.oDefaultPercentFormat,i,r.oOriginalFormatOptions);return r};c.createInstance=function(t,r){var a=Object.create(this.prototype),o;if(t instanceof i){r=t;t=undefined}if(!r){r=new i(e.getLanguageTag())}a.oLocale=r;a.oLocaleData=n.getInstance(r);a.oOriginalFormatOptions=t;if(t){if(t.pattern){o=this.parseNumberPattern(t.pattern);Object.keys(o).forEach(function(e){t[e]=o[e]})}if(t.emptyString!==undefined){u(t.emptyString===""||t.emptyString===0||t.emptyString===null||t.emptyString!==t.emptyString,"The format option 'emptyString' must be either '', 0, null, or NaN")}}return a};c.getDefaultUnitPattern=function(e){return"{0} "+e};c.getLocaleFormatOptions=function(e,t,r){var i,n;switch(t){case D.PERCENT:n=e.getPercentPattern();break;case D.CURRENCY:n=e.getCurrencyPattern(r);break;case D.UNIT:n=e.getDecimalPattern();break;default:n=e.getDecimalPattern()}i=this.parseNumberPattern(n);i.plusSign=e.getNumberSymbol("plusSign");i.minusSign=e.getNumberSymbol("minusSign");i.decimalSeparator=e.getNumberSymbol("decimal");i.groupingSeparator=e.getNumberSymbol("group");i.percentSign=e.getNumberSymbol("percentSign");i.pattern=n;switch(t){case D.UNIT:case D.FLOAT:case D.PERCENT:i.minFractionDigits=0;i.maxFractionDigits=99;break;case D.INTEGER:i.minFractionDigits=0;i.maxFractionDigits=0;i.groupingEnabled=false;break;case D.CURRENCY:i.minFractionDigits=undefined;i.maxFractionDigits=undefined;break}return i};c.parseNumberPattern=function(e){var t=0,r=0,i=0,n=false,a=0,o=0,s=e.indexOf(";"),u={Integer:0,Fraction:1},l=u.Integer;if(s!==-1){e=e.substring(0,s)}for(var c=0;c<e.length;c++){var f=e[c];switch(f){case",":if(n){a=o;o=0}n=true;break;case".":l=u.Fraction;break;case"0":if(l===u.Integer){t++;if(n){o++}}else{r++;i++}break;case"#":if(l===u.Integer){if(n){o++}}else{i++}break}}if(!a){a=o;o=0}return{minIntegerDigits:t,minFractionDigits:r,maxFractionDigits:i,groupingEnabled:n,groupingSize:a,groupingBaseSize:o}};c.prototype._defineCustomCurrencySymbols=function(){var e=this.oFormatOptions;var t=this.oLocaleData.getCurrencySymbols();var r=function(e,t){var r=[];var i;for(var n in e){i=e[n];if(r.indexOf(i)===-1){r.push(i)}else if(i!==undefined){t[i]=true;s.error("Symbol '"+i+"' is defined multiple times in custom currencies.",undefined,"NumberFormat")}}};if(e.customCurrencies&&typeof e.customCurrencies==="object"){this.mKnownCurrencySymbols={};this.mKnownCurrencyCodes={};Object.keys(e.customCurrencies).forEach(function(r){if(e.customCurrencies[r].symbol){this.mKnownCurrencySymbols[r]=e.customCurrencies[r].symbol}else{var i=e.customCurrencies[r].isoCode;if(i){this.mKnownCurrencySymbols[r]=t[i]}}this.mKnownCurrencyCodes[r]=r}.bind(this))}else{this.mKnownCurrencySymbols=t;this.mKnownCurrencyCodes=this.oLocaleData.getCustomCurrencyCodes()}this.mDuplicatedSymbols={};r(this.mKnownCurrencySymbols,this.mDuplicatedSymbols)};function E(e,t){if(e.indexOf(".")>=0&&!M(e)&&e.endsWith("0")){var r=e.length-e.lastIndexOf(".")-1;var i=r-t;if(i>0){while(e.endsWith("0")&&i-- >0){e=e.substring(0,e.length-1)}if(e.endsWith(".")){e=e.substring(0,e.length-1)}}}return e}function w(e,t){var r=t.groupingSize,i=t.groupingBaseSize||r,n=e.length,a=Math.max(n-i,0)%r||r,o=e.slice(0,a);while(n-a>=i){o+=t.groupingSeparator;o+=e.slice(a,a+r);a+=r}o+=e.slice(a,n);return o}c.prototype.format=function(e,t){if(Array.isArray(e)){t=e[1];e=e[0]}var r="",i="",a="",o="",u="",l="",f=e<0,g=-1,m=Object.assign({},this.oFormatOptions),d=this.oOriginalFormatOptions,p=m.type===D.CURRENCY&&t==="INR"&&this.oLocale.getLanguage()==="en"&&this.oLocale.getRegion()==="IN",h,C,y,S,F,O,L=e===undefined||e===null;if(m.groupingEnabled&&m.groupingSize<=0){s.error("Grouping requires the 'groupingSize' format option to be a positive number, but it is '"+m.groupingSize+"' instead.");return""}if(m.showNumber&&(e===m.emptyString||isNaN(e)&&isNaN(m.emptyString))){return""}if(t!==undefined&&t!==null&&typeof t!=="string"&&!(t instanceof String)){return""}if(!m.showNumber&&!t){return""}if(L&&(!t||!m.showMeasure||m.showNumber)){return""}if(t&&m.customCurrencies&&!m.customCurrencies[t]){s.error("Currency '"+t+"' is unknown.");return""}if(!m.showNumber&&!m.showMeasure){return""}if(t&&m.type===D.UNIT){if(m.customUnits&&typeof m.customUnits==="object"){F=m.customUnits[t]}else{O=this.oLocaleData.getUnitFromMapping(t)||t;F=this.oLocaleData.getUnitFormat(O)}if(m.showMeasure){var v=!m.allowedUnits||m.allowedUnits.indexOf(t)>=0;if(!v){return""}}if(!F&&!m.showNumber){return this._addOriginInfo(t)}}if(m.type===D.UNIT){m.decimals=F&&(typeof F.decimals==="number"&&F.decimals>=0)?F.decimals:m.decimals;m.decimals=c.getMaximumDecimals(m);m.precision=F&&(typeof F.precision==="number"&&F.precision>=0)?F.precision:m.precision}if(m.type==D.CURRENCY){if(t&&m.trailingCurrencyCode){if(!this.mKnownCurrencyCodes[t]&&!/(^[A-Z]{3}$)/.test(t)){m.trailingCurrencyCode=false;m.pattern=this.oLocaleData.getCurrencyPattern(m.currencyContext)}}if(!m.showNumber){if(!m.currencyCode){var N;if(m.customCurrencies&&typeof m.customCurrencies==="object"){N=this.mKnownCurrencySymbols[t]}else{N=this.oLocaleData.getCurrencySymbol(t)}if(N&&N!==t){t=N}}return t}if(m.style==="long"||m.style==="short"){m.maxFractionDigits??=0}else{if(m.customCurrencies?.[t]?.decimals!==undefined){m.decimals=m.customCurrencies[t].decimals}else{m.decimals??=this.oLocaleData.getCurrencyDigits(t)}m.decimals=c.getMaximumDecimals(m)}}if(m.decimals!==undefined){m.minFractionDigits=m.decimals;m.maxFractionDigits=m.decimals}if(m.shortLimit===undefined||Math.abs(e)>=m.shortLimit){y=m.shortRefNumber===undefined?e:m.shortRefNumber;C=I(y,m,this.oLocaleData,p);if(C&&C.formatString!="0"){e=e/C.magnitude;if(m.shortDecimals!==undefined){m.minFractionDigits=m.shortDecimals;m.maxFractionDigits=m.shortDecimals}else{if(d.minFractionDigits===undefined&&d.maxFractionDigits===undefined&&d.decimals===undefined&&d.precision===undefined&&d.pattern===undefined){m.precision=2;m.minFractionDigits=0;m.maxFractionDigits=99}if(d.maxFractionDigits===undefined&&d.decimals===undefined){m.maxFractionDigits=99}}m.roundingMode=c.RoundingMode.HALF_AWAY_FROM_ZERO}}if((C||!m.ignorePrecision)&&m.precision!==undefined){m.maxFractionDigits=Math.min(m.maxFractionDigits,T(e,m.precision));m.minFractionDigits=Math.min(m.minFractionDigits,m.maxFractionDigits)}if(m.type==D.PERCENT){e=c._shiftDecimalPoint(e,2)}if((typeof e==="number"||typeof e==="string"&&typeof m.roundingMode!=="function")&&!m.preserveDecimals){e=U(e,m.maxFractionDigits,m.roundingMode)}if(e==0){f=false}if(m.preserveDecimals&&(typeof e==="string"||e instanceof String)){e=E(e,m.maxFractionDigits)}if(!L){u=n.convertToDecimal(e)}if(u=="NaN"){return u}if(f){u=u.substr(1)}g=u.indexOf(".");if(g>-1){r=u.substr(0,g);i=u.substr(g+1)}else{r=u}if(r.length<m.minIntegerDigits){r=r.padStart(m.minIntegerDigits,"0")}else if(r.length>m.maxIntegerDigits){r="".padStart(m.maxIntegerDigits,"?")}if(i.length<m.minFractionDigits){i=i.padEnd(m.minFractionDigits,"0")}else if(i.length>m.maxFractionDigits&&!m.preserveDecimals){i=i.substr(0,m.maxFractionDigits)}if(m.type===D.UNIT&&!m.showNumber){if(F){S=this._getPluralCategory(r,i,C);l=F["unitPattern-count-"+S];if(!l){l=F["unitPattern-count-other"]}if(!l){return this._addOriginInfo(t)}if(S!=="other"&&l.indexOf("{0}")===-1){l=F["unitPattern-count-other"];if(!l){return this._addOriginInfo(t)}}if(l.indexOf("{0}")===-1){s.warning("Cannot separate the number from the unit because unitPattern-count-other '"+l+"' does not include the number placeholder '{0}' for unit '"+t+"'")}else{return this._addOriginInfo(l.replace("{0}","").trim())}}}if(m.groupingEnabled){a=w(r,m)}else{a=r}const R=m.decimalPadding||0;if(R){m.minusSign=m.minusSign.replace(b,"")}if(f){o=m.minusSign}o+=a;if(i){o+=m.decimalSeparator+i}if(C&&C.formatString&&m.showScale&&m.type!==D.CURRENCY){S=this._getPluralCategory(r,i);C.formatString=this.oLocaleData.getDecimalFormat(m.style,C.key,S);o=C.formatString.replace(C.valueSubString,o);o=o.replace(/'.'/g,".")}if(m.type===D.CURRENCY){l=m.pattern;if(C&&C.formatString&&m.showScale){var A;if(m.trailingCurrencyCode){A="sap-short"}else{A="short"}S=this._getPluralCategory(r,i);if(p){l=x(A,C.key,S)}else{l=this.oLocaleData.getCurrencyFormat(A,C.key,S)}l=l.replace(/'.'/g,".")}h=l.split(";");if(h.length===2){l=f?h[1]:h[0];if(f){o=o.substring(m.minusSign.length)}}if(!m.currencyCode){var N;if(m.customCurrencies&&typeof m.customCurrencies==="object"){N=this.mKnownCurrencySymbols[t]}else{N=this.oLocaleData.getCurrencySymbol(t)}if(N&&N!==t){t=N}}o=this._composeCurrencyResult(l,o,t,{decimalPadding:R,showMeasure:m.showMeasure,negative:f,minusSign:m.minusSign})}if(m.type===D.PERCENT){l=m.pattern;o=l.replace(/[0#.,]+/,o);o=o.replace(/%/,m.percentSign)}if(m.showMeasure&&t&&m.type===D.UNIT){S=this._getPluralCategory(r,i,C);if(F){l=F["unitPattern-count-"+S];if(!l){l=F["unitPattern-count-other"]}if(!l){l=c.getDefaultUnitPattern(t)}}else{l=c.getDefaultUnitPattern(t)}o=l.replace("{0}",o)}let _=R-i.length;if(_>0){const e=o[o.length-1]===")";const t=" ";if(i){if(e){o+=t;_=_-1}}else if(!e){o+=t}o+=" ".repeat(_)}return this._addOriginInfo(o)};c.prototype._getPluralCategory=function(e,t,r){var i=e;if(t){i+="."+t}if(r){i+="c"+r.magnitude.toExponential().slice(2)}return this.oLocaleData.getPluralCategory(i)};c.prototype._addOriginInfo=function(e){if(a.collectOriginInfo()){e=new String(e);e.originInfo={source:"Common Locale Data Repository",locale:this.oLocale.toString()}}return e};c.prototype._composeCurrencyResult=function(e,t,r,i){let n=i.minusSign;let a=e.replace(/[0#.,]+/,t);if(i.showMeasure&&r){var o="¤",s={"[:digit:]":g,"[[:^S:]&[:^Z:]]":d},u=a.indexOf(o),l=u<a.length/2?"after":"before",c=this.oLocaleData.getCurrencySpacing(l),f=l==="after"?r.charAt(r.length-1):r.charAt(0),m,p=s[c.currencyMatch],h=s[c.surroundingMatch],C;a=a.replace(o,r);m=l==="after"?a.charAt(u+r.length):a.charAt(u-1);if(p&&p.test(f)&&h&&h.test(m)){if(l==="after"){C=u+r.length}else{C=u}a=a.slice(0,C)+c.insertBetween+a.slice(C)}else if(i.negative&&l==="after"){n="\ufeff"+i.minusSign}}else{if(i.decimalPadding>0){a=a.replace(S,"")}a=a.replace(/\s*\u00a4\s*/,"")}if(i.negative){a=a.replace(/-/,n)}return a};c.prototype.parse=function(e){var t=this.oFormatOptions,r=t.plusSign+this.oLocaleData.getLenientNumberSymbols("plusSign"),i=t.minusSign+this.oLocaleData.getLenientNumberSymbols("minusSign"),n=k(r+i),a=k(t.groupingSeparator),l=k(t.decimalSeparator),g="^\\s*(["+n+"]?(?:[0-9"+a+"]+|[0-9"+a+"]*"+l+"[0-9]*)(?:[eE][+-][0-9]+)?)\\s*$",m="^\\s*(["+n+"]?[0-9"+a+"]+)\\s*$",d=new RegExp(a,"g"),p=new RegExp(l,"g"),h=this.oLocaleData.getNumberSymbol("percentSign"),C=t.type===D.CURRENCY&&this.oLocale.getLanguage()==="en"&&this.oLocale.getRegion()==="IN",y,S,b,F,O=0,L,v;if(typeof e!=="string"&&!(e instanceof String)){return null}e=o.normalize(e).trim();if(e===""){const e=t.type===D.CURRENCY||t.type===D.UNIT;if(!t.showNumber&&!e){return null}v=t.emptyString;if(t.parseAsString&&(t.emptyString===0||isNaN(t.emptyString))){v=t.emptyString+""}if(e){if(!t.showNumber){return[undefined,v]}return[v,undefined]}else{return v}}if(t.groupingSeparator===t.decimalSeparator){s.error("The grouping and decimal separator both have the same value '"+t.groupingSeparator+"'. "+"They must be different from each other such that values can be parsed correctly.")}F=t.type===D.PERCENT?t.pattern:this.oLocaleData.getPercentPattern();if(F.charAt(0)==="%"){g=g.slice(0,1)+"%?"+g.slice(1)}else if(F.charAt(F.length-1)==="%"){g=g.slice(0,g.length-1)+"%?"+g.slice(g.length-1)}var N;if(t.type===D.UNIT&&t.showMeasure){var R;if(t.customUnits&&typeof t.customUnits==="object"){R=t.customUnits}else{R=this.oLocaleData.getUnitFormats()}u(R,"Unit patterns cannot be loaded");if(t.allowedUnits){var E={};for(var w=0;w<t.allowedUnits.length;w++){var I=t.allowedUnits[w];E[I]=R[I]}R=E}var _=W(R,e,t.showNumber,this.oLocaleData.sCLDRLocaleId);var x=false;N=_.cldrCode;if(N.length===1){b=N[0];if(!t.showNumber){return[undefined,b]}}else if(N.length===0){if(t.unitOptional){_.numberValue=e}else{return null}}else{u(N.length===1,"Ambiguous unit ["+N.join(", ")+"] for input: '"+e+"'");b=undefined;x=true}if(t.strictParsing){if(x){return null}}e=_.numberValue||e}var U;if(t.type===D.CURRENCY&&t.showMeasure){U=Y({value:e,currencySymbols:this.mKnownCurrencySymbols,customCurrencyCodes:this.mKnownCurrencyCodes,duplicatedSymbols:this.mDuplicatedSymbols,customCurrenciesAvailable:!!t.customCurrencies});if(!U){return null}if(t.strictParsing){if(!U.currencyCode||U.duplicatedSymbolFound){return null}}e=U.numberValue;b=U.currencyCode;if(t.customCurrencies&&b===null){return null}if(!t.showNumber){if(e){return null}return[undefined,b]}}e=e.replace(f,"");L=A(e,this.oLocaleData,C);if(L){e=L.number}var T=M(e);if(t.isInteger&&!L&&!T){y=new RegExp(m)}else{y=new RegExp(g)}if(!y.test(e)){return t.type===D.CURRENCY||t.type===D.UNIT?null:NaN}var z=e.length;for(var Z=0;Z<z;Z++){var G=e[Z];if(r.includes(G)){e=e.replace(G,"+");break}else if(i.includes(G)){e=e.replace(G,"-");break}}e=e.replace(/^\+/,"");if(!t.isInteger&&e.indexOf(h)!==-1){S=true;e=e.replace(h,"")}var $=e;e=e.replace(d,"");if(L){e=e.replace(p,".");e=c._shiftDecimalPoint(e,Math.round(Math.log(L.factor)/Math.LN10))}if(t.isInteger){var H;if(T){e=e.replace(p,".");H=P(e);if(H===undefined){return NaN}}else{H=parseInt(e)}O=t.parseAsString?e:H}else{e=e.replace(p,".");O=t.parseAsString?e:parseFloat(e);if(S){O=c._shiftDecimalPoint(O,-2)}}var V=this._checkGrouping($,t,T);if(!V){return t.type===D.CURRENCY||t.type===D.UNIT?null:NaN}if(t.parseAsString&&!S){O=c._shiftDecimalPoint(e,0)}if(t.type===D.CURRENCY||t.type===D.UNIT){return[O,b]}return O};c.prototype.getScale=function(){if(this.oFormatOptions.style!=="short"&&this.oFormatOptions.style!=="long"||this.oFormatOptions.shortRefNumber===undefined){return}var e=I(this.oFormatOptions.shortRefNumber,this.oFormatOptions,this.oLocaleData),t;if(e&&e.formatString){t=e.formatString.replace(p,"").replace(/'.'/g,".").trim();if(t){return t}}};c._shiftDecimalPoint=function(e,t,r){var i="";var n=e.toString().toLowerCase().split("e");if(typeof e==="number"){t=n[1]?+n[1]+t:t;return+(n[0]+"e"+t)}else if(typeof e==="string"){if(!r&&parseFloat(e)===0&&t>=0){return e.replace(m,"$1$2")}var a=n[0].charAt(0);i=a==="-"?a:"";if(i||a==="+"){n[0]=n[0].slice(1)}e=n[0];var o=e.indexOf("."),s,u,l;if(o===-1){e=e+".";o=e.length-1}if(n[1]){o+=+n[1]}s=o+t;if(s<=0){e=e.padStart(e.length-s+1,"0");s=1}else if(s>=e.length-1){e=e.padEnd(s+1,"0");s=e.length-1}e=e.replace(".","");u=e.substring(0,s);l=e.substring(s);u=u.replace(m,"$1$2");if(r){l=l.replace(y,"")}return i+u+(l?"."+l:"")}else{return null}};function I(e,t,r,i){var n,a,o,s,u=t.style,l=t.precision!==undefined?t.precision:2;if(u!="short"&&u!="long"){return undefined}for(var c=0;c<15;c++){a=Math.pow(10,c);if(U(Math.abs(e)/a,l-1)<10){break}}o=a.toString();if(t.type===D.CURRENCY){if(t.trailingCurrencyCode){u="sap-short"}if(i){s=x(u,o,"other",true)}else{s=r.getCurrencyFormat(u,o,"other")}}else{s=r.getDecimalFormat(u,o,"other")}if(!s||s=="0"){return undefined}else{n={};n.key=o;n.formatString=s;var f=s.match(p);if(f){n.valueSubString=f[0];var g=n.valueSubString.indexOf(".");if(g==-1){n.decimals=0;n.magnitude=a*Math.pow(10,1-n.valueSubString.length)}else{n.decimals=n.valueSubString.length-g-1;n.magnitude=a*Math.pow(10,1-g)}}else{return undefined}}return n}function A(e,t,r){var i,n=1,a=10,s=t.getPluralCategories(),u,l={number:undefined,factor:n},c=function(r,a,s,c){if(c){u=x(s,a.toString(),r,true)}else{u=t.getDecimalFormat(s,a.toString(),r)}if(u){u=o.normalize(u,true);u=u.replace(/'.'/g,".");var f=u.match(p);if(f){var g=f[0];var m=u.replace(g,"");if(!m){return}var d=e.indexOf(m);if(d>=0){i=e.replace(m,"");n=a;n*=Math.pow(10,1-g.length);if(l.number===undefined||i.length<l.number.length){l.number=i;l.factor=n}}}}};["long","short"].forEach(function(e){a=10;while(a<1e15){for(var t=0;t<s.length;t++){var r=s[t];c(r,a,e)}a=a*10}});if(r&&!i){a=10;while(a<1e15){for(var f=0;f<s.length;f++){var g=s[f];c(g,a,"short",true)}a=a*10}}if(!i){return}return l}function _(t){var r=e.getTrailingCurrencyCode();if(t){if(t.trailingCurrencyCode!==undefined){r=t.trailingCurrencyCode}if(t.pattern){r=false}if(t.currencyCode===false){r=false}}return r}function x(e,t,r,i){var n,a={short:{"1000-one":"¤0000","1000-other":"¤0000","10000-one":"¤00000","10000-other":"¤00000","100000-one":"¤0 Lk","100000-other":"¤0 Lk","1000000-one":"¤00 Lk","1000000-other":"¤00 Lk","10000000-one":"¤0 Cr","10000000-other":"¤0 Cr","100000000-one":"¤00 Cr","100000000-other":"¤00 Cr","1000000000-one":"¤000 Cr","1000000000-other":"¤000 Cr","10000000000-one":"¤0000 Cr","10000000000-other":"¤0000 Cr","100000000000-one":"¤00000 Cr","100000000000-other":"¤00000 Cr","1000000000000-one":"¤0 Lk Cr","1000000000000-other":"¤0 Lk Cr","10000000000000-one":"¤00 Lk Cr","10000000000000-other":"¤00 Lk Cr","100000000000000-one":"¤0 Cr Cr","100000000000000-other":"¤0 Cr Cr"},"sap-short":{"1000-one":"0000 ¤","1000-other":"0000 ¤","10000-one":"00000 ¤","10000-other":"00000 ¤","100000-one":"0 Lk ¤","100000-other":"0 Lk ¤","1000000-one":"00 Lk ¤","1000000-other":"00 Lk ¤","10000000-one":"0 Cr ¤","10000000-other":"0 Cr ¤","100000000-one":"00 Cr ¤","100000000-other":"00 Cr ¤","1000000000-one":"000 Cr ¤","1000000000-other":"000 Cr ¤","10000000000-one":"0000 Cr ¤","10000000000-other":"0000 Cr ¤","100000000000-one":"00000 Cr ¤","100000000000-other":"00000 Cr ¤","1000000000000-one":"0 Lk Cr ¤","1000000000000-other":"0 Lk Cr ¤","10000000000000-one":"00 Lk Cr ¤","10000000000000-other":"00 Lk Cr ¤","100000000000000-one":"0 Cr Cr ¤","100000000000000-other":"0 Cr Cr ¤"}},o={short:{"1000-one":"0000","1000-other":"0000","10000-one":"00000","10000-other":"00000","100000-one":"0 Lk","100000-other":"0 Lk","1000000-one":"00 Lk","1000000-other":"00 Lk","10000000-one":"0 Cr","10000000-other":"0 Cr","100000000-one":"00 Cr","100000000-other":"00 Cr","1000000000-one":"000 Cr","1000000000-other":"000 Cr","10000000000-one":"0000 Cr","10000000000-other":"0000 Cr","100000000000-one":"00000 Cr","100000000000-other":"00000 Cr","1000000000000-one":"0 Lk Cr","1000000000000-other":"0 Lk Cr","10000000000000-one":"00 Lk Cr","10000000000000-other":"00 Lk Cr","100000000000000-one":"0 Cr Cr","100000000000000-other":"0 Cr Cr"}};o["sap-short"]=o["short"];var s=i?o:a;var u=s[e];if(!u){u=s["short"]}if(r!=="one"){r="other"}n=u[t+"-"+r];return n}c.prototype._checkGrouping=function(e,t,r){if(t.groupingSeparator&&e.includes(t.groupingSeparator)){e=e.replace(/^-/,"");e=e.replace(/^0+(\d)/,"$1");if(e.startsWith("0")||e.startsWith(t.groupingSeparator)){return false}if(r){e=e.replace(/[eE].*/,"")}var i=e.includes(t.decimalSeparator);if(t.decimalSeparator===t.groupingSeparator){i=false}else if(i){e=e.split(t.decimalSeparator)[0]}var n=e.split(t.groupingSeparator).length===2;if(n&&!i){var a=e.length-e.lastIndexOf(t.groupingSeparator);var o=t.groupingBaseSize||t.groupingSize;if(a!==o+t.groupingSeparator.length){return false}}if(t.strictGroupingValidation){if(!this._rGrouping){this._rGrouping=F(t.groupingSeparator,t.groupingSize,t.groupingBaseSize||t.groupingSize)}if(!this._rGrouping.test(e)){return false}}}return true};function M(e){return e.indexOf("e")>0||e.indexOf("E")>0}function P(e){var t=c._shiftDecimalPoint(e,0);if(t.indexOf(".")>0&&!h.test(t.split(".")[1])){return undefined}var r=parseFloat(t);var i=""+r;if(M(i)){i=c._shiftDecimalPoint(i,0)}var n=parseInt(i);if(n!==r){return undefined}return n}function U(e,t,r){r=r||c.RoundingMode.HALF_AWAY_FROM_ZERO;t=parseInt(t);var i=""+e;if(!M(i)){var n=i.indexOf(".");if(n<0){return e}if(i.substring(n+1).length<=t){if(typeof e==="string"){e=c._shiftDecimalPoint(e,0,true)}return e}}if(typeof r==="function"){e=r(e,t)}else{if(r.match(/^[a-z_]+$/)){r=r.toUpperCase()}e=c._shiftDecimalPoint(e,t,true);e=R[r](e);e=c._shiftDecimalPoint(e,-t,true);if(typeof e==="string"){e=e.replace(C,"$1")}}return e}function k(e){return e.replace(/([.?*+^$[\]\\(){}|-])/g,"\\$1")}function T(e,t){var r=Math.floor(Math.log(Math.abs(e))/Math.LN10);return Math.max(0,t-r-1)}function W(e,t,r,i){var n,a,s,u,l,c,f,g,m,d,p,h={numberValue:undefined,cldrCode:[]},C=[],y=true,S=true,b=Number.POSITIVE_INFINITY,F=true,D=t.toLocaleLowerCase(i);for(m in e){for(a in e[m]){if(!a.startsWith("unitPattern")){continue}d=o.normalize(e[m][a]);u=d.indexOf("{0}");n=u>-1;if(n&&!r){d=d.replace("{0}","").trim();n=false}s=undefined;y=true;if(n){f=d.substring(0,u);g=f.toLocaleLowerCase(i);l=d.substring(u+"{0}".length);c=l.toLocaleLowerCase(i);if(t.startsWith(f)&&t.endsWith(l)){s=t.substring(f.length,t.length-l.length)}else if(D.startsWith(g)&&D.endsWith(c)){y=false;s=t.substring(g.length,D.length-c.length)}if(s){if(s.length<b){b=s.length;F=y;h.numberValue=s;h.cldrCode=[m]}else if(s.length===b&&h.cldrCode.indexOf(m)===-1){if(y&&!F){h.numberValue=s;h.cldrCode=[m];F=true}else if(y||!F){h.cldrCode.push(m)}}}}else{p=d.toLocaleLowerCase(i);if(d===t||p===D){if(r){if(a.endsWith("-zero")){s="0"}else if(a.endsWith("-one")){s="1"}else if(a.endsWith("-two")){s="2"}if(d===t){h.numberValue=s;h.cldrCode=[m];return h}else if(!h.cldrCode.includes(m)){S=false;h.numberValue=s;h.cldrCode.push(m)}}else if(h.cldrCode.indexOf(m)===-1){if(d===t){h.cldrCode.push(m)}else if(!C.includes(m)){C.push(m)}}}}}}if((!F||!S)&&h.cldrCode.length>1){h.numberValue=undefined}if(!r&&!h.cldrCode.length){h.cldrCode=C}return h}function z(e,r,i){var n,a,s,u,l,c,f,g,m=false,d=false,p="";for(a in r){s=r[a];if(!s){continue}s=o.normalize(s);if(e.indexOf(s)>=0&&p.length<=s.length){n=a;m=false;d=true;p=s;f=s}else if(i){c=t.getLanguageTag().toString();u=s.toLocaleUpperCase(c);l=e.toLocaleUpperCase(c).indexOf(u);if(l>=0){if(p.length===s.length&&!d){m=true}else if(p.length<s.length){g=e.substring(l,l+s.length);if(g.toLocaleUpperCase(c)===u){n=a;m=false;d=false;p=s;f=g}}}}}if(m||!n){return{}}return{code:n,recognizedCurrency:f,symbol:p}}function Y(e){var r,i=e.value;var n=z(i,e.currencySymbols);if(!n.code){n=z(i,e.customCurrencyCodes,true);if(!n.code&&!e.customCurrenciesAvailable){r=i.match(/(^[A-Z]{3}|[A-Z]{3}$)/i);n.code=r&&r[0].toLocaleUpperCase(t.getLanguageTag().toString());n.recognizedCurrency=r&&r[0]}}if(n.code){var a=n.recognizedCurrency.length-1;var o=n.recognizedCurrency.charAt(a);var u;var l=/[\-\s]+/;if(/\d$/.test(o)){if(i.startsWith(n.recognizedCurrency)){u=a+1;if(!l.test(i.charAt(u))){return undefined}}}else if(/^\d/.test(n.recognizedCurrency)){if(i.endsWith(n.recognizedCurrency)){u=i.indexOf(n.recognizedCurrency)-1;if(!l.test(i.charAt(u))){return undefined}}}i=i.replace(n.recognizedCurrency,"")}var c=false;if(e.duplicatedSymbols&&e.duplicatedSymbols[n.symbol]){n.code=undefined;c=true;s.error("The parsed currency symbol '"+n.symbol+"' is defined multiple "+"times in custom currencies.Therefore the result is not distinct.")}return{numberValue:i,currencyCode:n.code||undefined,duplicatedSymbolFound:c}}return c});
//# sourceMappingURL=NumberFormat.js.map