/*!
 * OpenUI5
 * (c) Copyright 2025 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.define(["../Control","../Element","./WebComponentMetadata","./WebComponentRenderer","sap/base/strings/hyphenate","sap/base/strings/camelize","../library","../LabelEnablement"],function(t,e,o,n,r,i,a,s){"use strict";var p=a.TextDirection;const u=a.ValueState;const f={[u.Error]:"Negative",[u.Warning]:"Critical",[u.Success]:"Positive",[u.Information]:"Information",[u.None]:"None"};const l=Object.fromEntries(Object.entries(f).map(([t,e])=>[e,t]));var c=function(t){if(t.id&&e.getElementById(t.id)){return e.getElementById(t.id)}};var d=function(t){while(t&&t.shadowRoot&&t.shadowRoot.activeElement){t=t.shadowRoot.activeElement}return t};var h=function(t,e,o){if(e===undefined){e=0}if(o===undefined){o=2}if(t==null){return t}if(t instanceof window.HTMLElement){var n=c(t);return n?n:t}if(e<o){if(Array.isArray(t)){return t.map(h,e+1,o)}if(typeof t==="object"){var r={};for(var i in t){if(t.hasOwnProperty(i)){r[i]=h(t[i],e+1,o)}}return r}}return t};var y=t.extend("sap.ui.core.webc.WebComponent",{metadata:{stereotype:"webcomponent",abstract:true,library:"sap.ui.core",properties:{__isBusy:{type:"boolean",visibility:"hidden",defaultValue:false,mapping:{type:"property",to:"__is-busy"}}}},constructor:function(e,o){t.apply(this,arguments);this.__busyIndicatorTimeout=null;this.__onInvalidationBound=this.__onInvalidation.bind(this);this.__handleCustomEventBound=this.__handleCustomEvent.bind(this);this.__delegates={onBeforeRendering:this.__onBeforeRenderingDelegate,onAfterRendering:this.__onAfterRenderingDelegate};this.addDelegate(this.__delegates,true,this,false)},renderer:n},o);y.prototype._setSlot=function(t,e){var o=["tooltip","customData","layoutData","dependents","dragDropConfig"];if(t&&!o.includes(e)){var n=this.getMetadata().getAggregationSlot(e);t.__slot=n}};y.prototype.getFocusDomRef=function(){const t=this.getDomRef();if(t&&typeof t.getFocusDomRef==="function"){return t.getFocusDomRef()}return t};y.prototype.focus=function(e){if(e&&e.oFocusedElement){e.oFocusedElement.focus({preventScroll:e.preventScroll});return}t.prototype.focus.apply(this,arguments)};y.prototype.getFocusInfo=function(){const t=d(this.getDomRef());return{id:t?t.id:null,oFocusedElement:t}};y.prototype._unsetSlot=function(t){if(t){delete t.__slot}};y.prototype.setAggregation=function(e,o,n){var r=t.prototype.setAggregation.apply(this,arguments);this._setSlot(o,e);return r};y.prototype.insertAggregation=function(e,o,n,r){var i=t.prototype.insertAggregation.apply(this,arguments);this._setSlot(o,e);return i};y.prototype.addAggregation=function(e,o,n){var r=t.prototype.addAggregation.apply(this,arguments);this._setSlot(o,e);return r};y.prototype.removeAggregation=function(e,o,n){var r=t.prototype.removeAggregation.apply(this,arguments);this._unsetSlot(r);return r};y.prototype.removeAllAggregation=function(e,o){var n=t.prototype.removeAllAggregation.apply(this,arguments);n.forEach(function(t){this._unsetSlot(t)},this);return n};y.prototype.__onBeforeRenderingDelegate=function(){this.__detachCustomEventsListeners()};y.prototype.__onAfterRenderingDelegate=function(){this.__attachCustomEventsListeners();var t=this.getDomRef();this.__updateObjectProperties(t);window.customElements.whenDefined(t.localName).then(function(){if(typeof t.attachInvalidate==="function"){t.attachInvalidate(this.__onInvalidationBound)}if(t._individualSlot){this.__slot=t._individualSlot}}.bind(this))};y.prototype.__updateObjectProperties=function(t){var e=this.getMetadata().getPropertiesByMapping("property");for(var o in e){if(this.isPropertyInitial(o)){continue}var n=e[o];var r=n.get(this);if(n.type==="object"||typeof r==="object"){var i=n._sMapTo?n._sMapTo:o;t[i]=r}}};y.prototype.setBusy=function(t){var e=this.getBusy();this.setProperty("busy",t,true);if(e!==t){if(t){this.__busyIndicatorTimeout=setTimeout(function(){this.setProperty("__isBusy",t)}.bind(this),this.getBusyIndicatorDelay())}else{this.setProperty("__isBusy",t);clearTimeout(this.__busyIndicatorTimeout)}}return this};y.prototype.__onInvalidation=function(t){if(t.type==="property"){var e=t.name;var o=t.newValue;var n=this.getMetadata().getProperty(e);if(n){if(n._fnMappingParser){o=this[n._fnMappingParser](o)}this.setProperty(e,o,true)}}};y.prototype.__attachCustomEventsListeners=function(){var t=this.getMetadata().getAllEvents();for(var e in t){var o=r(e);this.getDomRef().addEventListener(o,this.__handleCustomEventBound)}};y.prototype.__detachCustomEventsListeners=function(){var t=this.getDomRef();if(!t){return}var e=this.getMetadata().getAllEvents();for(var o in e){if(e.hasOwnProperty(o)){var n=r(o);t.removeEventListener(n,this.__handleCustomEventBound)}}};y.prototype.__handleCustomEvent=function(t){var e=t.type;var o=i(e);var n=this.__formatEventData(t.detail);var r=this.getMetadata().getEvent(o);var a=!r.fire(this,n);if(a){t.preventDefault()}};y.prototype.__formatEventData=function(t){if(typeof t==="object"){return h(t)}return{}};y.prototype.__callPublicMethod=function(t,o){if(!this.getDomRef()){throw new Error("Method called before custom element has been created by: "+this.getId())}var n=Array.from(o).map(function(t){if(t instanceof e){return t.getDomRef()}return t});var r=this.getDomRef()[t].apply(this.getDomRef(),n);if(typeof r==="object"){r=h(r)}return r};y.prototype.__callPublicGetter=function(t){if(!this.getDomRef()){throw new Error("Getter called before custom element has been created by: "+this.getId())}var e=this.getDomRef()[t];if(typeof e==="object"){e=h(e)}return e};y.prototype.destroy=function(){var e=this.getDomRef();this.__detachCustomEventsListeners();if(e&&typeof e.detachInvalidate==="function"){e.detachInvalidate(this.__onInvalidationBound)}return t.prototype.destroy.apply(this,arguments)};y.prototype._mapEnabled=function(t){return!t};y.prototype._mapTextDirection=function(t){if(t===p.Inherit){return null}return t.toLowerCase()};y.prototype._mapValueState=function(t){return f[t]};y.prototype._parseValueState=function(t){return l[t]};y.prototype._getAriaLabelledByForRendering=function(t){var e=s.getReferencingLabels(this);if(Array.isArray(t)){t.forEach(function(t){if(e.indexOf(t)<0){e.unshift(t)}})}return e.join(" ")};return y});
//# sourceMappingURL=WebComponent.js.map