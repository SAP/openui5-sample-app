/*!
 * OpenUI5
 * (c) Copyright 2025 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.define(["sap/base/future","sap/base/Log","sap/ui/core/mvc/View","sap/ui/core/mvc/_ViewFactory","sap/ui/core/Component"],function(e,n,i,t,o){"use strict";sap.ui.extensionpoint=function(e,i,t,o,r){n.warning("Do not use deprecated factory function 'sap.ui.extensionpoint'. Use 'sap.ui.core.ExtensionPoint.load' instead","sap.ui.extensionpoint",null,function(){return{type:"sap.ui.extensionpoint",name:i}});return a._factory(e,i,t,o,r)};let a={};(()=>{a=sap.ui.extensionpoint})();a._factory=function(r,s,u,f,c,l){var g,d,m,p;if(r){if(r.isA("sap.ui.core.mvc.View")){p=r.sViewName;d=r}else if(r.isA("sap.ui.core.Fragment")){p=r.getFragmentName();d=r._oContainingView}g=o.getCustomizing(r,{type:"sap.ui.viewExtensions",name:p,extensionName:s})}if(g){if(g.className){n.info("Customizing: View extension found for extension point '"+s+"' in View '"+d.sViewName+"': "+g.className+": "+(g.viewName||g.fragmentName));var w=d&&g.id?d.createId(g.id):g.id;var v={async:l,id:w,type:g.type};if(l&&d._sProcessingMode){v.processingMode=d._sProcessingMode}if(g.className==="sap.ui.core.Fragment"){var x=sap.ui.require("sap/ui/core/Fragment");v.fragmentName=g.fragmentName;v.containingView=d;if(l){if(x){m=x.load(v)}else{m=new Promise(function(e,n){sap.ui.require(["sap/ui/core/Fragment"],function(n){e(n.load(v))},n)})}}else{x=x||sap.ui.requireSync("sap/ui/core/Fragment");var N=new x(v);m=Array.isArray(N)?N:[N]}}else if(g.className==="sap.ui.core.mvc.View"){v.viewName=g.viewName;const e=true;if(e){const e=t.create(v);if(l){m=e.loaded()}else{m=[e]}}else{m=i.create(v)}}else{e.warningThrows("Customizing: Unknown extension className configured in Component.js for extension point '"+s+"' in View '"+d.sViewName+"': "+g.className+".",{suffix:"Extension className will be ignored."})}}else{e.warningThrows("Customizing: no extension className configured in Component.js for extension point '"+s+"' in View '"+d.sViewName+"': "+g.className)}}else if(a._fnExtensionProvider){var y=a._fnExtensionProvider(d);var _;if(d.isA("sap.ui.core.Fragment")){_=d._sExplicitId;var V=d.getController();d=V&&typeof V.isA==="function"&&V.isA("sap.ui.core.mvc.Controller")&&V.getView();if(d){_=d.getLocalId(_)||_}}if(y){if(!d){e.warningThrows("View instance could not be passed to ExtensionPoint Provider for extension point '"+s+"' "+"in fragment '"+_+"'.")}return[{providerClass:y,view:d,fragmentId:_,name:s,createDefault:u,targetControl:undefined,aggregationName:undefined,index:undefined,ready:function(e){var n=this._nextSibling;while(n!=null){n.index+=e.length;n=n._nextSibling}this._aControls=e},_aControls:[],_isExtensionPoint:true,_nextSibling:null}]}}if(!m&&typeof u==="function"){m=u()}var C=function(n){if(n&&!Array.isArray(n)){n=[n]}if(n&&f){var i=f.getMetadata().getAggregation(c);if(i){for(var t=0,o=n.length;t<o;t++){f[i._sMutator](n[t])}}else{e.errorThrows("Creating extension point failed - Tried to add extension point with name "+s+" to an aggregation of "+f.getId()+" in view "+d.sViewName+", but sAggregationName was not provided correctly and I could not find a default aggregation")}}return n||[]};if(m&&typeof m.then==="function"){return m.then(C)}else{return C(m)}};a.registerExtensionProvider=function(n){if(n==null){delete a._fnExtensionProvider}else if(typeof n=="function"){a._fnExtensionProvider=n}else{e.errorThrows("ExtensionPoint provider must be a function!")}};a.load=function(e){return Promise.resolve(a._factory(e.container,e.name,e.createDefaultContent,null,null,!!e.async))};return a});
//# sourceMappingURL=ExtensionPoint.js.map