/*!
 * OpenUI5
 * (c) Copyright 2009-2024 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.define(["sap/base/future","sap/base/Log","sap/ui/core/mvc/View","sap/ui/core/Component"],function(e,n,i,t){"use strict";sap.ui.extensionpoint=function(e,i,t,a,r){n.warning("Do not use deprecated factory function 'sap.ui.extensionpoint'. Use 'sap.ui.core.ExtensionPoint.load' instead","sap.ui.extensionpoint",null,function(){return{type:"sap.ui.extensionpoint",name:i}});return o._factory(e,i,t,a,r)};let o={};(()=>{o=sap.ui.extensionpoint})();o._factory=function(a,r,s,u,f,c){var l,g,d,m;if(a){if(a.isA("sap.ui.core.mvc.View")){m=a.sViewName;g=a}else if(a.isA("sap.ui.core.Fragment")){m=a.getFragmentName();g=a._oContainingView}l=t.getCustomizing(a,{type:"sap.ui.viewExtensions",name:m,extensionName:r})}if(l){if(l.className){n.info("Customizing: View extension found for extension point '"+r+"' in View '"+g.sViewName+"': "+l.className+": "+(l.viewName||l.fragmentName));var p=g&&l.id?g.createId(l.id):l.id;var w={async:c,id:p,type:l.type};if(c&&g._sProcessingMode){w.processingMode=g._sProcessingMode}if(l.className==="sap.ui.core.Fragment"){var x=sap.ui.require("sap/ui/core/Fragment");w.fragmentName=l.fragmentName;w.containingView=g;if(c){if(x){d=x.load(w)}else{d=new Promise(function(e,n){sap.ui.require(["sap/ui/core/Fragment"],function(n){e(n.load(w))},n)})}}else{x=x||sap.ui.requireSync("sap/ui/core/Fragment");var v=new x(w);d=Array.isArray(v)?v:[v]}}else if(l.className==="sap.ui.core.mvc.View"){w.viewName=l.viewName;const e=true;if(e){const e=i._create(w);if(c){d=e.loaded()}else{d=[e]}}else{d=i.create(w)}}else{e.warningThrows("Customizing: Unknown extension className configured in Component.js for extension point '"+r+"' in View '"+g.sViewName+"': "+l.className+".",{suffix:"Extension className will be ignored."})}}else{e.warningThrows("Customizing: no extension className configured in Component.js for extension point '"+r+"' in View '"+g.sViewName+"': "+l.className)}}else if(o._fnExtensionProvider){var N=o._fnExtensionProvider(g);var y;if(g.isA("sap.ui.core.Fragment")){y=g._sExplicitId;var _=g.getController();g=_&&typeof _.isA==="function"&&_.isA("sap.ui.core.mvc.Controller")&&_.getView();if(g){y=g.getLocalId(y)||y}}if(N){if(!g){e.warningThrows("View instance could not be passed to ExtensionPoint Provider for extension point '"+r+"' "+"in fragment '"+y+"'.")}return[{providerClass:N,view:g,fragmentId:y,name:r,createDefault:s,targetControl:undefined,aggregationName:undefined,index:undefined,ready:function(e){var n=this._nextSibling;while(n!=null){n.index+=e.length;n=n._nextSibling}this._aControls=e},_aControls:[],_isExtensionPoint:true,_nextSibling:null}]}}if(!d&&typeof s==="function"){d=s()}var C=function(n){if(n&&!Array.isArray(n)){n=[n]}if(n&&u){var i=u.getMetadata().getAggregation(f);if(i){for(var t=0,o=n.length;t<o;t++){u[i._sMutator](n[t])}}else{e.errorThrows("Creating extension point failed - Tried to add extension point with name "+r+" to an aggregation of "+u.getId()+" in view "+g.sViewName+", but sAggregationName was not provided correctly and I could not find a default aggregation")}}return n||[]};if(d&&typeof d.then==="function"){return d.then(C)}else{return C(d)}};o.registerExtensionProvider=function(n){if(n==null){delete o._fnExtensionProvider}else if(typeof n=="function"){o._fnExtensionProvider=n}else{e.errorThrows("ExtensionPoint provider must be a function!")}};o.load=function(e){return Promise.resolve(o._factory(e.container,e.name,e.createDefaultContent,null,null,!!e.async))};return o});
//# sourceMappingURL=ExtensionPoint.js.map