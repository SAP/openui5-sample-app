/*!
 * OpenUI5
 * (c) Copyright 2009-2025 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.define(["sap/ui/thirdparty/jquery"],function(jQuery){"use strict";return{set:function(e,t,n,r){t=t==="/"?"":t;var i=t.split("/"),s=i.length,o;if(s>0){for(o=0;e&&o<s-1;o++){if(!e[i[o]]){e[i[o]]={}}if(e[i[o]]){e=e[i[o]]}}if(typeof e[i[s-1]]!=="undefined"||i[s-1]===""||r){if(typeof e[i[s-1]]!=="object"){e[i[s-1]]=n}else{e[i[s-1]][""]=n}}}},get:function(e,t){t=t==="/"?"":t;var n=t.split("/"),r=n.length,i;if(r>0){for(i=0;e&&i<r-1;i++){if(!e[n[i]]){return false}e=e[n[i]]}return e[n[r-1]]}},modulesToHierarchy:function(e,t){var n=e.modules,r=window["sap-ui-debug"];jQuery.each(n,function(e){this.set(t,e,false,true)}.bind(this));if(r===true||r==="x"||r==="X"){this.set(t,"/",true)}else if(r&&typeof r==="string"){r.split(/,/).forEach(function(e){if(/\*/.test(e)){var r=new RegExp("^(?:"+this.makeRegExp(e)+")");var i={};Object.keys(n).forEach(function(e){var t=e.split("/").slice(0,-1).join("/")+"/";i[t]=""});for(var s in n){i[s]=n[s]}jQuery.each(i,function(e){if(r.test(e)){this.set(t,e,true)}}.bind(this))}else{this.set(t,e,true)}}.bind(this))}},toTreeModel:function(e){var t={},n={text:"All"},r;this.modulesToHierarchy(e,t);r=this.setTreeNode(t,n,0,window["sap-ui-debug"]===true);if(!r){r=0}return{tree:n,depth:r}},setTreeNode:function(e,t,n,r){var i,s;r=e===true||e[""]||r;t.nodes=[];t.selected=r;if(r){i=n}for(var o in e){if(o===""){continue}var f={text:o};s=this.setTreeNode(e[o],f,n+1,r);if(s>i||!i){i=s}t.nodes.push(f)}t.nodes.sort((e,t)=>{if(e.nodes.length&&!t.nodes.length){return-1}else if(!e.nodes.length&&t.nodes.length){return 1}else{return e.text.localeCompare(t.text)}});return i},toHierarchy:function(e){var t={};e.selected=this.isNodeSelected(e);this.setHierarchyNode(t,e);return t},isNodeSelected:function(e){var t=0,n;for(var r=0;r<e.nodes.length;r++){n=e.nodes[r];if(n.nodes.length){n.selected=this.isNodeSelected(n)}if(n.selected){t++}}return t===e.nodes.length},setHierarchyNode:function(e,t){if(t.selected){e[""]=true}for(var n=0;n<t.nodes.length;n++){e[t.nodes[n].text]={};if(t.nodes[n].nodes.length){this.setHierarchyNode(e[t.nodes[n].text],t.nodes[n])}else{e[t.nodes[n].text]=t.nodes[n].selected}}},toDebugInfo:function(e,t){var n=this.toHierarchy(e),r=[];function i(e,t){var n,s;if(typeof t==="object"){if(t[""]){r.push(e+"/");return}n=Object.keys(t);s=n.length}if(s){n.forEach(function(n){if(n===""){return}if(t[n]===true){r.push((e?e+"/":"")+n)}else if(typeof t[n]==="object"){i((e?e+"/":"")+n,t[n])}})}}if(this.get(n,"/")){return true}i("",n);return r.length>0?r.join(t||","):false},makeRegExp:function(e){if(!/\/\*\*\/$/.test(e)){e=e.replace(/\/$/,"/**/")}return e.replace(/\*\*\/|\*|[[\]{}()+?.\\^$|]/g,function(e){switch(e){case"**/":return"(?:[^/]+/)*";case"*":return"[^/]*";default:return"\\"+e}})},getSelectionCount:function(e){var t=this.toDebugInfo(e);if(t===true){return 1}else if(t){return t.split(",").length}return 0},recursiveSelect:function(e,t){e.selected=t;for(var n=0;n<e.nodes.length;n++){this.recursiveSelect(e.nodes[n],t)}}}});
//# sourceMappingURL=moduleTreeHelper.js.map