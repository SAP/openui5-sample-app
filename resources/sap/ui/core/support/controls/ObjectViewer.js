/*!
 * OpenUI5
 * (c) Copyright 2009-2024 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.define(["sap/ui/base/ManagedObject","sap/base/security/encodeXML"],function(e,t){"use strict";var a=e.extend("sap.ui.core.support.controls.ObjectViewer",{metadata:{library:"sap.ui.core"},constructor:function(){e.apply(this,arguments);this._oRenderParent=null;this._oRootObject=null}});var r={rowstart:'<div class="sapUiSupportObjectViewerMarginLeft {cssclass}" collapsed="{collapsed}" visible="{visible}" idx="{idx}" key="{key}" sectionkey="{sectionkey}" level="{level}" raise="_select" hover="_hover" args="{sectionkey},{key}">',namestart:'<span class="key" title="{key}">',keyinfo:'<span class="keyinfo {color}" selected="{selected}" sectionkey="{sectionkey}" key="{key}" raise="_keyInfoPress" args="{sectionkey},{key},{infoidx}"  title="{tooltip}"></span>',nameend:"{key}</span>",separator:'<span class="colon">:</span>',valuestart:'<span class="value" title="{value}"><input {readonly} class="valueInput"value="{value}" raise="_changeValue" args="{sectionkey},{key}" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false">',valueend:"{value}</span>",rowend:"</div>",headerrow:'<div sectionkey="{sectionkey}" collapsed="{collapsed}" class="header" raise="_toggleSection" args="{sectionkey}"><span class="expand"></span>{header} ({count})</span></div>'};var i=-1;function n(e,a){i++;for(var n in e){var o=a.initialExpandedSections===null||a.initialExpandedSections.indexOf(n)===-1;a.addWithParam(r.headerrow,{idx:i,sectionkey:n,header:n,level:0,collapsed:o,count:Object.keys(e[n]).length});var s=e[n];i++;for(var l in s){a.addWithParam(r.rowstart,{idx:i,sectionkey:n,key:l,level:s._level||0,cssclass:"",visible:!o,header:n,collapsed:o});a.addWithParam(r.namestart,{key:l});var d=a.fnObjectInfos(e,n,s,l);if(d){for(var c=0;c<d.length;c++){var u=d[c];a.addWithParam(r.keyinfo,{infoidx:c+"",sectionkey:n,key:l,selected:u.selected||false,color:u.color||"orange",tooltip:u.tooltip||""})}}a.addWithParam(r.nameend,{key:l});a.addWithParam(r.separator,{});a.addWithParam(r.valuestart,{value:t(String(s[l].value)),readonly:s[l].__change?"":"readonly",sectionkey:n,key:l});a.addWithParam(r.valueend,{value:t(String(s[l].value))});a.addWithParam(r.rowend,{});if("value2"in s[l]){a.addWithParam(r.rowstart,{idx:i,sectionkey:n,key:l,level:s._level||0,cssclass:"hiddenkey",visible:!o,header:n,collapsed:o});a.addWithParam(r.namestart,{key:l});var d=a.fnObjectInfos(e,n,s,l);if(d){for(var c=0;c<d.length;c++){var u=d[c];a.addWithParam(r.keyinfo,{infoidx:c+"",sectionkey:n,key:l,selected:u.selected||false,color:u.color||"orange",tooltip:t(String(u.tooltip)||"")})}}a.addWithParam(r.nameend,{key:l});a.addWithParam(r.separator,{});a.addWithParam(r.valuestart,{value:t(String(s[l].value2)),readonly:"readonly",sectionkey:n,key:l});a.addWithParam(r.valueend,{value:t(String(s[l].value2))});a.addWithParam(r.rowend,{})}}}}function o(){this._aBuffer=[];var e=this;this.add=function(){e._aBuffer.push.apply(e._aBuffer,arguments)};this.addWithParam=function(t,a){for(var r in a){var i=new RegExp("{"+r+"}","g");t=t.replace(i,a[r])}e.add(t)};this.toString=function(){return e._aBuffer.join("")}}a.prototype.fnSelect=function(){};a.prototype.fnHover=function(){};a.prototype.initialExpandedSections=null;a.prototype.expandedSections=[];a.prototype.setRootObject=function(e){this._oRootObject=e};a.prototype.attachSelect=function(e){this.fnSelect=e};a.prototype.attachHover=function(e){this.fnHover=e};a.prototype.attachObjectInfos=function(e){this.fnObjectInfos=e};a.prototype.attachInfoPress=function(e){this.fnInfoPress=e};a.prototype.setInfoSelected=function(e,t,a,r){var i=this._oRenderParent.firstChild.querySelector("[args='"+e+","+t+","+a+"']");if(i){i.setAttribute("selected",r+"")}};a.prototype._keyInfoPress=function(e,t,a){a=parseInt(a);this.fnInfoPress(e,t,a);return true};a.prototype._changeValue=function(e,t,a,r){if(a===undefined){return}var i=this._oRootObject[e][t].__change(a);if(i&&i.error){r.setAttribute("error","true");r.setAttribute("title",i.error)}else{r.removeAttribute("error");if("value"in i){if(a!==""+i.value){r.setAttribute("title",a+"->"+i.value)}else{r.setAttribute("title",i.value)}r.value=i.value}}};a.prototype._toggleSection=function(e){var t=this._oRenderParent.firstChild.querySelectorAll("[sectionkey='"+e+"']");if(t[0].getAttribute("collapsed")==="true"){for(var a=1;a<t.length;a++){t[a].setAttribute("visible","true")}t[0].setAttribute("collapsed","false");if(this.expandedSections.indexOf(e)===-1){this.expandedSections.push(e)}}else{for(var a=1;a<t.length;a++){t[a].setAttribute("visible","false")}t[0].setAttribute("collapsed","true");if(this.expandedSections.indexOf(e)>-1){this.expandedSections.splice(this.expandedSections.indexOf(e),1)}}};a.prototype._select=function(e,t){this.fnSelect(this._oRootObject[e][t],e,t)};a.prototype._hover=function(e,t){this.fnHover(this._oRootObject[e][t],e,t)};a.prototype.update=function(e){if(!e&&!this._oRenderParent){return}if(this._oRenderParent&&e){this._oRenderParent.innerHTML=""}this._oRenderParent=e||this._oRenderParent;if(this._oRootObject){var t=new o;t.initialExpandedSections=this.initialExpandedSections;t.fnObjectInfos=this.fnObjectInfos||function(){};i=-1;t.add('<div class="objectviewer" id="'+this.getId()+'">');if(this._oRootObject){n(this._oRootObject,t)}t.add("</div>");this._oRenderParent.innerHTML=t.toString();var a=this;this._oRenderParent.firstChild.addEventListener("click",function(e){if(e.target.tagName==="INPUT"){return}var t=e.target,r=false,i=[];while(!r){if(t.getAttribute("raise")){if(t.getAttribute("args")){var n=t.getAttribute("args").split(",");n=n.concat(i);r=a[t.getAttribute("raise")].apply(a,n)}else{var n=[t];n=n.concat(i);r=a[t.getAttribute("raise")].apply(a,n)}}else if(t.getAttribute("reason")){i.push(t.getAttribute("reason"))}t=t.parentNode;if(t===a._oRenderParent){break}}});this._oRenderParent.firstChild.addEventListener("mouseover",function(e){var t=e.target,r=false,i=[];while(!r){if(t.getAttribute("hover")){if(t.getAttribute("args")){var n=t.getAttribute("args").split(",");n=n.concat(i);r=a[t.getAttribute("hover")].apply(a,n)}else{var n=[t];n=n.concat(i);r=a[t.getAttribute("hover")].apply(a,n)}}else if(t.getAttribute("reason")){i.push(t.getAttribute("reason"))}t=t.parentNode;if(t===a._oRenderParent){break}}});this._oRenderParent.firstChild.addEventListener("change",function(e){var t=e.target,r=[],i=[t.value,t];if(t.getAttribute("raise")){if(t.getAttribute("args")){var n=t.getAttribute("args").split(",");n=n.concat(r,i);a[t.getAttribute("raise")].apply(a,n)}}});this._oRenderParent.firstChild.addEventListener("mouseout",function(e){var t=e.target,r=false,i=[];while(!r){if(t.getAttribute("hover")){if(t.getAttribute("args")){var n=t.getAttribute("args").split(",");n=n.concat(i);r=a[t.getAttribute("hover")].apply(a,n)}else{var n=[t];n=n.concat(i);r=a[t.getAttribute("hover")].apply(a,n)}}else if(t.getAttribute("reason")){i.push(t.getAttribute("reason"))}t=t.parentNode;if(t===a._oRenderParent){break}}})}};return a});
//# sourceMappingURL=ObjectViewer.js.map