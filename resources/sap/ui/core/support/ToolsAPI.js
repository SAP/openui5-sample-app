/*!
 * OpenUI5
 * (c) Copyright 2009-2024 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.define(["sap/ui/Global","sap/ui/core/AnimationMode","sap/ui/core/Configuration","sap/ui/core/ControlBehavior","sap/ui/core/Element","sap/ui/core/ElementMetadata","sap/ui/core/Supportability","sap/ui/core/Theming","sap/base/util/LoaderExtensions","sap/ui/thirdparty/jquery"],function(e,t,r,n,a,i,o,g,u,jQuery){"use strict";function l(){var t=e.versioninfo?e.versioninfo.libraries:undefined;var r=Object.create(null);if(t!==undefined){t.forEach(function(e,t,n){r[e.name]=e.version})}return r}function d(){var e=sap.ui.getCore().getLoadedLibraries();var t=Object.create(null);Object.keys(sap.ui.getCore().getLoadedLibraries()).forEach(function(r,n,a){t[r]=e[r].version});return t}function c(){var e=new URLSearchParams(window.location.search);return Array.from(e.keys()).reduce(function(t,r){t[r]=e.getAll(r);return t},{})}function s(){return{commonInformation:{version:e.version,buildTime:e.buildinfo.buildtime,lastChange:e.buildinfo.lastchange,jquery:jQuery.fn.jquery,userAgent:navigator.userAgent,applicationHREF:window.location.href,documentTitle:document.title,documentMode:document.documentMode||"",debugMode:o.isDebugModeEnabled(),statistics:o.isStatisticsEnabled()},configurationBootstrap:window["sap-ui-config"]||Object.create(null),configurationComputed:{theme:g.getTheme(),language:r.getLanguage(),formatLocale:r.getFormatLocale(),accessibility:n.isAccessibilityEnabled(),animation:n.getAnimationMode()!==t.minimal&&n.getAnimationMode()!==t.none,rtl:r.getRTL(),debug:o.isDebugModeEnabled(),inspect:o.isControlInspectorEnabled(),originInfo:o.collectOriginInfo(),noDuplicateIds:r.getNoDuplicateIds()},libraries:l(),loadedLibraries:d(),loadedModules:u.getAllRequiredModules().sort(),URLParameters:c()}}var p={_createRenderedTreeModel:function(e,t){var r=e;var n=r.firstElementChild;var i=t;var o=i;var g=a.getElementById(r.id);if(r.getAttribute("data-sap-ui")&&g){i.push({id:g.getId(),name:g.getMetadata().getName(),type:"sap-ui-control",content:[]});o=i[i.length-1].content}else if(r.getAttribute("data-sap-ui-area")){i.push({id:r.id,name:"sap-ui-area",type:"data-sap-ui",content:[]});o=i[i.length-1].content}while(n){this._createRenderedTreeModel(n,o);n=n.nextElementSibling}}};var m={_getOwnProperties:function(e){var t=Object.create(null);var r=e.getMetadata().getProperties();t.meta=Object.create(null);t.meta.controlName=e.getMetadata().getName();t.properties=Object.create(null);Object.keys(r).forEach(function(n){t.properties[n]=Object.create(null);t.properties[n].value=e.getProperty(n);t.properties[n].type=r[n].getType().getName?r[n].getType().getName():""});return t},_copyInheritedProperties:function(e,t){var r=t.getProperties();var n=Object.create(null);n.meta=Object.create(null);n.meta.controlName=t.getName();n.properties=Object.create(null);Object.keys(r).forEach(function(t){n.properties[t]=Object.create(null);n.properties[t].value=r[t].get(e);n.properties[t].type=r[t].getType().getName?r[t].getType().getName():""});return n},_getInheritedProperties:function(e){var t=[];var r=e.getMetadata().getParent();while(r instanceof i){t.push(this._copyInheritedProperties(e,r));r=r.getParent()}return t},_getProperties:function(e){var t=a.getElementById(e);var r=Object.create(null);if(t){r.own=this._getOwnProperties(t);r.inherited=this._getInheritedProperties(t)}return r},_getModelFromContext:function(e,t){var r=e.getBinding(t);var n=r.getModel();var a=e.getBindingInfo(t).parts?e.getBindingInfo(t).parts:[];var i=[];for(var o=0;o<a.length;o++){i.push(a[o].model)}var g={names:i,path:r.getPath()};if(n){g.mode=n.getDefaultBindingMode();g.type=n.getMetadata().getName();g.data=n.getData?n.getData("/"):undefined}return g},_getBindDataForProperties:function(e){var t=e.getMetadata().getAllProperties();var r=Object.create(null);for(var n in t){if(t.hasOwnProperty(n)&&e.getBinding(n)){r[n]=Object.create(null);r[n].path=e.getBinding(n).getPath();r[n].value=e.getBinding(n).getValue();r[n].type=e.getMetadata().getProperty(n).getType().getName?e.getMetadata().getProperty(n).getType().getName():"";r[n].mode=e.getBinding(n).getBindingMode();r[n].model=this._getModelFromContext(e,n)}}return r},_getBindDataForAggregations:function(e){var t=e.getMetadata().getAllAggregations();var r=Object.create(null);for(var n in t){if(t.hasOwnProperty(n)&&e.getBinding(n)){r[n]=Object.create(null);r[n].model=this._getModelFromContext(e,n)}}return r}};return{getFrameworkInformation:s,getRenderedControlTree:function(){var e=[];p._createRenderedTreeModel(document.body,e);return e},getControlProperties:function(e){return m._getProperties(e)},getControlBindings:function(e){var t=Object.create(null);var r=a.getElementById(e);var n;if(!r){return t}n=r.getBindingContext();t.meta=Object.create(null);t.contextPath=n?n.getPath():null;t.aggregations=m._getBindDataForAggregations(r);t.properties=m._getBindDataForProperties(r);return t}}});
//# sourceMappingURL=ToolsAPI.js.map