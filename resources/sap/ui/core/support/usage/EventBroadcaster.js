/*!
 * OpenUI5
 * (c) Copyright 2009-2025 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.define(["sap/base/Log","../../Component","../../Element","../../ElementHooks","../../routing/Router"],function(e,t,n,o,a){"use strict";var i={};var r={global:["modelContextChange","beforeRendering","afterRendering","propertyChanged","beforeGeometryChanged","geometryChanged","aggregationChanged","componentCreated","afterInit","updateStarted","updateFinished","load","scroll"],controls:{}};i.getEventsExcludeList=function(){return JSON.parse(JSON.stringify(r))};i.setEventsExcludeList=function(t){if(this._isValidConfig(t)){r=JSON.parse(JSON.stringify(t))}else{if(e.isLoggable()){e.error("Provided ExcludeList configuration is not valid. Continuing to use previously/default set configuration.")}}};i.enable=function(){o.interceptEvent=function(e,t,n){i.broadcastEvent(e,t,n)};a._interceptRouteMatched=function(e,t){i.broadcastRouteMatched(a.M_EVENTS.ROUTE_MATCHED,e,t)}};i.disable=function(){if(o.interceptEvent){delete o.interceptEvent}if(a._interceptRouteMatched){delete a._interceptRouteMatched}};i.broadcastEvent=function(t,n,o){var a=new Date;setTimeout(function(){var r={},s;if(i._shouldExpose(t,n)){s=i._createOwnerComponentInfo(n);r={componentId:s.id,componentVersion:s.version,eventName:t,targetId:n.getId(),targetType:n.getMetadata().getName(),timestamp:a.getTime()};if(e.isLoggable()){e.debug("EventBroadcaster: Broadcast Event: ",JSON.stringify(r))}r.additionalAttributes=o;i._dispatchCustomEvent(r)}})};i.broadcastRouteMatched=function(t,o,a){var r=new Date;setTimeout(function(){var s=i._createOwnerComponentInfo(n.getElementById(o)),d={componentId:s.id,componentVersion:s.version,eventName:t,targetId:o,targetType:"sap.ui.core.routing.Router",timestamp:r.getTime(),additionalAttributes:{fullURL:document&&document.baseURI,hash:a.getHashChanger().getHash(),previousHash:i._previousHash}};i._previousHash=d.additionalAttributes.hash;if(e.isLoggable()){e.debug("EventBroadcaster: Broadcast Route Matched: ",JSON.stringify(d))}i._dispatchCustomEvent(d)})};i._dispatchCustomEvent=function(e){var t=new window.CustomEvent("UI5Event",{detail:e});window.dispatchEvent(t)};i._shouldExpose=function(e,t){var n=i.getEventsExcludeList(),o=n.global.indexOf(e)===-1&&i._isPublicElementEvent(e,t),a=i._isTrackableControlEvent(n,e,t);return o&&a};i._isTrackableControlEvent=function(e,t,n){var o,a,i=true,r=n.getMetadata().getName();if(e.controls[r]){o=e.controls[r].exclude;a=e.controls[r].include;if(!o&&!a){i=false}if(a&&a.indexOf(t)>-1){i=true}if(o&&o.indexOf(t)>-1){i=false}}return i};i._isPublicElementEvent=function(e,t){return t.getMetadata().hasEvent(e)};i._isValidConfig=function(e){var t=e.hasOwnProperty("global"),n=e.hasOwnProperty("controls");return t&&n};i._createOwnerComponentInfo=function(e){var n,o,a,i;if(e){while(e&&e.getParent){a=t.getOwnerComponentFor(e);if(a||e.getMetadata().isA("sap.ui.core.Component")){a=a||e;i=a.getManifestEntry("sap.app");n=i&&i.id||a.getMetadata().getName();o=i&&i.applicationVersion&&i.applicationVersion.version}e=e.getParent()}}return{id:n||"undetermined",version:o||""}};return i});
//# sourceMappingURL=EventBroadcaster.js.map