/*!
 * OpenUI5
 * (c) Copyright 2009-2024 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.define(["./WaiterBase","sap/ui/thirdparty/jquery"],function(t,jQuery){"use strict";var e={PENDING:"PENDING",LOADED:"LOADED",ERROR:"ERROR"};var r=t.extend("sap.ui.test.autowaiter._ModuleWaiter",{constructor:function(){t.apply(this,arguments);this._aModules=[];var r=this;var s=Object.getOwnPropertyDescriptor(HTMLScriptElement.prototype,"src");Object.defineProperty(HTMLScriptElement.prototype,"src",{set:function(t){if(!this.dataset.sapUiTestModuleWaiterHandled){var i={src:t,state:e.PENDING,script:this};r._aModules.push(i);this.addEventListener("load",function(){i.state=e.LOADED;r._oLogger.trace("Script with src '"+t+"' loaded successfully")});this.addEventListener("error",function(){i.state=e.ERROR;r._oLogger.trace("Script with src '"+t+"' failed to load")});this.dataset.sapUiTestModuleWaiterHandled="true";r._oLogger.trace("Script with src '"+t+"' is tracked")}s.set.call(this,t)},get:s.get})},hasPending:function(){var t=this._aModules.filter(function(t){if(!jQuery(t.script).length){this._oLogger.trace("Script with src '"+t.src+"' was removed");return false}if(t.script.noModule){this._oLogger.trace("Script with src '"+t.src+"' and 'nomodule' will be ignored because the browser supports ES6 modules");return false}return t.state===e.PENDING}.bind(this));var r=t.length>0;if(r){this._oHasPendingLogger.debug("There are "+t.length+" modules still loading");t.forEach(function(t){this._oHasPendingLogger.debug("Pending module: "+t.src)}.bind(this))}return r}});return new r});
//# sourceMappingURL=_moduleWaiter.js.map