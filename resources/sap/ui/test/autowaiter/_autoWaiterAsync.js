/*!
 * OpenUI5
 * (c) Copyright 2009-2024 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.define(["sap/base/util/extend","sap/ui/test/_OpaLogger","sap/ui/test/_ParameterValidator","sap/ui/test/autowaiter/_autoWaiter","sap/ui/test/_LogCollector"],function(e,t,n,i,o){"use strict";var a=t.getLogger("sap.ui.test.autowaiter._autoWaiterAsync");var r=o.getInstance("^sap.ui.test.autowaiter.*#hasPending$");var s=new n({errorPrefix:"sap.ui.test.autowaiter._autoWaiterAsync#extendConfig"});var u;var l;var c={interval:400,timeout:15e3};var g=e({},c);function f(t){h(t);e(g,t);i.extendConfig(g)}function d(){g=e({},c);i.extendConfig(g)}function p(e){if(u){o({error:"waitAsync is already running and cannot be called again at this moment"});return}var t=Date.now();u=true;a.debug("Start polling to check for pending asynchronous work");r.start();n();function n(){var e=Date.now()-t;if(e<=g.timeout){setTimeout(function(){if(i.hasToWait()){l=r.getAndClearLog();n()}else{o({log:"Polling finished successfully. There is no more pending asynchronous work for the moment"});u=false}},g.interval)}else{o({error:"Polling stopped because the timeout of "+g.timeout+" milliseconds has been reached but there is still pending asynchronous work.\n"+"This is the last log of pending work:\n"+l});u=false}}function o(t){if(e){e(t.error)}a.debug(t.error||t.log);r.destroy()}}function h(e){s.validate({allowUnknownProperties:true,inputToValidate:e,validationInfo:{interval:"positivenumeric",timeout:"positivenumeric"}})}return{extendConfig:f,resetConfig:d,waitAsync:p}},true);
//# sourceMappingURL=_autoWaiterAsync.js.map