/*!
 * OpenUI5
 * (c) Copyright 2009-2024 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.define(["sap/ui/test/OpaPlugin","sap/ui/core/Element","sap/ui/core/IntervalTrigger","./WaiterBase"],function(t,i,e,a){"use strict";var r={NAVIGATING:"NAVIGATING",NAVIGATION_END:"NAVIGATION_END"};var n=1e3;var s=a.extend("sap.ui.test.autowaiter._navigationContainerWaiter",{constructor:function(){a.apply(this,arguments);this._bIsTracking=false;this._oTrackedNavigations=new Map;this._initTracking()},_initTracking:function(){if(this._bIsTracking){return}var i=sap.ui.require("sap/m/NavContainer");if(!i){return}function a(t){return t instanceof i}t.getElementRegistry().filter(a).some(function(t){if(t._bNavigating){this._register(t,r.NAVIGATING)}}.bind(this));this._trackNavigationStart(i);this._trackNavigationEnd(i);e.addListener(this._deregisterAllEndedNavigations,this);this._bIsTracking=true},_trackNavigationStart:function(t){var i=t.prototype.fireNavigate,e=this._register.bind(this);t.prototype.fireNavigate=function(){var t=i.apply(this,arguments);if(t){e(this.getId(),r.NAVIGATING)}return t}},_trackNavigationEnd:function(t){var i=t.prototype.fireAfterNavigate,e=this._register.bind(this);t.prototype.fireAfterNavigate=function(){var t;try{t=i.apply(this,arguments)}finally{e(this.getId(),r.NAVIGATION_END)}return t}},_register(t,i){this._oLogger.trace("register","ID: "+t+" Reason: "+i);this._oTrackedNavigations.set(t,{state:i});setTimeout(function(){if(this._oTrackedNavigations.has(t)){this._deregister(t)}}.bind(this),n,"TIMEOUT_WAITER_IGNORE")},_deregister(t){this._oLogger.trace("deregister","ID: "+t+" Reason: "+r.NAVIGATION_END);this._oTrackedNavigations.delete(t)},_deregisterAllEndedNavigations(){this._oTrackedNavigations.forEach(function(t,i){if(t.state===r.NAVIGATION_END){this._deregister(i)}},this)},hasPending:function(){var t=false;this._initTracking();this._oTrackedNavigations.forEach(function(e,a){this._oHasPendingLogger.debug("The NavContainer "+i.getElementById(a)+" is currently navigating");t=true},this);return t}});return new s});
//# sourceMappingURL=_navigationContainerWaiter.js.map