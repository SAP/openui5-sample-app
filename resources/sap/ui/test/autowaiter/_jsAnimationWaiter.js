/*!
 * OpenUI5
 * (c) Copyright 2009-2024 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.define(["sap/base/util/extend","./WaiterBase"],function(t,i){"use strict";var e={PENDING:"PENDING",EXECUTED:"EXECUTED",CANCELLED:"CANCELLED"};var n=null;var a=i.extend("sap.ui.test.autowaiter._jsAnimationWaiter",{constructor:function(){i.apply(this,arguments);this._oTrackedAnimations=new Map;if(window.requestAnimationFrame){var t=window.requestAnimationFrame;window.requestAnimationFrame=function(i){var a,r=Array.prototype.slice.call(arguments,1),o=function(t){n=a;try{i(t)}finally{n=null;this._deregister(a,e.EXECUTED)}}.bind(this);a=t.apply(null,[o].concat(r));this._register(a,e.PENDING);return a}.bind(this)}if(window.cancelAnimationFrame){var a=window.cancelAnimationFrame;window.cancelAnimationFrame=function(t){this._deregister(t,e.CANCELLED);return a(t)}.bind(this)}},_register:function(t,i){this._oLogger.trace("register","ID: "+t+" Reason: "+i);var e=this._oTrackedAnimations.get(n)?.startTime||Date.now();this._oTrackedAnimations.set(t,{startTime:e})},_deregister:function(t,i){this._oLogger.trace("deregister","ID: "+t+" Reason: "+i);this._oTrackedAnimations.delete(t)},_getDefaultConfig:function(){return t({maxDuration:1e3},i.prototype._getDefaultConfig.call(this))},_getValidationInfo:function(){return t({maxDuration:"numeric"},i.prototype._getValidationInfo.call(this))},hasPending:function(){var t=false,i=this._getDefaultConfig().maxDuration,e;for(var n of this._oTrackedAnimations.values()){e=Date.now()-n.startTime;if(e<i){t=true}}this._oLogger.trace("hasPending",t);if(t){this._oHasPendingLogger.debug("jsAnimation in progress")}return t}});return new a});
//# sourceMappingURL=_jsAnimationWaiter.js.map