/*!
 * OpenUI5
 * (c) Copyright 2009-2024 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.define(["sap/base/util/ObjectPath","sap/ui/base/DataType","sap/ui/core/Lib","sap/ui/test/generic/GenericTestCollection","require"],function(e,t,a,n,r){"use strict";var s={loadClass:function(t,a){return new Promise(function(n){var s=a?a:t.replace(/\./g,"/");r([s],function(r){if(a){r=e.get(t)}n({className:t,fnClass:r,error:undefined})},function(a){var r=e.get(t);n({className:t,fnClass:r,error:a})})})},loadAllControls:function(e,t){var n=e.library;var r=e.objectCapabilities||{};var i=[];t=t||{};var o=[];var l=function(){return a.load(n).then(function(e){var a=e?e.controls:[];if(t.includeElements){a=a.concat(e.elements)}a=a.filter(function(e){return!i.includes(e)});if(a.length>0){a.forEach(function(e){var t=r[e]&&r[e].moduleName;o.push(s.loadClass(e,t));i.push(e)});return Promise.all(o).then(l)}return Promise.all(o)})};return l().then(function(e){var t;var a=e.filter(function(e){return e.error!==undefined});e=e.filter(function(e){return!!e.fnClass});if(a.length){QUnit.test("Controls only available in global namespace",function(e){for(t=0;t<a.length;t++){e.ok(false,a[t].className+" seems to be only available using global namespace."+" If the class exists, but is not a module of its own, then specify the module that contains the class within the testsuite config.")}})}return e})},createControlOrElement:function(e,t,a){if(t&&t.create){return t.create(e,a)}else{return new e(a)}},fillControlProperties:function(e,a){var r=e.getMetadata().getAllProperties(),s=a&&a.properties||{},i="test";for(var o in r){var l=r[o],u;if(s[o]){if(n.ExcludeReason.hasOwnProperty(s[o])){u=s[o]}else{i=s[o]}}if(u!==n.ExcludeReason.NotChangeableAfterInit&&u!==n.ExcludeReason.SetterNeedsSpecificSettings&&u!==n.ExcludeReason.OnlyChangeableViaBinding){try{const a=t.getType(l.type);i=a?.getDefaultValue();if(l.type==="int"){i=100}e[l._sMutator](i)}catch(e){}}}try{e.setTooltip("test")}catch(e){QUnit.assert.ok(true,"WARNING: setTooltip is not able to handle strings")}},fillControlAggregations:function(e,a){var r=e.getMetadata(),i=a[r.getName()],o=r.getAggregations();return Promise.all(Object.values(o).map(function(r){var o=r.type;switch(r.type){case"sap.ui.core.Control":o="sap.m.Text";break;case"sap.ui.core.Element":o="sap.ui.core.Icon";break;case"sap.ui.core.Toolbar":o="sap.m.Toolbar";break;default:o=r.type;break}if(i&&i.aggregations&&i.aggregations[r.name]){if(n.ExcludeReason.hasOwnProperty(i.aggregations[r.name])){var l=i.aggregations[r.name];if(l===n.ExcludeReason.NotChangeableAfterInit||l===n.ExcludeReason.SetterNeedsSpecificSettings){return Promise.resolve(undefined)}}else{o=i.aggregations[r.name]}}var u=a[o]&&a[o].moduleName?a[o].moduleName:undefined;if(t.isInterfaceType(o)){return Promise.resolve(undefined)}return s.loadClass(o,u).then(function(t){var a;if(!t.fnClass){QUnit.assert.ok(false,"No class of type "+o+" for aggregation '"+r.name+"' of "+e+" could be loaded. Does this class exist? Is it properly implemented?");return}if(t.fnClass.getMetadata().isAbstract()){return}else{a=new t.fnClass}if(a){e[r._sMutator](a)}return a}).catch(function(){})}))}};return s});
//# sourceMappingURL=Utils.js.map