/*!
 * OpenUI5
 * (c) Copyright 2009-2024 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.define(["sap/ui/core/Element","./Popover","./OverflowToolbarAssociativePopoverControls","./OverflowToolbarAssociativePopoverRenderer","./OverflowToolbarLayoutData","sap/m/library"],function(t,o,e,n,r,s){"use strict";var i=s.PlacementType;var a=s.OverflowToolbarPriority;var c=o.extend("sap.m._overflowToolbarHelpers.OverflowToolbarAssociativePopover",{metadata:{library:"sap.m",associations:{associatedContent:{type:"sap.ui.core.Control",multiple:true}}},renderer:n});c.prototype.init=function(){o.prototype.init.apply(this,arguments);this.oControlsManager=new e};c.prototype.onBeforeRendering=function(){o.prototype.onBeforeRendering.apply(this,arguments);this.addStyleClass("sapMOTAPopover");this.addStyleClass("sapMOverflowToolbarMenu-CTX")};c.prototype.addAssociatedContent=function(t){this.addAssociation("associatedContent",t,true);this._preProcessControl(t);return this};c.prototype.removeAssociatedContent=function(o){var e=this.removeAssociation("associatedContent",o,true),n;if(e){n=t.getElementById(e);if(n){this._postProcessControl(n)}}return e};c.prototype._preProcessControl=function(t){var o=e.getControlConfig(t),n;o.listenForEvents.forEach(function(o){n="attach"+l(o);if(t[n]){t[n](this._closeOnInteraction.bind(this,t))}else{t.attachEvent(o,this._closeOnInteraction.bind(this,t))}},this);if(typeof o.preProcess==="function"){o.preProcess.call(this.oControlsManager,t)}var s=t.getLayoutData();if(s instanceof r&&s.getPriority()===a.Disappear){t.addStyleClass("sapMOTAPHidden")}return this};c.prototype._postProcessControl=function(t){var o=e.getControlConfig(t),n;o.listenForEvents.forEach(function(o){n="detach"+l(o);if(t[n]){t[n](this._closeOnInteraction,this)}else{t.detachEvent(o,this._closeOnInteraction,this)}},this);if(typeof o.postProcess==="function"){o.postProcess.call(this.oControlsManager,t)}t.removeStyleClass("sapMOTAPHidden");t.$().remove();return this};c.prototype._closeOnInteraction=function(t){var o=t.getLayoutData();if(!o||!(o instanceof r)||o.getCloseOverflowOnInteraction()){this.close()}};c.prototype._getContentIdsHash=function(){return this._getAllContent().join(".")};c.prototype._recalculateMargins=function(t,e){if(t!==i.Top){return o.prototype._recalculateMargins.apply(this,arguments)}e._fPopoverMarginBottom=e._fWindowHeight-e._$parent.offset().top+this._arrowOffset+e._fPopoverOffsetY;return e};c.prototype._getAllContent=function(){var o=this.getAssociatedContent().map(function(o){return t.getElementById(o)});if(this.getPlacement()===i.Top){o.reverse()}return this.getContent().concat(o)};c.prototype.getCurrentPosition=function(){if(!this._oCalcedPos){this._calcPlacement()}return this._oCalcedPos};function l(t){return t.substring(0,1).toUpperCase()+t.substring(1)}return c});
//# sourceMappingURL=OverflowToolbarAssociativePopover.js.map