/*!
 * OpenUI5
 * (c) Copyright 2009-2024 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.define(["sap/m/DynamicDateUtil","sap/ui/core/Lib","sap/ui/core/date/UI5Date","sap/ui/model/SimpleType","sap/ui/model/FormatException","sap/ui/model/ParseException","sap/ui/model/ValidateException","sap/base/util/each"],function(e,t,a,i,n,r,o,s){"use strict";var u=i.extend("sap.m.DynamicDate",{constructor:function(){this.sName="DynamicDate";i.apply(this,arguments)}});u.prototype.formatValue=function(t){var a={};if(!t){return}a.operator=t.operator;a.values=t.values.slice(0);var i=e.getOption(t.operator).getValueTypes();a.values=a.values.map(function(e,t){if(i[t]==="date"||i[t]==="datetime"){return p.parse(e)}return e},this);return a};u.prototype.parseValue=function(t){var a={},i;if(!t){return}if(t.operator==="PARSEERROR"){throw new r(t.values[0])}a.operator=t.operator;a.values=t.values.slice(0);i=e.getOption(t.operator).getValueTypes();a.values=a.values.map(function(e,t){if(i[t]==="date"||i[t]==="datetime"){return p.format(e)}return e},this);return a};u.prototype.validateValue=function(i){if(this.oConstraints){var n=t.getResourceBundleFor("sap.ui.core"),r=t.getResourceBundleFor("sap.m"),u=[],p=[],m=e.getOption(i.operator),c=m.toDates(this.formatValue(i)).map(function(e){return e.getTime()});if(c[0]===c[1]){c.length=1}c.forEach(function(e,t){var i="DynamicDate.Invalid"+(t===0?"Start":"End");s(this.oConstraints,function(t,o){switch(t){case"minimum":if(e<o){u.push("minimum");p.push(r.getText(i,[a.getInstance(e).toDateString()]));p.push(n.getText("Date.Minimum",[a.getInstance(o).toDateString()]))}break;case"maximum":if(e>o){u.push("maximum");p.push(r.getText(i,[a.getInstance(e).toDateString()]));p.push(n.getText("Date.Maximum",[a.getInstance(o).toDateString()]))}break}})},this);if(u.length>0){throw new o(this.combineMessages(p),u)}}};var p={format:function(e){if(e instanceof Date){return e.getTime()}return null},parse:function(e){if(isNaN(e)){throw new n("Cannot format date: "+e+" is not a valid Timestamp")}else if(typeof e!=="number"){e=parseInt(e)}e=a.getInstance(e);return e}};return u});
//# sourceMappingURL=DynamicDate.js.map