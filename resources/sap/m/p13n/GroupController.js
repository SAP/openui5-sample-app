/*!
 * OpenUI5
 * (c) Copyright 2009-2024 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.define(["sap/m/p13n/SelectionController","sap/m/p13n/GroupPanel","sap/m/p13n/modules/xConfigAPI"],(t,e,o)=>{"use strict";const n=t.extend("sap.m.p13n.GroupController");n.prototype.getStateKey=()=>"groupLevels";n.prototype.getCurrentState=function(t){const e=o.readConfig(this.getAdaptationControl())||{};const n=e.hasOwnProperty("properties")?e.properties.groupConditions:[];return n||[]};n.prototype.initAdaptationUI=function(t){const o=new e;const n=this.mixInfoAndState(t);const r=this.getAdaptationControl();if(r.isA("sap.m.Table")){o.setQueryLimit(1)}o.setP13nData(n.items);this._oPanel=o;return Promise.resolve(o)};n.prototype.model2State=function(){const t=[];this._oPanel.getP13nData(true).forEach(e=>{if(e.grouped){t.push({key:e.key})}});return t};n.prototype.getChangeOperations=()=>({add:"addGroup",remove:"removeGroup",move:"moveGroup"});n.prototype._getPresenceAttribute=()=>"grouped";n.prototype._createAddRemoveChange=(t,e,o)=>{const n={selectorElement:t,changeSpecificData:{changeType:e,content:o}};return n};n.prototype.mixInfoAndState=function(t){const e=this.getCurrentState();const o=this.arrayToMap(e);const n=this.getAdaptationControl();const r=n.getAggregateConditions?n.getAggregateConditions()||{}:{};const i=this.prepareAdaptationData(t,(t,e)=>{const n=o[e.key];t.grouped=!!n;t.position=n?n.position:-1;return!(e.groupable===false||r[e.key])});this.sortP13nData({visible:"grouped",position:"position"},i.items);i.presenceAttribute=this._getPresenceAttribute();i.items.forEach(t=>{delete t.position});return i};n.prototype.applyChange=t=>Promise.resolve();return n});
//# sourceMappingURL=GroupController.js.map