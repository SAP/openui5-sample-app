/*!
 * OpenUI5
 * (c) Copyright 2009-2024 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.define(["sap/m/p13n/SelectionController","sap/m/p13n/GroupPanel","sap/m/p13n/modules/xConfigAPI"],function(t,e,o){"use strict";var r=t.extend("sap.m.p13n.subcontroller.GroupController");r.prototype.getStateKey=function(){return"groupLevels"};r.prototype.getCurrentState=function(t){var e=o.readConfig(this.getAdaptationControl())||{};var r=e.hasOwnProperty("properties")?e.properties.groupConditions:[];return r||[]};r.prototype.initAdaptationUI=function(t){var o=new e;var r=this.mixInfoAndState(t);var n=this.getAdaptationControl();if(n.isA("sap.m.Table")){o.setQueryLimit(1)}o.setP13nData(r.items);this._oPanel=o;return Promise.resolve(o)};r.prototype.model2State=function(){var t=[];this._oPanel.getP13nData(true).forEach(function(e){if(e.grouped){t.push({key:e.key})}});return t};r.prototype.getChangeOperations=function(){return{add:"addGroup",remove:"removeGroup",move:"moveGroup"}};r.prototype._getPresenceAttribute=function(){return"grouped"};r.prototype._createAddRemoveChange=function(t,e,o){var r={selectorElement:t,changeSpecificData:{changeType:e,content:o}};return r};r.prototype.mixInfoAndState=function(t){var e=this.getCurrentState();var o=this.arrayToMap(e);var r=this.getAdaptationControl();var n=r.getAggregateConditions?r.getAggregateConditions()||{}:{};var i=this.prepareAdaptationData(t,function(t,e){var r=o[e.key];t.grouped=!!r;t.position=r?r.position:-1;return!(e.groupable===false||n[e.key])});this.sortP13nData({visible:"grouped",position:"position"},i.items);i.presenceAttribute=this._getPresenceAttribute();i.items.forEach(function(t){delete t.position});return i};r.prototype.applyChange=function(t){return Promise.resolve()};return r});
//# sourceMappingURL=GroupController.js.map