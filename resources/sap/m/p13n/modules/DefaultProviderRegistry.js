/*!
 * OpenUI5
 * (c) Copyright 2009-2023 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.define(["sap/ui/base/Object","sap/m/p13n/PersistenceProvider","sap/ui/fl/apply/api/ControlVariantApplyAPI"],function(e,t,r){"use strict";var i="DefaultProviderRegistry: This class is a singleton and should not be used without an AdaptationProvider. Please use 'Engine.getInstance().defaultProviderRegistry' instead";var o;var n=e.extend("sap.m.p13n.modules.DefaultProviderRegistry",{constructor:function(t){if(o){throw Error(i)}e.call(this);this._mDefaultProviders={};this._oEngine=t}});n.prototype.destroy=function(){Object.keys(this._mDefaultProviders).forEach(function(e){this._mDefaultProviders[e].destroy();delete this._mDefaultProviders[e]}.bind(this));this._oEngine=null;o=null;e.prototype.destroy.apply(this,arguments)};n.prototype.attach=function(e,t){if(this._oEngine.isRegisteredForModification(e)){throw new Error("DefaultProviderRegistry: You must not change the modificationSettings for an already registered element")}var i=typeof e==="string"?sap.ui.getCore().byId(e):e,o=typeof e==="string"?e:e.getId();var n=this._retrieveDefaultProvider(i,t);if(n.getFor().indexOf(o)===-1){n.addFor(e)}var a=this._mDefaultProviders[t];var s=function(){var e=i.getModel(r.getVariantModelName());if(e){a.setModel(e,r.getVariantModelName());i.detachEvent("modelContextChange",s)}};i.attachEvent("modelContextChange",s);return n};n.prototype.detach=function(e){Object.keys(this._mDefaultProviders).forEach(function(t){var r=this._mDefaultProviders[t];r.removeFor(e)}.bind(this))};n.prototype._retrieveDefaultProvider=function(e,r){if(!this._mDefaultProviders[r]){var i=new t("defaultProviderRegistry"+r,{mode:r});this._mDefaultProviders[r]=i}return this._mDefaultProviders[r]};n.getInstance=function(e){if(!o){o=new n(e)}return o};return n});
//# sourceMappingURL=DefaultProviderRegistry.js.map