/*!
 * OpenUI5
 * (c) Copyright 2009-2024 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.define(["sap/base/i18n/Localization","sap/ui/core/Element","sap/ui/unified/calendar/CalendarDate","sap/ui/unified/calendar/CalendarUtils","sap/ui/core/date/UniversalDate","sap/ui/core/IconPool","sap/ui/core/InvisibleText","./PlanningCalendarLegend","sap/ui/unified/library","sap/ui/core/date/UI5Date"],function(e,t,a,l,n,r,s,o,i,d){"use strict";var p=.125;var c=.125;var g=.0625;var S=i.CalendarDayType;var u={apiVersion:2};u.render=function(e,t){e.openStart("div",t);e.class("sapMSinglePCGrid");e.openEnd();e.renderControl(t.getAggregation("_columnHeaders"));this.renderBlockersContainer(e,t);e.openStart("div");e.attr("role","grid");e.class("sapMSinglePCGridContent");e.openEnd();this.renderRowHeaders(e,t);this.renderNowMarker(e,t);this.renderColumns(e,t);e.close("div");e.close("div")};u.renderBlockersContainer=function(e,n){var r=n._getColumns(),i=n._getBlockersToRender().iMaxlevel,d=n.getStartDate(),p=(i+1)*n._getBlockerRowHeight()+.1875,c=n._getDateFormatter(),g=n._getSpecialDates(),S=a.fromLocalJSDate(d),u=n._getColumnHeaders()._getDateTypes(S),f,C;e.openStart("div");e.attr("role","grid");e.class("sapMSinglePCBlockersRow");e.openEnd();e.openStart("div");e.attr("role","row");e.class("sapMSinglePCBlockersColumns");if(g&&n._getColumns()===1){if(u&&u[0]){f=u[0];e.class("sapUiCalItem"+f.type);C=o.findLegendItemForItem(t.getElementById(n._sLegendId),f)}e.class("sapMSpecialDaysInDayView")}e.style("height",p+"rem");e.openEnd();this.renderDndPlaceholders(e,n,n.getAggregation("_blockersPlaceholders"));for(var m=0;m<r;m++){var v=new a(d.getFullYear(),d.getMonth(),d.getDate()+m);e.openStart("div");e.attr("role","gridcell");e.attr("data-sap-start-date",c.format(v.toLocalJSDate()));e.attr("data-sap-end-date",c.format(v.toLocalJSDate()));e.attr("aria-labelledby",s.getStaticId("sap.m","SPC_BLOCKERS")+" "+"fullDay-"+c.format(v.toLocalJSDate())+"-Descr");e.class("sapMSinglePCBlockersColumn");e.attr("tabindex",-1);if(n._checkDateSelected(v)&&r>1){this.renderSelectedRowBorders(e,n,m,v,r,"Blocker")}if(v.isSame(new a)){e.class("sapMSinglePCBlockersColumnToday")}if(l._isWeekend(v,n._getCoreLocaleData())){e.class("sapMSinglePCBlockersColumnWeekend")}e.openEnd();e.openStart("span","fullDay-"+c.format(v.toLocalJSDate())+"-Descr");e.class("sapUiInvisibleText");e.openEnd();e.text(n._getCellStartEndInfo(v.toLocalJSDate()));if(n._sLegendId&&C){e.text(C)}e.close("span");e.close("div")}this.renderBlockers(e,n);e.close("div");e.close("div")};u.renderSelectedRowBorders=function(e,t,l,n,r,s){var o=new a(n.toLocalJSDate().getFullYear(),n.toLocalJSDate().getMonth(),n.toLocalJSDate().getDate()-1);var i=new a(n.toLocalJSDate().getFullYear(),n.toLocalJSDate().getMonth(),n.toLocalJSDate().getDate()+1);e.class("sapUiCalColumnSelected");if(l==0&&t._checkDateSelected(i)){e.class("sapUiCalColumnSelectedStart"+s)}else if(l==0&&!t._checkDateSelected(i)){e.class("sapUiCalColumnSingleSelect"+s)}else if(l===r-1&&t._checkDateSelected(o)){e.class("sapUiCalColumnSelectedEnd"+s)}else if(l===r-1&&!t._checkDateSelected(o)){e.class("sapUiCalColumnSingleSelect"+s)}else if(t._checkDateSelected(o)&&t._checkDateSelected(i)){e.class("sapUiCalColumnSelectedBetween"+s)}else if(t._checkDateSelected(o)){e.class("sapUiCalColumnSelectedEnd"+s)}else if(t._checkDateSelected(i)){e.class("sapUiCalColumnSelectedStart"+s)}else{e.class("sapUiCalColumnSingleSelect"+s)}};u.renderBlockers=function(e,t){var a=this,l=t._getBlockersToRender().oBlockersList;e.openStart("div");e.attr("role","list");e.attr("aria-labelledby",s.getStaticId("sap.m","SPC_BLOCKERS"));e.class("sapMSinglePCBlockers");e.class("sapUiCalendarRowVisFilled");e.openEnd();l.getIterator().forEach(function(l){a.renderBlockerAppointment(e,t,l)});e.close("div")};u.renderBlockerAppointment=function(t,n,r){var o=a.fromLocalJSDate(n.getStartDate()),i=r.getData(),d=a.fromLocalJSDate(i.getStartDate()),p=a.fromLocalJSDate(i.getEndDate()),c=l._daysBetween(d,o),g=l._daysBetween(p,o),u=n._getColumns(),f=n._getBlockerRowHeight(),C=r.level,m=r.width,v=i.getTooltip_AsString(),b=i.getType(),_=i.getColor(),A=i.getTitle(),D=i.getText(),h=i.getIcon(),M=i.getId(),T={role:"listitem",labelledby:{value:s.getStaticId("sap.ui.unified","CALENDAR_ALL_DAY_PREFIX"),append:true},selected:null},y=n.getAriaLabelledBy(),E=c*(100/u),w=(u-g-1)*(100/u),P=e.getRTL(),I;if(y.length>0){T["labelledby"].value=T["labelledby"].value+" "+y.join(" ")}if(A){T["labelledby"].value=T["labelledby"].value+" "+M+"-Title"}T["labelledby"].value=T["labelledby"].value+" "+M+"-Descr";if(D){T["labelledby"].value=T["labelledby"].value+" "+M+"-Text"}if(i.getTentative()){T["labelledby"].value=T["labelledby"].value+" "+s.getStaticId("sap.ui.unified","APPOINTMENT_TENTATIVE")}if(i.getSelected()){T["describedby"]={value:s.getStaticId("sap.ui.unified","APPOINTMENT_SELECTED"),append:true}}t.openStart("div",i);t.attr("data-sap-level",C);t.attr("data-sap-width",m);t.attr("tabindex",0);if(v){t.attr("title",v)}t.accessibilityState(i,T);t.class("sapMSinglePCAppointmentWrap");t.class("sapUiCalendarRowApps");if(!_&&b!==S.None){t.class("sapUiCalendarApp"+b)}if(_){if(e.getRTL()){t.style("border-right-color",_)}else{t.style("border-left-color",_)}}t.style("top",f*C+.0625+"rem");t.style(P?"right":"left",Math.max(E,0)+"%");t.style(P?"left":"right",Math.max(w,0)+"%");t.openEnd();t.openStart("div");t.class("sapUiCalendarApp");if(i.getSelected()){t.class("sapUiCalendarAppSel")}if(i.getTentative()){t.class("sapUiCalendarAppTent")}if(h){t.class("sapUiCalendarAppWithIcon")}t.openEnd();t.openStart("div");t.class("sapUiCalendarAppCont");if(_&&!i.getSelected()){t.style("background-color",i._getCSSColorForBackground(_))}t.openEnd();if(E<0){I=["sapUiCalendarAppArrowIconLeft","sapUiCalendarAppArrowIcon"];t.icon("sap-icon://arrow-left",I,{title:null,role:"img"})}if(h){I=["sapUiCalendarAppIcon"];var U={};U["id"]=M+"-Icon";U["title"]=null;U["role"]="img";t.icon(h,I,U)}if(A){t.openStart("span",M+"-Title");t.class("sapUiCalendarAppTitle");t.openEnd();t.text(A,true);t.close("span")}if(w<0){I=["sapUiCalendarAppArrowIconRight","sapUiCalendarAppArrowIcon"];t.icon("sap-icon://arrow-right",I,{title:null,role:"img"})}t.openStart("span",M+"-Descr");t.class("sapUiInvisibleText");t.openEnd();t.text(n._getAppointmentAnnouncementInfo(i));t.close("span");t.close("div");t.close("div");t.close("div")};u.renderRowHeaders=function(e,t){var a=t._getVisibleStartHour(),l=t._getVisibleEndHour(),n=d.getInstance(),r=t._getHoursFormat(),s=t._getAMPMFormat();e.openStart("div");e.class("sapMSinglePCRowHeaders");e.openEnd();for(var o=a;o<=l;o++){n.setHours(o);e.openStart("span");e.class("sapMSinglePCRowHeader");e.class("sapMSinglePCRowHeader"+o);if(t._shouldHideRowHeader(o)){e.class("sapMSinglePCRowHeaderHidden")}e.openEnd();e.text(r.format(n));if(t._hasAMPM()){e.openStart("span");e.class("sapMSinglePCRowHeaderAMPM");e.openEnd();e.text(" "+s.format(n));e.close("span")}e.close("span")}e.close("div")};u.renderColumns=function(e,t){var l=t._getColumns(),n=t.getStartDate(),r=t._getAppointmentsToRender();e.openStart("div");e.attr("role","grid");e.attr("aria-labelledby",s.getStaticId("sap.m","SPC_APPOINTMENTS"));e.class("sapMSinglePCColumns");e.openEnd();for(var o=0;o<l;o++){var i=new a(n.getFullYear(),n.getMonth(),n.getDate()+o),d=t._getDateFormatter(),p=d.format(i.toLocalJSDate());e.openStart("div");e.attr("role","row");e.attr("data-sap-day",p);e.class("sapMSinglePCColumn");if(t._checkDateSelected(i)&&l>1){this.renderSelectedRowBorders(e,t,o,i,l,"Column")}if(i.isSame(new a)){e.class("sapMSinglePCColumnToday")}if(t._isNonWorkingDay(i)){e.class("sapMSinglePCColumnWeekend")}e.openEnd();this.renderDndPlaceholders(e,t,t._dndPlaceholdersMap[i]);this.renderRows(e,t,p);this.renderAppointments(e,t,r[p],i,o);e.close("div")}e.close("div")};u.renderDndPlaceholders=function(e,t,a){e.openStart("div");e.class("sapMSinglePCOverlay");e.openEnd();a.forEach(e.renderControl,e);e.close("div")};u.renderRows=function(e,t,a){var l=t._getVisibleStartHour(),n=t._getVisibleEndHour(),r=t._getDateFormatter(),s,o;for(var i=l;i<=n;i++){s=t._parseDateStringAndHours(a,i);o=d.getInstance(s.getFullYear(),s.getMonth(),s.getDate(),s.getHours()+1);e.openStart("div");e.attr("role","gridcell");e.class("sapMSinglePCRow");if(!t._isVisibleHour(i)){e.class("sapMSinglePCNonWorkingRow")}e.attr("data-sap-hour",i);e.attr("data-sap-start-date",r.format(s));e.attr("data-sap-end-date",r.format(o));e.attr("aria-labelledby",r.format(s)+"-Descr");e.attr("tabindex",-1);e.openEnd();e.openStart("span",r.format(s)+"-Descr");e.class("sapUiInvisibleText");e.openEnd();e.text(t._getCellStartEndInfo(s,o));e.close("span");e.close("div")}};u.renderAppointments=function(e,t,a,l,n){var r=this,s=0;if(a){e.openStart("div");e.attr("role","list");e.class("sapMSinglePCAppointments");e.class("sapUiCalendarRowVisFilled");e.openEnd();a.oAppointmentsList.getIterator().forEach(function(o){var i=a.iMaxLevel,d=o.level,p=o.width,c=o.getData();r.renderAppointment(e,t,i,d,p,c,l,n,s);s++});e.close("div")}};u.renderAppointment=function(t,r,o,i,d,u,f,C,m){var v=a.fromLocalJSDate(r.getStartDate()),b=new a(v),_=r._getRowHeight(),A=new n(f.getYear(),f.getMonth(),f.getDate(),r._getVisibleStartHour()),D=new n(f.getYear(),f.getMonth(),f.getDate(),r._getVisibleEndHour(),59,59),h=u.getStartDate(),M=u.getEndDate(),T=a.fromLocalJSDate(h),y=a.fromLocalJSDate(M),E=u.getTooltip_AsString(),w=u.getType(),P=u.getColor(),I=u.getTitle(),U=u.getText(),k=u.getIcon(),L=u.getId(),R=u.getCustomContent(),B=!!R.length,x=this._getLineClamp(h,M),H={role:"listitem",labelledby:{value:s.getStaticId("sap.ui.unified","APPOINTMENT"),append:true},selected:null},N=r.getAriaLabelledBy(),J=A.getTime()>h.getTime(),F=D.getTime()<M.getTime(),V=J?0:r._calculateTopPosition(h),W=F?0:r._calculateBottomPosition(M),O=100/(o+1),Y=u.getParent().getEnableAppointmentsDragAndDrop(),z=r.getProperty("scaleFactor"),j=2*z,G,K,X,q,Q;b.setDate(b.getDate()+r._getColumns()-1);G=l._daysBetween(T,v);K=l._daysBetween(b,y);X=f.isSame(v);q=f.isSame(b);if(N.length>0){H["labelledby"].value=H["labelledby"].value+" "+N.join(" ")}if(!B&&I){H["labelledby"].value=H["labelledby"].value+" "+L+"-"+C+"_"+m+"-Title"}H["labelledby"].value=H["labelledby"].value+" "+L+"-"+C+"_"+m+"-Descr";if(!B&&U){H["labelledby"].value=H["labelledby"].value+" "+L+"-"+C+"_"+m+"-Text"}if(u.getTentative()){H["labelledby"].value=H["labelledby"].value+" "+s.getStaticId("sap.ui.unified","APPOINTMENT_TENTATIVE")}if(u.getSelected()){H["describedby"]={value:s.getStaticId("sap.ui.unified","APPOINTMENT_SELECTED"),append:true}}t.openStart("div",u.getId()+"-"+C+"_"+m);t.attr("draggable",Y);t.attr("data-sap-ui-draggable",Y);t.attr("data-sap-ui-related",u.getId());t.attr("data-sap-level",i);t.attr("data-sap-width",d);t.attr("tabindex",0);if(E){t.attr("title",E)}t.accessibilityState(u,H);t.class("sapMSinglePCAppointmentWrap");t.class("sapUiCalendarRowApps");if(!P&&w!==S.None){t.class("sapUiCalendarApp"+w)}if(P){if(e.getRTL()){t.style("border-right-color",P)}else{t.style("border-left-color",P)}}t.style("top",V+"rem");t.style("bottom",W+"rem");t.style(e.getRTL()?"right":"left",O*i+"%");t.style("width",O*d+"%");t.openEnd();t.openStart("div");t.class("sapUiCalendarApp");t.style("min-height",(_-(p+c+g)*z)/j+"rem");if(u.getSelected()){t.class("sapUiCalendarAppSel")}if(u.getTentative()){t.class("sapUiCalendarAppTent")}if(!B&&k){t.class("sapUiCalendarAppWithIcon")}t.openEnd();t.openStart("div");t.class("sapUiCalendarAppCont");if(P&&!u.getSelected()){t.style("background-color",u._getCSSColorForBackground(P))}t.openEnd();if(X&&G<0){Q=["sapUiCalendarAppArrowIconLeft","sapUiCalendarAppArrowIcon"];t.icon("sap-icon://arrow-left",Q,{title:null,role:"img"})}if(!B&&k){Q=["sapUiCalendarAppIcon"];var Z={};Z["id"]=L+"-Icon";Z["title"]=null;Z["role"]="img";t.icon(k,Q,Z)}t.openStart("div");t.class("sapUiCalendarAppTitleWrapper");t.class("sapUiSPCAppLineClamp"+x);t.openEnd();if(!B&&I){t.openStart("span",L+"-"+C+"_"+m+"-Title");t.class("sapUiCalendarAppTitle");t.openEnd();t.text(I,true);t.close("span")}if(!B&&U){t.openStart("span",L+"-"+C+"_"+m+"-Text");t.class("sapUiCalendarAppText");t.openEnd();t.text(U,true);t.close("span")}if(B){R.forEach(function(e){t.renderControl(e)})}t.close("div");if(q&&K<0){Q=["sapUiCalendarAppArrowIconRight","sapUiCalendarAppArrowIcon"];t.icon("sap-icon://arrow-right",Q,{title:null,role:"img"})}t.openStart("span",L+"-"+C+"_"+m+"-Descr");t.class("sapUiInvisibleText");t.openEnd();t.text(r._getAppointmentAnnouncementInfo(u));t.close("span");t.close("div");if(r.getEnableAppointmentsResize()){this.renderResizeHandles(t,!J,!F)}t.close("div");t.close("div")};u.renderNowMarker=function(e,t){var a=d.getInstance();e.openStart("div",t.getId()+"-nowMarker");e.style("top",t._calculateTopPosition(a)+"rem");e.class("sapMSinglePCNowMarker");if(!t._isVisibleHour(a.getHours())){e.class("sapMSinglePCNowMarkerHidden")}e.openEnd();e.openStart("span",t.getId()+"-nowMarkerText");e.class("sapMSinglePCNowMarkerText");e.openEnd();e.text(t._formatTimeAsString(a));if(t._hasAMPM()){e.openStart("span",t.getId()+"-nowMarkerAMPM");e.class("sapMSinglePCNowMarkerAMPM");e.openEnd();e.text(t._addAMPM(a));e.close("span")}e.close("span");e.close("div")};u.renderResizeHandles=function(e,t,a){if(a){e.openStart("span");e.class("sapMSinglePCAppResizeHandleBottom");e.openEnd();e.close("span")}if(t){e.openStart("span");e.class("sapMSinglePCAppResizeHandleTop");e.openEnd();e.close("span")}};u._getLineClamp=function(e,t){var a=l._minutesBetween(e,t);if(a>=51&&a<69){return"2"}else if(a>=69&&a<90){return"3"}else if(a>=90&&a<110){return"4"}else if(a>=110&&a<130){return"5"}else if(a>=130&&a<150){return"6"}else if(a>=150&&a<170){return"7"}else if(a>=170&&a<190){return"8"}else if(a>=190){return"9"}else{return"1"}};return u},true);
//# sourceMappingURL=SinglePlanningCalendarGridRenderer.js.map