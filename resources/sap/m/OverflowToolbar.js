/*!
 * OpenUI5
 * (c) Copyright 2009-2024 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.define(["sap/ui/core/Theming","sap/ui/core/library","./library","sap/ui/core/Control","sap/ui/core/Element","sap/m/ToggleButton","sap/ui/core/InvisibleText","sap/m/Toolbar","sap/m/OverflowToolbarLayoutData","sap/m/OverflowToolbarAssociativePopover","sap/m/OverflowToolbarAssociativePopoverControls","sap/ui/core/ResizeHandler","sap/ui/core/IconPool","sap/ui/Device","./OverflowToolbarRenderer","sap/base/Log","sap/ui/core/Lib","sap/ui/thirdparty/jquery","sap/ui/dom/jquery/Focusable"],function(t,o,e,i,n,r,s,l,a,h,f,u,d,p,_,c,C,jQuery){"use strict";var v=e.PlacementType;var g=e.ButtonType;var y=o.aria.HasPopup;var b=e.OverflowToolbarPriority;var O=l.extend("sap.m.OverflowToolbar",{metadata:{properties:{asyncMode:{type:"boolean",group:"Behavior",defaultValue:false}},aggregations:{_overflowButton:{type:"sap.m.ToggleButton",multiple:false,visibility:"hidden"},_popover:{type:"sap.m.Popover",multiple:false,visibility:"hidden"}},designtime:"sap/m/designtime/OverflowToolbar.designtime"},renderer:_});O.TOGGLE_BUTTON_TOOLTIP="OVERFLOW_TOOLBAR_TOGGLE_BUTTON_TOOLTIP";O.CONTENT_SIZE_TOLERANCE=1;O.prototype._callToolbarMethod=function(t,o){return l.prototype[t].apply(this,o)};O.prototype.init=function(){this._callToolbarMethod("init",arguments);this._iPreviousToolbarWidth=null;this._bOverflowButtonNeeded=false;this._bListenForControlPropertyChanges=false;this._bListenForInvalidationEvents=false;this._bControlsInfoCached=false;this._bSkipOptimization=false;this._aControlSizes={};this._iFrameRequest=null;this._iOverflowToolbarButtonSize=0;this._oOverflowToolbarButtonClone=null;this._iToolbarOnlyContentSize=0;this._aMovableControls=[];this._aToolbarOnlyControls=[];this._aPopoverOnlyControls=[];this._aAllCollections=[this._aMovableControls,this._aToolbarOnlyControls,this._aPopoverOnlyControls];this.addStyleClass("sapMOTB");this._fnMediaChangeRef=this._fnMediaChange.bind(this);p.media.attachHandler(this._fnMediaChangeRef)};O.prototype.exit=function(){var t=this.getAggregation("_popover");if(t){t.destroy()}if(this._oOverflowToolbarButtonClone){this._oOverflowToolbarButtonClone.destroy()}if(this._iFrameRequest){window.cancelAnimationFrame(this._iFrameRequest);this._iFrameRequest=null}p.media.detachHandler(this._fnMediaChangeRef)};O.prototype.enhanceAccessibilityState=function(t,o){l.prototype.enhanceAccessibilityState.apply(this,arguments);if(t===this.getAggregation("_overflowButton")){this._enhanceOverflowButtonAccessibility(o)}};O.prototype._enhanceOverflowButtonAccessibility=function(t){var o=this.getAggregation("_popover"),e=this.getAggregation("_overflowButton");if(!e){return}t.expanded=e.getPressed();delete t.pressed;if(o&&o.getDomRef()){t.controls=o.getId()}};O.prototype.setAsyncMode=function(t){return this.setProperty("asyncMode",t,true)};O.prototype.onBeforeRendering=function(){if(!this.getDomRef()){this._bControlsInfoCached=false}};O.prototype.onAfterRendering=function(){this._bInvalidatedAndNotRendered=false;if(this._bContentVisibilityChanged){this._bControlsInfoCached=false;this._bContentVisibilityChanged=false}if(this.getAsyncMode()){this._doLayoutAsync().then(this._applyFocus.bind(this))}else{this._doLayout();this._applyFocus()}};O.prototype.onsapfocusleave=function(){this._resetChildControlFocusInfo()};O.prototype.onfocusfail=function(t){const o=t.srcControl;const e=this._getOverflowButton();const i=this.getDomRef();if(!i.contains(o.getDomRef())){e?.focus();this._bControlWasFocused=false;this._bOverflowButtonWasFocused=!!e;this.sFocusedChildControlId=""}else{const t=this.getContent();const n=t.indexOf(o);if(n!==-1){let o;for(let e=n+1;e<t.length;e++){const n=t[e].getFocusDomRef?.();if(i.contains(n)&&jQuery.expr.pseudos.sapTabbable(n)){o=t[e];break}}o??=e;o?.focus();this._bControlWasFocused=!e;this._bOverflowButtonWasFocused=!!e;this.sFocusedChildControlId=o===e?"":o.getId()}}};O.prototype.setWidth=function(t){this.setProperty("width",t);this._bResized=true;return this};O.prototype._doLayout=function(){var t;this._recalculateOverflowButtonSize();t=this.$().is(":visible")?this.$().width():0;this._bListenForControlPropertyChanges=false;this._bListenForInvalidationEvents=false;this._deregisterToolbarResize();if(this._iPreviousToolbarWidth!==t){this._bResized=true}if(t>0){if(!this._isControlsInfoCached()||this._bNeedUpdateOnControlsCachedSizes&&this._bResized){this._cacheControlsInfo()}if(this._iPreviousToolbarWidth!==t){this._iPreviousToolbarWidth=t;this._setControlsOverflowAndShrinking(t);this.fireEvent("_controlWidthChanged")}}else{this._iPreviousToolbarWidth=t}this._registerToolbarResize();this._bListenForControlPropertyChanges=true;this._bListenForInvalidationEvents=true;this._bResized=false};O.prototype._doLayoutAsync=function(){return new Promise(function(t,o){this._iFrameRequest=window.requestAnimationFrame(function(){this._doLayout();t()}.bind(this))}.bind(this))};O.prototype._applyFocus=function(){var t,o=this.$().lastFocusableDomRef();if(this.sFocusedChildControlId){t=n.getElementById(this.sFocusedChildControlId)}if(t&&t.getDomRef()){t.focus()}else if(this._bControlWasFocused){this._getOverflowButton().focus();this._bControlWasFocused=false;this._bOverflowButtonWasFocused=true}else if(this._bOverflowButtonWasFocused){if(this._getOverflowButtonNeeded()){this._getOverflowButton().focus()}else{o&&o.focus();this._bOverflowButtonWasFocused=false}}};O.prototype._preserveChildControlFocusInfo=function(){var t=n.closestTo(document.activeElement);var o=t?t.getId():null;if(this._getControlsIds().indexOf(o)!==-1){this._bControlWasFocused=true;this.sFocusedChildControlId=o}else if(o===this._getOverflowButton().getId()){this._bOverflowButtonWasFocused=true;this.sFocusedChildControlId=""}};O.prototype._resetChildControlFocusInfo=function(){this._bControlWasFocused=false;this._bOverflowButtonWasFocused=false;this.sFocusedChildControlId=""};O.prototype._registerToolbarResize=function(){if(l.isRelativeWidth(this.getWidth())){var t=this._handleResize.bind(this);this._sResizeListenerId=u.register(this,t)}};O.prototype._deregisterToolbarResize=function(){if(this._sResizeListenerId){u.deregister(this._sResizeListenerId);this._sResizeListenerId=""}};O.prototype._handleResize=function(){this._bResized=true;if(this._bInvalidatedAndNotRendered){return}this._callDoLayout()};O.prototype._fnMediaChange=function(){this._bControlsInfoCached=false;this._iPreviousToolbarWidth=null;this._callDoLayout()};O.prototype._callDoLayout=function(){if(this.getAsyncMode()){this._doLayoutAsync()}else{this._doLayout()}};O.prototype._cacheControlsInfo=function(){var t,o,e=parseInt(this.$().css("padding-right"))||0,i=parseInt(this.$().css("padding-left"))||0,n=this._getOverflowButtonSize(),r=this._iToolbarOnlyContentSize;this._iOldContentSize=this._iContentSize;this._iContentSize=0;this._iToolbarOnlyContentSize=0;this._bNeedUpdateOnControlsCachedSizes=false;this.getContent().forEach(this._updateControlsCachedSizes,this);if(r!==this._iToolbarOnlyContentSize){this.fireEvent("_minWidthChange",{minWidth:this._iToolbarOnlyContentSize>0?this._iToolbarOnlyContentSize+n:0})}if(p.system.phone){this._iContentSize-=1}if(this._aPopoverOnlyControls.length){t=this._aPopoverOnlyControls.filter(function(t){return t.getVisible()});o=t.length>0;if(o){this._iContentSize+=n}}this._bControlsInfoCached=true;if(this._iOldContentSize!==this._iContentSize){this.fireEvent("_contentSizeChange",{contentSize:this._iContentSize+e+i+1})}};O.prototype._updateControlsCachedSizes=function(t){var o,e,i;o=this._getControlPriority(t);e=this._calculateControlSize(t);this._aControlSizes[t.getId()]=e;i=l.getOrigWidth(t.getId());if(i&&l.isRelativeWidth(i)){this._bNeedUpdateOnControlsCachedSizes=true}if(o!==b.AlwaysOverflow){this._iContentSize+=e}if(o===b.NeverOverflow){this._iToolbarOnlyContentSize+=e}};O.prototype._calculateControlSize=function(t){return this._getOptimalControlWidth(t,this._aControlSizes[t.getId()])};O.prototype._isControlsInfoCached=function(){return this._bControlsInfoCached};O.prototype._flushButtonsToPopover=function(){this._aButtonsToMoveToPopover.forEach(this._moveButtonToPopover,this)};O.prototype._invalidateIfHashChanged=function(t){if(typeof t==="undefined"||this._getPopover()._getContentIdsHash()!==t){this._preserveChildControlFocusInfo();this.invalidate()}};O.prototype._addOverflowButton=function(){if(!this._getOverflowButtonNeeded()){this._iCurrentContentSize+=this._getOverflowButtonSize();this._setOverflowButtonNeeded(true)}};O.prototype._aggregateMovableControls=function(){var t={},o=[],e,i,n,r,s;this._aMovableControls.forEach(function(l){e=O._getControlGroup(l);i=O._oPriorityOrder;if(e){n=this._getControlPriority(l);r=this._getControlIndex(l);t[e]=t[e]||[];s=t[e];s.unshift(l);if(!s._priority||i[s._priority]<i[n]){s._priority=n}if(!s._index||s._index<r){s._index=r}}else{o.push(l)}},this);Object.keys(t).forEach(function(e){o.push(t[e])});return o};O.prototype._extractControlsToMoveToOverflow=function(t,o){var e,i;for(e=0;e<t.length;e++){i=t[e];if(i.length){i.forEach(this._addToPopoverArrAndUpdateContentSize,this)}else{this._addToPopoverArrAndUpdateContentSize(i)}if(this._getControlPriority(i)!==b.Disappear){this._addOverflowButton()}if(this._iCurrentContentSize<=o){break}}};O.prototype._addToPopoverArrAndUpdateContentSize=function(t){this._aButtonsToMoveToPopover.unshift(t);this._iCurrentContentSize-=this._aControlSizes[t.getId()]};O.prototype._sortByPriorityAndIndex=function(t,o){var e=O._oPriorityOrder,i=this._getControlPriority(t),n=this._getControlPriority(o),r=e[i]-e[n];if(r!==0){return r}else{return this._getControlIndex(o)-this._getControlIndex(t)}};O.prototype._setControlsOverflowAndShrinking=function(t){var o;this._iCurrentContentSize=this._iContentSize;this._aButtonsToMoveToPopover=[];if(this._bSkipOptimization){this._bSkipOptimization=false}else{o=this._getPopover()._getContentIdsHash()}this._resetToolbar();this._collectPopoverOnlyControls();this._markControlsWithShrinkableLayoutData();if(this._iCurrentContentSize<=t+O.CONTENT_SIZE_TOLERANCE){this._flushButtonsToPopover();this._invalidateIfHashChanged(o);return}this._moveControlsToPopover(t);this._flushButtonsToPopover();if(this._iCurrentContentSize>t){this._checkContents()}this._invalidateIfHashChanged(o)};O.prototype._markControlsWithShrinkableLayoutData=function(){this.getContent().forEach(this._markControlWithShrinkableLayoutData,this)};O.prototype._collectPopoverOnlyControls=function(){var t=this._aPopoverOnlyControls.length,o,e;if(t){for(o=t-1;o>=0;o--){e=this._aPopoverOnlyControls[o];if(e.getVisible()){this._aButtonsToMoveToPopover.unshift(e)}}if(this._aButtonsToMoveToPopover.length>0){this._setOverflowButtonNeeded(true)}}};O.prototype._moveControlsToPopover=function(t){var o=[];if(this._aMovableControls.length){o=this._aggregateMovableControls();o.sort(this._sortByPriorityAndIndex.bind(this));this._extractControlsToMoveToOverflow(o,t)}};O.prototype._markControlWithShrinkableLayoutData=function(t){var o,e,i,n;t.removeStyleClass(l.shrinkClass);o=l.getOrigWidth(t.getId());if(!l.isRelativeWidth(o)){return}e=t.getLayoutData();i=e&&e.isA("sap.m.ToolbarLayoutData")&&e.getShrinkable();n=t.isA("sap.m.Breadcrumbs");if(i||n){t.addStyleClass(l.shrinkClass)}};O.prototype._resetToolbar=function(){this._getPopover().close();this._getPopover()._getAllContent().forEach(this._restoreButtonInToolbar,this);this._setOverflowButtonNeeded(false);this.getContent().forEach(this._removeShrinkingClass)};O.prototype._removeShrinkingClass=function(t){t.removeStyleClass(l.shrinkClass)};O.prototype._moveButtonToPopover=function(t){this._getPopover().addAssociatedContent(t)};O.prototype._restoreButtonInToolbar=function(t){if(typeof t==="object"){t=t.getId()}this._getPopover().removeAssociatedContent(t)};O.prototype._resetAndInvalidateToolbar=function(t){if(this._bIsBeingDestroyed){return}this._resetToolbar();this._bControlsInfoCached=false;this._iPreviousToolbarWidth=null;if(t){this._bSkipOptimization=true}if(this.$().length){this._preserveChildControlFocusInfo();this.invalidate()}};O.prototype.invalidate=function(){this._bInvalidatedAndNotRendered=true;i.prototype.invalidate.apply(this,arguments)};O.prototype._getVisibleContent=function(){var t=this.getContent(),o=this._getPopover()._getAllContent();return t.filter(function(t){return o.indexOf(t)===-1})};O.prototype._getVisibleAndNonOverflowContent=function(){return this._getVisibleContent().filter(function(t){return t.getVisible()})};O.prototype._getToggleButton=function(t){return new r({ariaHasPopup:y.Menu,id:this.getId()+t,icon:d.getIconURI("overflow"),press:this._overflowButtonPressed.bind(this),tooltip:C.getResourceBundleFor("sap.m").getText(O.TOGGLE_BUTTON_TOOLTIP),type:g.Transparent})};O.prototype._getOverflowButton=function(){var t;if(!this.getAggregation("_overflowButton")){t=this._getToggleButton("-overflowButton");this.setAggregation("_overflowButton",t,true)}return this.getAggregation("_overflowButton")};O.prototype._getOverflowButtonClone=function(){if(!this._oOverflowToolbarButtonClone){this._oOverflowToolbarButtonClone=this._getToggleButton("-overflowButtonClone").addStyleClass("sapMTBHiddenElement")}this._oOverflowToolbarButtonClone._getTooltip=function(){return""};this._oOverflowToolbarButtonClone.removeAllAssociation("ariaLabelledBy");return this._oOverflowToolbarButtonClone};O.prototype._overflowButtonPressed=function(t){var o=this._getPopover(),e=this._getBestPopoverPlacement();if(o.getPlacement()!==e){o.setPlacement(e)}if(o.isOpen()){o.close()}else{o.openBy(t.getSource())}};O.prototype._getPopover=function(){var t;if(!this.getAggregation("_popover")){t=new h(this.getId()+"-popover",{showHeader:false,showArrow:false,modal:false,horizontalScrolling:p.system.phone?false:true,contentWidth:p.system.phone?"100%":"auto",offsetY:this._detireminePopoverVerticalOffset(),ariaLabelledBy:s.getStaticId("sap.m","INPUT_AVALIABLE_VALUES")});t._adaptPositionParams=function(){h.prototype._adaptPositionParams.call(this);this._myPositions=["end top","begin center","end bottom","end center"];this._atPositions=["end bottom","end center","end top","begin center"]};if(p.system.phone){t.attachBeforeOpen(this._shiftPopupShadow,this)}t.attachAfterClose(this._popOverClosedHandler,this);this.setAggregation("_popover",t,true)}return this.getAggregation("_popover")};O.prototype._shiftPopupShadow=function(){var t=this._getPopover(),o=t.getCurrentPosition();if(o===v.Bottom){t.addStyleClass("sapMOTAPopoverNoShadowTop");t.removeStyleClass("sapMOTAPopoverNoShadowBottom")}else if(o===v.Top){t.addStyleClass("sapMOTAPopoverNoShadowBottom");t.removeStyleClass("sapMOTAPopoverNoShadowTop")}};O.prototype._popOverClosedHandler=function(){this._getOverflowButton().setPressed(false);if(n.closestTo(document.activeElement)){return}this._getOverflowButton().focus()};O.prototype._getOverflowButtonNeeded=function(){return this._bOverflowButtonNeeded};O.prototype._setOverflowButtonNeeded=function(t){if(this._bOverflowButtonNeeded!==t){this._bOverflowButtonNeeded=t}return this};O.prototype._getToolbarInteractiveControlsCount=function(){var t=this._getVisibleAndNonOverflowContent().filter(function(t){return this._getControlPriority(t)!==b.AlwaysOverflow&&t.isA("sap.m.IToolbarInteractiveControl")&&typeof t._getToolbarInteractive==="function"&&t._getToolbarInteractive()},this);return this._getOverflowButtonNeeded()?t.length+1:t.length};O.prototype._updateContentInfoInControlsCollections=function(){this.getContent().forEach(function(t){if(t){this._removeContentFromControlsCollections(t);this._moveControlInSuitableCollection(t,this._getControlPriority(t))}},this)};O.prototype._moveControlInSuitableCollection=function(t,o){var e=o!==b.NeverOverflow,i=o===b.AlwaysOverflow;if(f.supportsControl(t)&&i){this._aPopoverOnlyControls.push(t)}else{if(f.supportsControl(t)&&e&&t.getVisible()){this._aMovableControls.push(t)}else{this._aToolbarOnlyControls.push(t)}}};O.prototype._removeContentFromControlsCollections=function(t){var o,e,i;for(o=0;o<this._aAllCollections.length;o++){e=this._aAllCollections[o];i=e.indexOf(t);if(i!==-1){e.splice(i,1)}}};O.prototype._clearAllControlsCollections=function(){this._aMovableControls=[];this._aToolbarOnlyControls=[];this._aPopoverOnlyControls=[];this._aAllCollections=[this._aMovableControls,this._aToolbarOnlyControls,this._aPopoverOnlyControls]};O.prototype.onLayoutDataChange=function(t){this._resetAndInvalidateToolbar(true);t&&this._updateContentInfoInControlsCollections()};O.prototype.addContent=function(t){this._registerControlListener(t);this._resetAndInvalidateToolbar(false);if(t){this._moveControlInSuitableCollection(t,this._getControlPriority(t))}this._informNewFlexibleContentAdded(t);return this._callToolbarMethod("addContent",arguments)};O.prototype.insertContent=function(t,o){this._registerControlListener(t);this._resetAndInvalidateToolbar(false);if(t){this._moveControlInSuitableCollection(t,this._getControlPriority(t))}this._informNewFlexibleContentAdded(t);return this._callToolbarMethod("insertContent",arguments)};O.prototype.removeContent=function(){var t=this._callToolbarMethod("removeContent",arguments);if(t){this._getPopover().removeAssociatedContent(t.getId())}this._resetAndInvalidateToolbar(false);this._deregisterControlListener(t);this._removeContentFromControlsCollections(t);return t};O.prototype.removeAllContent=function(){var t=this._callToolbarMethod("removeAllContent",arguments);t.forEach(this._deregisterControlListener,this);t.forEach(this._removeContentFromControlsCollections,this);this._resetAndInvalidateToolbar(false);this._clearAllControlsCollections();return t};O.prototype.destroyContent=function(){this._resetAndInvalidateToolbar(false);setTimeout(function(){this._resetAndInvalidateToolbar(false)}.bind(this),0);this._clearAllControlsCollections();return this._callToolbarMethod("destroyContent",arguments)};O.prototype._informNewFlexibleContentAdded=function(t){if(t&&t.isA("sap.m.IOverflowToolbarFlexibleContent")){this.fireEvent("_contentSizeChange",{contentSize:null})}};O.prototype._registerControlListener=function(t){var o;if(t){t.attachEvent("_change",this._onContentPropertyChangedOverflowToolbar,this);if(t.isA("sap.m.IOverflowToolbarContent")){o=t.getOverflowToolbarConfig().invalidationEvents;if(o&&Array.isArray(o)){o.forEach(function(o){t.attachEvent(o,this._onInvalidationEventFired,this)},this)}}}};O.prototype._deregisterControlListener=function(t){var o;if(t){t.detachEvent("_change",this._onContentPropertyChangedOverflowToolbar,this);if(t.isA("sap.m.IOverflowToolbarContent")){o=t.getOverflowToolbarConfig().invalidationEvents;if(o&&Array.isArray(o)){o.forEach(function(o){t.detachEvent(o,this._onInvalidationEventFired,this)},this)}}}};O.prototype._onContentPropertyChangedOverflowToolbar=function(t){var o=t.getSource(),e,i;this._updateContentInfoInControlsCollections();if(!this._bListenForControlPropertyChanges){return}e=f.getControlConfig(o);i=t.getParameter("name");if(i!=="visible"&&!o.getVisible()){return}if(typeof e!=="undefined"&&e.noInvalidationProps.indexOf(i)!==-1){return}if(i==="visible"){this._bContentVisibilityChanged=true}if(o.isA("sap.m.IOverflowToolbarFlexibleContent")&&o.getVisible()){this.fireEvent("_contentSizeChange",{contentSize:null})}this._resetAndInvalidateToolbar(true)};O.prototype._onInvalidationEventFired=function(t){var o=t.getSource();if(!this._bListenForInvalidationEvents){return}if(o.isA("sap.m.IOverflowToolbarFlexibleContent")){this.fireEvent("_contentSizeChange",{contentSize:null})}this._resetAndInvalidateToolbar(true)};O.prototype._getOverflowButtonSize=function(){return this._iOverflowToolbarButtonSize};O.prototype._getBestPopoverPlacement=function(){var t=this.getHTMLTag();if(t==="Footer"){return v.Top}else if(t==="Header"){return v.Bottom}return v.Vertical};O.prototype._getControlsIds=function(){return this.getContent().map(function(t){return t.getId()})};O.prototype._getControlIndex=function(t){return t.length?t._index:this.indexOfContent(t)};O.prototype._getOptimalControlWidth=function(t,o){var e,i=t.getLayoutData(),n=i&&i.isA("sap.m.ToolbarLayoutData"),r=t.getVisible(),s=t.isA("sap.m.Breadcrumbs"),l=false,a,h;if(s){l=true}else if(n){l=i.getShrinkable()}a=l?this._getMinWidthOfShrinkableControl(t):0;if(t.isA("sap.m.ToolbarSpacer")){h=parseInt(t.$().css("width"));a=t.getWidth()&&h?h:0;e=O._getOptimalWidthOfShrinkableControl(t,a)}else if(l&&a>0&&r){e=O._getOptimalWidthOfShrinkableControl(t,a)}else{e=r?O._getControlWidth(t):0}if(e===null){e=typeof o!=="undefined"?o:0}return e};O.prototype._getMinWidthOfShrinkableControl=function(t){var o=t.$().css("min-width"),e=parseInt(o),i=l.isRelativeWidth(o);if(i){return e*this.$().width()/100}else{return e}};O.prototype._getControlPriority=function(t){var o,e,i,n;if(t.length){return t._priority}o=t.getMetadata().getInterfaces().indexOf("sap.m.IOverflowToolbarContent")>-1;n=o&&t.getOverflowToolbarConfig().getCustomImportance;if(o&&typeof n==="function"){return n()}e=t.getLayoutData&&t.getLayoutData();if(e&&e instanceof a){if(e.getMoveToOverflow()===false){return b.NeverOverflow}if(e.getStayInOverflow()===true){return b.AlwaysOverflow}i=e.getPriority();if(i===b.Never){return b.NeverOverflow}if(i===b.Always){return b.AlwaysOverflow}return i}return b.High};O._getControlMargins=function(t){return t.$().outerWidth(true)-t.$().outerWidth()};O._getOptimalWidthOfShrinkableControl=function(t,o){return o+O._getControlMargins(t)};O._getControlWidth=function(t){var o=t&&t.getDomRef();if(o&&t.$().is(":visible")){return Math.round(o.getBoundingClientRect().width+O._getControlMargins(t))}return null};O.prototype.getAccessibilityInfo=function(){var t=[],o=this._getVisibleAndNonOverflowContent();if(o.length>0){t=t.concat(o)}if(this._getOverflowButtonNeeded()){t.push(this._getOverflowButton())}return{children:t}};O._getControlGroup=function(t){var o=t.getLayoutData();if(o instanceof a){return o.getGroup()}};O._oPriorityOrder=function(){var t={};t[b.Disappear]=1;t[b.Low]=2;t["Medium"]=3;t[b.High]=4;return t}();O.prototype._detireminePopoverVerticalOffset=function(){return this.$().parents().hasClass("sapUiSizeCompact")?2:3};O.prototype._recalculateOverflowButtonSize=function(){var t=this._getOverflowButtonClone().$(),o;if(!this._getOverflowButtonSize()&&t.width()>0){o=t.outerWidth(true);this._iOverflowToolbarButtonSize=o?o:0}};O.prototype.onThemeChanged=function(){this._resetAndInvalidateToolbar();this._iOverflowToolbarButtonSize=0;this._recalculateOverflowButtonSize();for(var t in this._aControlSizes){if(this._aControlSizes.hasOwnProperty(t)){this._aControlSizes[t]=0}}};O.prototype.closeOverflow=function(){this._getPopover().close()};return O});
//# sourceMappingURL=OverflowToolbar.js.map