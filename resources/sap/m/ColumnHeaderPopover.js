/*!
 * OpenUI5
 * (c) Copyright 2009-2024 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.define(["sap/ui/core/Control","sap/ui/core/Lib","sap/ui/core/StaticArea","sap/m/Toolbar","sap/m/Button","sap/m/ResponsivePopover","sap/m/ToolbarSpacer"],function(e,t,o,i,r,n,a){"use strict";var s=e.extend("sap.m.ColumnHeaderPopover",{metadata:{library:"sap.m",properties:{},aggregations:{items:{type:"sap.m.ColumnPopoverItem",multiple:true,singularName:"item",bindable:true},_popover:{type:"sap.m.ResponsivePopover",multiple:false,visibility:"hidden"}},defaultAggregation:"items",associations:{ariaLabelledBy:{type:"sap.ui.core.Control",multiple:true,singularName:"ariaLabelledBy"}}},renderer:null});s.prototype.init=function(){this._bPopoverCreated=false;this._oShownCustomContent=null;var e=this;this._minWidthDelegate=function(){this.$().css("min-width",e.minWidth)}};s.prototype.exit=function(){if(this._oToolbar){this._oToolbar.destroy();this._oToolbar=null}this._closeBtn=null;this._spacer=null;this._aButtons=null;this._oShownCustomContent=null};s.prototype._createPopover=function(){var e=this;this._oShownCustomContent=null;var o=t.getResourceBundleFor("sap.m"),s=o.getText("COLUMNHEADERPOPOVER_CLOSE_BUTTON");var l=new n(this.getId()+"-popover",{showArrow:false,showHeader:false,placement:"Bottom",verticalScrolling:true,horizontalScrolling:false,ariaLabelledBy:this.getAriaLabelledBy(),beforeClose:function(t){if(e._oShownCustomContent){e._oShownCustomContent.setVisible(false);e._oShownCustomContent=null}e._cleanSelection()}});l._oControl.addDelegate({onAfterRendering:this._minWidthDelegate},l._oControl);this.setAggregation("_popover",l);var p=new i(this.getId()+"-tb");this._spacer=new a;this._closeBtn=new r(p.getId()+"-closeBtn",{type:"Transparent",icon:"sap-icon://decline",tooltip:s,press:[l.close,l]});p.addContent(this._spacer);p.addContent(this._closeBtn);l.addContent(p);this._oToolbar=p};s.prototype._cleanSelection=function(e){var t=this._aButtons;if(t){t.forEach(function(t){if((!e||t!==e)&&t.getPressed&&t.getPressed()){t.setPressed(false)}})}};s.prototype.openBy=function(e){if(!this._bPopoverCreated){this._createPopover();this._bPopoverCreated=true}else{this._oToolbar.removeContent(this._spacer);this._oToolbar.removeContent(this._closeBtn);this._oToolbar.destroyContent()}var t=this.getAggregation("_popover");var i=[];var r=this.getItems();var n=5;for(var a=0;a<r.length&&i.length<n;a++){var s=r[a];if(s.getVisible()){var l=s._createButton(this._oToolbar.getId()+"-btn_"+a,this);l._sContentId=s._sContentId;i.push(l);this._oToolbar.insertContent(l,a)}}if(i.length===0){return}this._aButtons=i;this._oToolbar.addContent(this._spacer);this._oToolbar.addContent(this._closeBtn);if(!this._bAppendedToUIArea&&!this.getParent()){var p=o.getUIArea();p.addContent(this,true);this._bAppendedToUIArea=true}var h=e.getFocusDomRef();if(h){t.setOffsetY(-h.clientHeight);this.minWidth=h.clientWidth}t.openBy(e)};s.prototype.invalidate=function(t){var o=this.getAggregation("_popover");if(t===o){e.prototype.invalidate.apply(this,arguments)}return this};s.prototype.addAriaLabelledBy=function(e){var t=this.getAggregation("_popover");if(t){t.addAriaLabelledBy(e)}return this.addAssociation("ariaLabelledBy",e)};s.prototype.removeAriaLabelledBy=function(e){var t=this.getAggregation("_popover");if(t){t.removeAriaLabelledBy(e)}return this.removeAssociation("ariaLabelledBy",e)};s.prototype.removeAllAssociation=function(t,o){if(t==="ariaLabelledBy"){var i=this.getAggregation("_popover");if(i){i.removeAllAssociation(t,o)}}return e.prototype.removeAllAssociation.apply(this,arguments)};return s});
//# sourceMappingURL=ColumnHeaderPopover.js.map